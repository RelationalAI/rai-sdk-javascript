var t={315:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.renderTable=e.printTable=e.Table=void 0;const r=i(n(297));e.Table=r.default;const s=n(215);Object.defineProperty(e,"printTable",{enumerable:!0,get:function(){return s.printSimpleTable}}),Object.defineProperty(e,"renderTable",{enumerable:!0,get:function(){return s.renderSimpleTable}})},297:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(464)),s=n(695);e.default=class{constructor(t){this.table=new r.default(t)}addColumn(t){return this.table.addColumn(t),this}addColumns(t){return this.table.addColumns(t),this}addRow(t,e){return this.table.addRow(t,(0,s.convertRawRowOptionsToStandard)(e)),this}addRows(t,e){return this.table.addRows(t,(0,s.convertRawRowOptionsToStandard)(e)),this}printTable(){const t=this.table.renderTable();console.log(t)}render(){return this.table.renderTable()}}},404:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawColumnToInternalColumn=e.objIfExists=void 0;const i=n(585);e.objIfExists=(t,e)=>e?{[t]:e}:{},e.rawColumnToInternalColumn=t=>Object.assign(Object.assign(Object.assign(Object.assign({name:t.name,title:t.title||t.name},(0,e.objIfExists)("color",t.color)),(0,e.objIfExists)("maxLen",t.maxLen)),(0,e.objIfExists)("minLen",t.minLen)),{alignment:t.alignment||i.DEFAULT_ROW_ALIGNMENT})},215:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.printSimpleTable=e.renderSimpleTable=e.renderTable=void 0;const r=i(n(550)),s=n(820),o=n(585),a=n(695),l=i(n(464)),c=n(970),u=(t,e,n,i,l,c,u)=>{const h=new r.default(u);return h.addCharsWithColor(o.DEFAULT_ROW_FONT_COLOR,t.vertical),e.forEach((e=>{const r=n<i[e.name].length?(0,a.cellText)(i[e.name][n]):"";h.addCharsWithColor(o.DEFAULT_ROW_FONT_COLOR," "),h.addCharsWithColor(l&&o.DEFAULT_HEADER_FONT_COLOR||e.color||c.color,(0,s.textWithPadding)(r,e.alignment||o.DEFAULT_ROW_ALIGNMENT,e.length||o.DEFAULT_COLUMN_LEN)),h.addCharsWithColor(o.DEFAULT_ROW_FONT_COLOR,` ${t.vertical}`)})),h.renderConsole()},h=(t,e,n,i,r)=>{const s=(0,a.getWidthLimitedColumnsArray)(e,n),o=Object.values(s).reduce(((t,e)=>Math.max(t,e.length)),0),l=[];for(let a=0;a<o;a+=1){const o=u(t,e,a,s,r,n,i);l.push(o)}return l};e.renderTable=t=>{(0,c.preProcessColumns)(t),(0,c.preProcessRows)(t);const e=[];return(t=>{const e=[];if(void 0===t.title)return e;const n=(0,s.textWithPadding)(t.title,o.DEFAULT_HEADER_ALIGNMENT,t.columns.map((t=>t.length||o.DEFAULT_COLUMN_LEN)).reduce(((t,e)=>t+e+2+1),1)),i=new r.default(t.colorMap);return i.addCharsWithColor(o.DEFAULT_HEADER_FONT_COLOR,n),e.push(i.renderConsole()),e})(t).forEach((t=>e.push(t))),(t=>{let e=[];e.push((0,a.renderTableHorizontalBorders)(t.tableStyle.headerTop,t.columns.map((t=>t.length||o.DEFAULT_COLUMN_LEN))));const n=(0,a.createHeaderAsRow)(a.createRow,t.columns);return e=e.concat(h(t.tableStyle,t.columns,n,t.colorMap,!0)),e.push((0,a.renderTableHorizontalBorders)(t.tableStyle.headerBottom,t.columns.map((t=>t.length||o.DEFAULT_COLUMN_LEN)))),e})(t).forEach((t=>e.push(t))),t.rows.forEach((n=>{((t,e)=>{let n=[];return n=n.concat(h(t.tableStyle,t.columns,e,t.colorMap)),n})(t,n).forEach((t=>e.push(t))),((t,e)=>{const n=[],i=t.rows.length-1;return t.rows.indexOf(e)!==i&&e.separator&&n.push((0,a.renderTableHorizontalBorders)(t.tableStyle.rowSeparator,t.columns.map((t=>t.length||o.DEFAULT_COLUMN_LEN)))),n})(t,n).forEach((t=>e.push(t)))})),(t=>{const e=[];return e.push((0,a.renderTableHorizontalBorders)(t.tableStyle.tableBottom,t.columns.map((t=>t.length||o.DEFAULT_COLUMN_LEN)))),e})(t).forEach((t=>e.push(t))),e.join("\n")},e.renderSimpleTable=t=>{const n=new l.default;return n.addRows(t),(0,e.renderTable)(n)},e.printSimpleTable=t=>{console.log((0,e.renderSimpleTable)(t))}},464:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=n(550),r=n(585),s=n(695),o=n(404),a=n(215),l=()=>0,c=()=>!0;e.default=class{constructor(t){this.rows=[],this.columns=[],this.title=void 0,this.tableStyle=r.DEFAULT_TABLE_STYLE,this.filterFunction=c,this.sortFunction=l,this.enabledColumns=[],this.disabledColumns=[],this.computedColumns=[],this.rowSeparator=r.DEFAULT_ROW_SEPARATOR,this.colorMap=i.DEFAULT_COLOR_MAP,t instanceof Array?this.initSimple(t):"object"==typeof t&&this.initDetailed(t)}initSimple(t){this.columns=t.map((t=>({name:t,title:t,alignment:r.DEFAULT_ROW_ALIGNMENT})))}initDetailed(t){var e;this.title=(null==t?void 0:t.title)||this.title,this.tableStyle=(null==t?void 0:t.style)||this.tableStyle,this.sortFunction=(null==t?void 0:t.sort)||this.sortFunction,this.filterFunction=(null==t?void 0:t.filter)||this.filterFunction,this.enabledColumns=(null==t?void 0:t.enabledColumns)||this.enabledColumns,this.disabledColumns=(null==t?void 0:t.disabledColumns)||this.disabledColumns,this.computedColumns=(null==t?void 0:t.computedColumns)||this.computedColumns,this.columns=(null===(e=null==t?void 0:t.columns)||void 0===e?void 0:e.map(o.rawColumnToInternalColumn))||this.columns,this.rowSeparator=(null==t?void 0:t.rowSeparator)||this.rowSeparator,(null==t?void 0:t.colorMap)&&(this.colorMap=Object.assign(Object.assign({},this.colorMap),t.colorMap)),void 0!==t.rows&&this.addRows(t.rows)}createColumnFromRow(t){const e=this.columns.map((t=>t.name));Object.keys(t).forEach((t=>{e.includes(t)||this.columns.push((0,s.createColumFromOnlyName)(t))}))}addColumn(t){"string"==typeof t?this.columns.push((0,s.createColumFromOnlyName)(t)):this.columns.push((0,s.createColumFromComputedColumn)(t))}addColumns(t){t.forEach((t=>{this.addColumn(t)}))}addRow(t,e){this.createColumnFromRow(t),this.rows.push((0,s.createRow)((null==e?void 0:e.color)||r.DEFAULT_ROW_FONT_COLOR,t,void 0!==(null==e?void 0:e.separator)?null==e?void 0:e.separator:this.rowSeparator))}addRows(t,e){t.forEach((t=>{this.addRow(t,e)}))}renderTable(){return(0,a.renderTable)(this)}}},970:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.preProcessRows=e.preProcessColumns=void 0;const i=n(695);e.preProcessColumns=t=>{(t=>{t.computedColumns.length&&t.computedColumns.forEach((e=>{t.addColumn(e),t.rows.forEach((t=>{t.text[e.name]=e.function(t.text)}))}))})(t),(t=>{t.disabledColumns.length&&(t.columns=t.columns.filter((e=>!t.disabledColumns.includes(e.name))))})(t),(t=>{t.enabledColumns.length&&(t.columns=t.columns.filter((e=>t.enabledColumns.includes(e.name))))})(t),(t=>{t.columns.forEach((e=>{e.length=(0,i.findLenOfColumn)(e,t.rows)}))})(t)},e.preProcessRows=t=>{const e=t.rows.filter((e=>t.filterFunction(e.text))).sort(((e,n)=>t.sortFunction(e.text,n.text)));t.rows=e}},550:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_COLOR_MAP=void 0,e.DEFAULT_COLOR_MAP={red:"[31m",green:"[32m",yellow:"[33m",blue:"[34m",magenta:"[35m",cyan:"[36m",white:"[37m",crimson:"[38m",white_bold:"[01m",reset:"[0m"},e.default=class{constructor(t=e.DEFAULT_COLOR_MAP){this.text="",this.colorMap=t}addCharsWithColor(t,e){const n=this.colorMap[t];this.text+=void 0!==n?`${n}${e}${this.colorMap.reset}`:e}renderConsole(){return this.text}}},471:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=n(51),r=/\x1b\[\d{1,3}m/g;e.default=t=>(0,i.wcswidth)((t=>t.replace(r,""))(t))},820:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.biggestWordInSentence=e.limitWidth=e.textWithPadding=void 0;const r=i(n(471));e.textWithPadding=(t,e,n)=>{const i=(0,r.default)(t),s=Math.floor((n-i)/2),o=n-s-i;switch(e){case"left":return t.concat(" ".repeat(n-i));case"center":return" ".repeat(s).concat(t).concat(" ".repeat(o));default:return" ".repeat(n-i).concat(t)}},e.limitWidth=(t,e)=>{const n=[],i=t.split(" ");let s=[],o=0;return i.forEach((t=>{const i=(0,r.default)(t);o+i<=e?(o+=i+1,s.push(t)):(n.push(s.join(" ")),s=[t],o=i+1)})),n.push(s.join(" ")),n},e.biggestWordInSentence=t=>t.split(" ").reduce(((t,e)=>Math.max(t,(0,r.default)(e))),0)},585:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_HEADER_ALIGNMENT=e.DEFAULT_ROW_ALIGNMENT=e.DEFAULT_HEADER_FONT_COLOR=e.DEFAULT_ROW_FONT_COLOR=e.COLORS=e.ALIGNMENTS=e.DEFAULT_TABLE_STYLE=e.DEFAULT_ROW_SEPARATOR=e.DEFAULT_COLUMN_LEN=void 0,e.DEFAULT_COLUMN_LEN=20,e.DEFAULT_ROW_SEPARATOR=!1,e.DEFAULT_TABLE_STYLE={headerTop:{left:"┌",mid:"┬",right:"┐",other:"─"},headerBottom:{left:"├",mid:"┼",right:"┤",other:"─"},tableBottom:{left:"└",mid:"┴",right:"┘",other:"─"},vertical:"│",rowSeparator:{left:"├",mid:"┼",right:"┤",other:"─"}},e.ALIGNMENTS=["right","left","center"],e.COLORS=["red","green","yellow","white","blue","magenta","cyan","crimson","white_bold","reset"],e.DEFAULT_ROW_FONT_COLOR="white",e.DEFAULT_HEADER_FONT_COLOR="white_bold",e.DEFAULT_ROW_ALIGNMENT="right",e.DEFAULT_HEADER_ALIGNMENT="center"},695:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getWidthLimitedColumnsArray=e.createHeaderAsRow=e.renderTableHorizontalBorders=e.findLenOfColumn=e.createRow=e.createColumFromComputedColumn=e.createColumFromOnlyName=e.createTableHorizontalBorders=e.convertRawRowOptionsToStandard=e.cellText=void 0;const r=n(404),s=i(n(471)),o=n(820),a=n(585),l=(t,e)=>Math.max(t,e);e.cellText=t=>null==t?"":`${t}`,e.convertRawRowOptionsToStandard=t=>{if(t)return{color:t.color,separator:t.separator||a.DEFAULT_ROW_SEPARATOR}},e.createTableHorizontalBorders=({left:t,mid:e,right:n,other:i},r)=>{let s=t;return r.forEach((t=>{s+=i.repeat(t+2),s+=e})),s=s.slice(0,-e.length),s+=n,s},e.createColumFromOnlyName=t=>({name:t,title:t}),e.createColumFromComputedColumn=t=>Object.assign(Object.assign(Object.assign(Object.assign({name:t.name,title:t.title||t.name},(0,r.objIfExists)("color",t.color)),(0,r.objIfExists)("maxLen",t.maxLen)),(0,r.objIfExists)("minLen",t.minLen)),{alignment:t.alignment||a.DEFAULT_ROW_ALIGNMENT}),e.createRow=(t,e,n)=>({color:t,separator:n,text:e}),e.findLenOfColumn=(t,n)=>{const i=t.name,r=t.title;let a=l(0,(null==t?void 0:t.minLen)||0);return t.maxLen?(a=l(a,l(t.maxLen,(0,o.biggestWordInSentence)(r))),a=n.reduce(((t,n)=>l(t,(0,o.biggestWordInSentence)((0,e.cellText)(n.text[i])))),a),a):(a=l(a,(0,s.default)(r)),n.forEach((t=>{a=l(a,(0,s.default)((0,e.cellText)(t.text[i])))})),a)},e.renderTableHorizontalBorders=(t,n)=>(0,e.createTableHorizontalBorders)(t,n),e.createHeaderAsRow=(t,e)=>{const n=t(a.DEFAULT_HEADER_FONT_COLOR,{},!1);return e.forEach((t=>{n.text[t.name]=t.title})),n},e.getWidthLimitedColumnsArray=(t,n)=>{const i={};return t.forEach((t=>{i[t.name]=(0,o.limitWidth)((0,e.cellText)(n.text[t.name]),t.length||a.DEFAULT_COLUMN_LEN)})),i}},776:function(t,e,n){var i;!function(r){var s,o,a,l=9e15,c=1e9,u="0123456789abcdef",h="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},p=!0,y="[DecimalError] ",b=y+"Invalid argument: ",m=y+"Precision limit exceeded",g=y+"crypto unavailable",v="[object Decimal]",w=Math.floor,_=Math.pow,I=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,T=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,N=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,O=1e7,A=h.length-1,E=d.length-1,D={toStringTag:v};function B(t){var e,n,i,r=t.length-1,s="",o=t[0];if(r>0){for(s+=o,e=1;e<r;e++)(n=7-(i=t[e]+"").length)&&(s+=P(n)),s+=i;(n=7-(i=(o=t[e])+"").length)&&(s+=P(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function F(t,e,n){if(t!==~~t||t<e||t>n)throw Error(b+t)}function U(t,e,n,i){var r,s,o,a;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=7,r=0):(r=Math.ceil((e+1)/7),e%=7),s=_(10,7-e),a=t[r]%s|0,null==i?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),o=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(t[r+1]/s/100|0)==_(10,e-2)-1||(a==s/2||0==a)&&0==(t[r+1]/s/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),o=(i||n<4)&&9999==a||!i&&n>3&&4999==a):o=((i||n<4)&&a+1==s||!i&&n>3&&a+1==s/2)&&(t[r+1]/s/1e3|0)==_(10,e-3)-1,o}function L(t,e,n){for(var i,r,s=[0],o=0,a=t.length;o<a;){for(r=s.length;r--;)s[r]*=e;for(s[0]+=u.indexOf(t.charAt(o++)),i=0;i<s.length;i++)s[i]>n-1&&(void 0===s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}D.absoluteValue=D.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),M(t)},D.ceil=function(){return M(new this.constructor(this),this.e+1,2)},D.clampedTo=D.clamp=function(t,e){var n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(b+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new i(n)},D.comparedTo=D.cmp=function(t){var e,n,i,r,s=this,o=s.d,a=(t=new s.constructor(t)).d,l=s.s,c=t.s;if(!o||!a)return l&&c?l!==c?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-c:0;if(l!==c)return l;if(s.e!==t.e)return s.e>t.e^l<0?1:-1;for(e=0,n=(i=o.length)<(r=a.length)?i:r;e<n;++e)if(o[e]!==a[e])return o[e]>a[e]^l<0?1:-1;return i===r?0:i>r^l<0?1:-1},D.cosine=D.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i,r;if(e.isZero())return e;(i=e.d.length)<32?r=(1/J(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),t.precision+=n,e=Z(t,1,e.times(r),new t(1));for(var s=n;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}(i,X(i,n)),i.precision=t,i.rounding=e,M(2==a||3==a?n.neg():n,t,e,!0)):new i(1):new i(NaN)},D.cubeRoot=D.cbrt=function(){var t,e,n,i,r,s,o,a,l,c,u=this,h=u.constructor;if(!u.isFinite()||u.isZero())return new h(u);for(p=!1,(s=u.s*_(u.s*u,1/3))&&Math.abs(s)!=1/0?i=new h(s.toString()):(n=B(u.d),(s=((t=u.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=_(n,1/3),t=w((t+1)/3)-(t%3==(t<0?-1:2)),(i=new h(n=s==1/0?"5e"+t:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=u.s),o=(t=h.precision)+3;;)if(c=(l=(a=i).times(a).times(a)).plus(u),i=x(c.plus(u).times(a),c.plus(l),o+2,1),B(a.d).slice(0,o)===(n=B(i.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(r||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(M(i,t+1,1),e=!i.times(i).times(i).eq(u));break}if(!r&&(M(a,t+1,0),a.times(a).times(a).eq(u))){i=a;break}o+=4,r=1}return p=!0,M(i,t,h.rounding,e)},D.decimalPlaces=D.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=7*((t=e.length-1)-w(this.e/7)),t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},D.dividedBy=D.div=function(t){return x(this,new this.constructor(t))},D.dividedToIntegerBy=D.divToInt=function(t){var e=this.constructor;return M(x(this,new e(t),0,1,1),e.precision,e.rounding)},D.equals=D.eq=function(t){return 0===this.cmp(t)},D.floor=function(){return M(new this.constructor(this),this.e+1,3)},D.greaterThan=D.gt=function(t){return this.cmp(t)>0},D.greaterThanOrEqualTo=D.gte=function(t){var e=this.cmp(t);return 1==e||0===e},D.hyperbolicCosine=D.cosh=function(){var t,e,n,i,r,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,i=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,(r=s.d.length)<32?e=(1/J(4,t=Math.ceil(r/3))).toString():(t=16,e="2.3283064365386962890625e-10"),s=Z(o,1,s.times(e),new o(1),!0);for(var l,c=t,u=new o(8);c--;)l=s.times(s),s=a.minus(l.times(u.minus(l.times(u))));return M(s,o.precision=n,o.rounding=i,!0)},D.hyperbolicSine=D.sinh=function(){var t,e,n,i,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(r.e,r.sd())+4,s.rounding=1,(i=r.d.length)<3)r=Z(s,2,r,r,!0);else{t=(t=1.4*Math.sqrt(i))>16?16:0|t,r=Z(s,2,r=r.times(1/J(5,t)),r,!0);for(var o,a=new s(5),l=new s(16),c=new s(20);t--;)o=r.times(r),r=r.times(a.plus(o.times(l.times(o).plus(c))))}return s.precision=e,s.rounding=n,M(r,e,n,!0)},D.hyperbolicTangent=D.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,x(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)},D.inverseCosine=D.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,s=n.rounding;return-1!==i?0===i?e.isNeg()?V(n,r,s):new n(0):new n(NaN):e.isZero()?V(n,r+4,s).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=V(n,r+4,s).times(.5),n.precision=r,n.rounding=s,t.minus(e))},D.inverseHyperbolicCosine=D.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,p=!1,n=n.times(n).minus(1).sqrt().plus(n),p=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)},D.inverseHyperbolicSine=D.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,p=!1,n=n.times(n).plus(1).sqrt().plus(n),p=!0,i.precision=t,i.rounding=e,n.ln())},D.inverseHyperbolicTangent=D.atanh=function(){var t,e,n,i,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=s.precision,e=s.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?M(new s(r),t,e,!0):(s.precision=n=i-r.e,r=x(r.plus(1),new s(1).minus(r),n+t,1),s.precision=t+4,s.rounding=1,r=r.ln(),s.precision=t,s.rounding=e,r.times(.5))):new s(NaN)},D.inverseSine=D.asin=function(){var t,e,n,i,r=this,s=r.constructor;return r.isZero()?new s(r):(e=r.abs().cmp(1),n=s.precision,i=s.rounding,-1!==e?0===e?((t=V(s,n+4,i).times(.5)).s=r.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=i,r.times(2)))},D.inverseTangent=D.atan=function(){var t,e,n,i,r,s,o,a,l,c=this,u=c.constructor,h=u.precision,d=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&h+4<=E)return(o=V(u,h+4,d).times(.25)).s=c.s,o}else{if(!c.s)return new u(NaN);if(h+4<=E)return(o=V(u,h+4,d).times(.5)).s=c.s,o}for(u.precision=a=h+10,u.rounding=1,t=n=Math.min(28,a/7+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(p=!1,e=Math.ceil(a/7),i=1,l=c.times(c),o=new u(c),r=c;-1!==t;)if(r=r.times(l),s=o.minus(r.div(i+=2)),r=r.times(l),void 0!==(o=s.plus(r.div(i+=2))).d[e])for(t=e;o.d[t]===s.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),p=!0,M(o,u.precision=h,u.rounding=d,!0)},D.isFinite=function(){return!!this.d},D.isInteger=D.isInt=function(){return!!this.d&&w(this.e/7)>this.d.length-2},D.isNaN=function(){return!this.s},D.isNegative=D.isNeg=function(){return this.s<0},D.isPositive=D.isPos=function(){return this.s>0},D.isZero=function(){return!!this.d&&0===this.d[0]},D.lessThan=D.lt=function(t){return this.cmp(t)<0},D.lessThanOrEqualTo=D.lte=function(t){return this.cmp(t)<1},D.logarithm=D.log=function(t){var e,n,i,r,s,o,a,l,c=this,u=c.constructor,h=u.precision,d=u.rounding;if(null==t)t=new u(10),e=!0;else{if(n=(t=new u(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new u(NaN);e=t.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new u(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(r=n[0];r%10==0;)r/=10;s=1!==r}if(p=!1,o=K(c,a=h+5),i=e?k(u,a+10):K(t,a),U((l=x(o,i,a,1)).d,r=h,d))do{if(o=K(c,a+=10),i=e?k(u,a+10):K(t,a),l=x(o,i,a,1),!s){+B(l.d).slice(r+1,r+15)+1==1e14&&(l=M(l,h+1,0));break}}while(U(l.d,r+=10,d));return p=!0,M(l,h,d)},D.minus=D.sub=function(t){var e,n,i,r,s,o,a,l,c,u,h,d,f=this,y=f.constructor;if(t=new y(t),!f.d||!t.d)return f.s&&t.s?f.d?t.s=-t.s:t=new y(t.d||f.s!==t.s?f:NaN):t=new y(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(c=f.d,d=t.d,a=y.precision,l=y.rounding,!c[0]||!d[0]){if(d[0])t.s=-t.s;else{if(!c[0])return new y(3===l?-0:0);t=new y(f)}return p?M(t,a,l):t}if(n=w(t.e/7),u=w(f.e/7),c=c.slice(),s=u-n){for((h=s<0)?(e=c,s=-s,o=d.length):(e=d,n=u,o=c.length),s>(i=Math.max(Math.ceil(a/7),o)+2)&&(s=i,e.length=1),e.reverse(),i=s;i--;)e.push(0);e.reverse()}else{for((h=(i=c.length)<(o=d.length))&&(o=i),i=0;i<o;i++)if(c[i]!=d[i]){h=c[i]<d[i];break}s=0}for(h&&(e=c,c=d,d=e,t.s=-t.s),o=c.length,i=d.length-o;i>0;--i)c[o++]=0;for(i=d.length;i>s;){if(c[--i]<d[i]){for(r=i;r&&0===c[--r];)c[r]=O-1;--c[r],c[i]+=O}c[i]-=d[i]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=C(c,n),p?M(t,a,l):t):new y(3===l?-0:0)},D.modulo=D.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?M(new i(n),i.precision,i.rounding):(p=!1,9==i.modulo?(e=x(n,t.abs(),0,3,1)).s*=t.s:e=x(n,t,0,i.modulo,1),e=e.times(t),p=!0,n.minus(e))},D.naturalExponential=D.exp=function(){return Y(this)},D.naturalLogarithm=D.ln=function(){return K(this)},D.negated=D.neg=function(){var t=new this.constructor(this);return t.s=-t.s,M(t)},D.plus=D.add=function(t){var e,n,i,r,s,o,a,l,c,u,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return h.s&&t.s?h.d||(t=new d(t.d||h.s===t.s?h:NaN)):t=new d(NaN),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(c=h.d,u=t.d,a=d.precision,l=d.rounding,!c[0]||!u[0])return u[0]||(t=new d(h)),p?M(t,a,l):t;if(s=w(h.e/7),i=w(t.e/7),c=c.slice(),r=s-i){for(r<0?(n=c,r=-r,o=u.length):(n=u,i=s,o=c.length),r>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(r=o,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((o=c.length)-(r=u.length)<0&&(r=o,n=u,u=c,c=n),e=0;r;)e=(c[--r]=c[r]+u[r]+e)/O|0,c[r]%=O;for(e&&(c.unshift(e),++i),o=c.length;0==c[--o];)c.pop();return t.d=c,t.e=C(c,i),p?M(t,a,l):t},D.precision=D.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(b+t);return n.d?(e=j(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},D.round=function(){var t=this,e=t.constructor;return M(new e(t),t.e+1,e.rounding)},D.sine=D.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Z(t,2,e,e);n=(n=1.4*Math.sqrt(i))>16?16:0|n,e=Z(t,2,e=e.times(1/J(5,n)),e);for(var r,s=new t(5),o=new t(16),a=new t(20);n--;)r=e.times(e),e=e.times(s.plus(r.times(o.times(r).minus(a))));return e}(i,X(i,n)),i.precision=t,i.rounding=e,M(a>2?n.neg():n,t,e,!0)):new i(NaN)},D.squareRoot=D.sqrt=function(){var t,e,n,i,r,s,o=this,a=o.d,l=o.e,c=o.s,u=o.constructor;if(1!==c||!a||!a[0])return new u(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);for(p=!1,0==(c=Math.sqrt(+o))||c==1/0?(((e=B(a)).length+l)%2==0&&(e+="0"),c=Math.sqrt(e),l=w((l+1)/2)-(l<0||l%2),i=new u(e=c==1/0?"5e"+l:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+l)):i=new u(c.toString()),n=(l=u.precision)+3;;)if(i=(s=i).plus(x(o,s,n+2,1)).times(.5),B(s.d).slice(0,n)===(e=B(i.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(M(i,l+1,1),t=!i.times(i).eq(o));break}if(!r&&(M(s,l+1,0),s.times(s).eq(o))){i=s;break}n+=4,r=1}return p=!0,M(i,l,u.rounding,t)},D.tangent=D.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,(n=n.sin()).s=1,n=x(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,M(2==a||4==a?n.neg():n,t,e,!0)):new i(NaN)},D.times=D.mul=function(t){var e,n,i,r,s,o,a,l,c,u=this,h=u.constructor,d=u.d,f=(t=new h(t)).d;if(t.s*=u.s,!(d&&d[0]&&f&&f[0]))return new h(!t.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*t.s:t.s/0);for(n=w(u.e/7)+w(t.e/7),(l=d.length)<(c=f.length)&&(s=d,d=f,f=s,o=l,l=c,c=o),s=[],i=o=l+c;i--;)s.push(0);for(i=c;--i>=0;){for(e=0,r=l+i;r>i;)a=s[r]+f[i]*d[r-i-1]+e,s[r--]=a%O|0,e=a/O|0;s[r]=(s[r]+e)%O|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=C(s,n),p?M(t,h.precision,h.rounding):t},D.toBinary=function(t,e){return Q(this,2,t,e)},D.toDecimalPlaces=D.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),void 0===t?n:(F(t,0,c),void 0===e?e=i.rounding:F(e,0,8),M(n,t+n.e+1,e))},D.toExponential=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=R(i,!0):(F(t,0,c),void 0===e?e=r.rounding:F(e,0,8),n=R(i=M(new r(i),t+1,e),!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n},D.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return void 0===t?n=R(r):(F(t,0,c),void 0===e?e=s.rounding:F(e,0,8),n=R(i=M(new s(r),t+r.e+1,e),!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},D.toFraction=function(t){var e,n,i,r,s,o,a,l,c,u,h,d,f=this,y=f.d,m=f.constructor;if(!y)return new m(f);if(c=n=new m(1),i=l=new m(0),o=(s=(e=new m(i)).e=j(y)-f.e-1)%7,e.d[0]=_(10,o<0?7+o:o),null==t)t=s>0?e:c;else{if(!(a=new m(t)).isInt()||a.lt(c))throw Error(b+a);t=a.gt(e)?s>0?e:c:a}for(p=!1,a=new m(B(y)),u=m.precision,m.precision=s=7*y.length*2;h=x(a,e,0,1,1),1!=(r=n.plus(h.times(i))).cmp(t);)n=i,i=r,r=c,c=l.plus(h.times(r)),l=r,r=e,e=a.minus(h.times(r)),a=r;return r=x(t.minus(n),i,0,1,1),l=l.plus(r.times(c)),n=n.plus(r.times(i)),l.s=c.s=f.s,d=x(c,i,s,1).minus(f).abs().cmp(x(l,n,s,1).minus(f).abs())<1?[c,i]:[l,n],m.precision=u,p=!0,d},D.toHexadecimal=D.toHex=function(t,e){return Q(this,16,t,e)},D.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),null==t){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:F(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(p=!1,n=x(n,t,0,e,1).times(t),p=!0,M(n)):(t.s=n.s,n=t),n},D.toNumber=function(){return+this},D.toOctal=function(t,e){return Q(this,8,t,e)},D.toPower=D.pow=function(t){var e,n,i,r,s,o,a=this,l=a.constructor,c=+(t=new l(t));if(!(a.d&&t.d&&a.d[0]&&t.d[0]))return new l(_(+a,c));if((a=new l(a)).eq(1))return a;if(i=l.precision,s=l.rounding,t.eq(1))return M(a,i,s);if((e=w(t.e/7))>=t.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return r=$(l,a,n,i),t.s<0?new l(1).div(r):M(r,i,s);if((o=a.s)<0){if(e<t.d.length-1)return new l(NaN);if(0==(1&t.d[e])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(e=0!=(n=_(+a,c))&&isFinite(n)?new l(n+"").e:w(c*(Math.log("0."+B(a.d))/Math.LN10+a.e+1)))>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(p=!1,l.rounding=a.s=1,n=Math.min(12,(e+"").length),(r=Y(t.times(K(a,i+n)),i)).d&&U((r=M(r,i+5,1)).d,i,s)&&(e=i+10,+B((r=M(Y(t.times(K(a,e+n)),e),e+5,1)).d).slice(i+1,i+15)+1==1e14&&(r=M(r,i+1,0))),r.s=o,p=!0,l.rounding=s,M(r,i,s))},D.toPrecision=function(t,e){var n,i=this,r=i.constructor;return void 0===t?n=R(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(F(t,1,c),void 0===e?e=r.rounding:F(e,0,8),n=R(i=M(new r(i),t,e),t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n},D.toSignificantDigits=D.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(F(t,1,c),void 0===e?e=n.rounding:F(e,0,8)),M(new n(this),t,e)},D.toString=function(){var t=this,e=t.constructor,n=R(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},D.truncated=D.trunc=function(){return M(new this.constructor(this),this.e+1,1)},D.valueOf=D.toJSON=function(){var t=this,e=t.constructor,n=R(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var x=function(){function t(t,e,n){var i,r=0,s=t.length;for(t=t.slice();s--;)i=t[s]*e+r,t[s]=i%n|0,r=i/n|0;return r&&t.unshift(r),t}function e(t,e,n,i){var r,s;if(n!=i)s=n>i?1:-1;else for(r=s=0;r<n;r++)if(t[r]!=e[r]){s=t[r]>e[r]?1:-1;break}return s}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(i,r,s,a,l,c){var u,h,d,f,p,y,b,m,g,v,_,I,T,S,N,A,E,D,B,F,U=i.constructor,L=i.s==r.s?1:-1,x=i.d,R=r.d;if(!(x&&x[0]&&R&&R[0]))return new U(i.s&&r.s&&(x?!R||x[0]!=R[0]:R)?x&&0==x[0]||!R?0*L:L/0:NaN);for(c?(p=1,h=i.e-r.e):(c=O,p=7,h=w(i.e/p)-w(r.e/p)),B=R.length,E=x.length,v=(g=new U(L)).d=[],d=0;R[d]==(x[d]||0);d++);if(R[d]>(x[d]||0)&&h--,null==s?(S=s=U.precision,a=U.rounding):S=l?s+(i.e-r.e)+1:s,S<0)v.push(1),y=!0;else{if(S=S/p+2|0,d=0,1==B){for(f=0,R=R[0],S++;(d<E||f)&&S--;d++)N=f*c+(x[d]||0),v[d]=N/R|0,f=N%R|0;y=f||d<E}else{for((f=c/(R[0]+1)|0)>1&&(R=t(R,f,c),x=t(x,f,c),B=R.length,E=x.length),A=B,I=(_=x.slice(0,B)).length;I<B;)_[I++]=0;(F=R.slice()).unshift(0),D=R[0],R[1]>=c/2&&++D;do{f=0,(u=e(R,_,B,I))<0?(T=_[0],B!=I&&(T=T*c+(_[1]||0)),(f=T/D|0)>1?(f>=c&&(f=c-1),1==(u=e(b=t(R,f,c),_,m=b.length,I=_.length))&&(f--,n(b,B<m?F:R,m,c))):(0==f&&(u=f=1),b=R.slice()),(m=b.length)<I&&b.unshift(0),n(_,b,I,c),-1==u&&(u=e(R,_,B,I=_.length))<1&&(f++,n(_,B<I?F:R,I,c)),I=_.length):0===u&&(f++,_=[0]),v[d++]=f,u&&_[0]?_[I++]=x[A]||0:(_=[x[A]],I=1)}while((A++<E||void 0!==_[0])&&S--);y=void 0!==_[0]}v[0]||v.shift()}if(1==p)g.e=h,o=y;else{for(d=1,f=v[0];f>=10;f/=10)d++;g.e=d+h*p-1,M(g,l?s+g.e+1:s,a,y)}return g}}();function M(t,e,n,i){var r,s,o,a,l,c,u,h,d,f=t.constructor;t:if(null!=e){if(!(h=t.d))return t;for(r=1,a=h[0];a>=10;a/=10)r++;if((s=e-r)<0)s+=7,o=e,l=(u=h[d=0])/_(10,r-o-1)%10|0;else if((d=Math.ceil((s+1)/7))>=(a=h.length)){if(!i)break t;for(;a++<=d;)h.push(0);u=l=0,r=1,o=(s%=7)-7+1}else{for(u=a=h[d],r=1;a>=10;a/=10)r++;l=(o=(s%=7)-7+r)<0?0:u/_(10,r-o-1)%10|0}if(i=i||e<0||void 0!==h[d+1]||(o<0?u:u%_(10,r-o-1)),c=n<4?(l||i)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||i||6==n&&(s>0?o>0?u/_(10,r-o):0:h[d-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,c?(e-=t.e+1,h[0]=_(10,(7-e%7)%7),t.e=-e||0):h[0]=t.e=0,t;if(0==s?(h.length=d,a=1,d--):(h.length=d+1,a=_(10,7-s),h[d]=o>0?(u/_(10,r-o)%_(10,o)|0)*a:0),c)for(;;){if(0==d){for(s=1,o=h[0];o>=10;o/=10)s++;for(o=h[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(t.e++,h[0]==O&&(h[0]=1));break}if(h[d]+=a,h[d]!=O)break;h[d--]=0,a=1}for(s=h.length;0===h[--s];)h.pop()}return p&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function R(t,e,n){if(!t.isFinite())return H(t);var i,r=t.e,s=B(t.d),o=s.length;return e?(n&&(i=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+P(i):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):r<0?(s="0."+P(-r-1)+s,n&&(i=n-o)>0&&(s+=P(i))):r>=o?(s+=P(r+1-o),n&&(i=n-r-1)>0&&(s=s+"."+P(i))):((i=r+1)<o&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-o)>0&&(r+1===o&&(s+="."),s+=P(i))),s}function C(t,e){var n=t[0];for(e*=7;n>=10;n/=10)e++;return e}function k(t,e,n){if(e>A)throw p=!0,n&&(t.precision=n),Error(m);return M(new t(h),e,1,!0)}function V(t,e,n){if(e>E)throw Error(m);return M(new t(d),e,n,!0)}function j(t){var e=t.length-1,n=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function P(t){for(var e="";t--;)e+="0";return e}function $(t,e,n,i){var r,s=new t(1),o=Math.ceil(i/7+4);for(p=!1;;){if(n%2&&tt((s=s.times(e)).d,o)&&(r=!0),0===(n=w(n/2))){n=s.d.length-1,r&&0===s.d[n]&&++s.d[n];break}tt((e=e.times(e)).d,o)}return p=!0,s}function z(t){return 1&t.d[t.d.length-1]}function W(t,e,n){for(var i,r=new t(e[0]),s=0;++s<e.length;){if(!(i=new t(e[s])).s){r=i;break}r[n](i)&&(r=i)}return r}function Y(t,e){var n,i,r,s,o,a,l,c=0,u=0,h=0,d=t.constructor,f=d.rounding,y=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(p=!1,l=y):l=e,a=new d(.03125);t.e>-2;)t=t.times(a),h+=5;for(l+=i=Math.log(_(2,h))/Math.LN10*2+5|0,n=s=o=new d(1),d.precision=l;;){if(s=M(s.times(t),l,1),n=n.times(++u),B((a=o.plus(x(s,n,l,1))).d).slice(0,l)===B(o.d).slice(0,l)){for(r=h;r--;)o=M(o.times(o),l,1);if(null!=e)return d.precision=y,o;if(!(c<3&&U(o.d,l-i,f,c)))return M(o,d.precision=y,f,p=!0);d.precision=l+=10,n=s=a=new d(1),u=0,c++}o=a}}function K(t,e){var n,i,r,s,o,a,l,c,u,h,d,f=1,y=t,b=y.d,m=y.constructor,g=m.rounding,v=m.precision;if(y.s<0||!b||!b[0]||!y.e&&1==b[0]&&1==b.length)return new m(b&&!b[0]?-1/0:1!=y.s?NaN:b?0:y);if(null==e?(p=!1,u=v):u=e,m.precision=u+=10,i=(n=B(b)).charAt(0),!(Math.abs(s=y.e)<15e14))return c=k(m,u+2,v).times(s+""),y=K(new m(i+"."+n.slice(1)),u-10).plus(c),m.precision=v,null==e?M(y,v,g,p=!0):y;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=B((y=y.times(t)).d)).charAt(0),f++;for(s=y.e,i>1?(y=new m("0."+n),s++):y=new m(i+"."+n.slice(1)),h=y,l=o=y=x(y.minus(1),y.plus(1),u,1),d=M(y.times(y),u,1),r=3;;){if(o=M(o.times(d),u,1),B((c=l.plus(x(o,new m(r),u,1))).d).slice(0,u)===B(l.d).slice(0,u)){if(l=l.times(2),0!==s&&(l=l.plus(k(m,u+2,v).times(s+""))),l=x(l,new m(f),u,1),null!=e)return m.precision=v,l;if(!U(l.d,u-10,g,a))return M(l,m.precision=v,g,p=!0);m.precision=u+=10,c=o=y=x(h.minus(1),h.plus(1),u,1),d=M(y.times(y),u,1),r=a=1}l=c,r+=2}}function H(t){return String(t.s*t.s/0)}function G(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;48===e.charCodeAt(i);i++);for(r=e.length;48===e.charCodeAt(r-1);--r);if(e=e.slice(i,r)){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=7;i<r;)t.d.push(+e.slice(i,i+=7));i=7-(e=e.slice(i)).length}else i-=r;for(;i--;)e+="0";t.d.push(+e),p&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function q(t,e){var n,i,r,o,a,l,c,u,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),N.test(e))return G(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(T.test(e))n=16,e=e.toLowerCase();else if(I.test(e))n=2;else{if(!S.test(e))throw Error(b+e);n=8}for((o=e.search(/p/i))>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,i=t.constructor,a&&(o=(l=(e=e.replace(".","")).length)-o,r=$(i,new i(n),o,2*o)),o=h=(u=L(e,n,O)).length-1;0===u[o];--o)u.pop();return o<0?new i(0*t.s):(t.e=C(u,h),t.d=u,p=!1,a&&(t=x(t,r,4*l)),c&&(t=t.times(Math.abs(c)<54?_(2,c):s.pow(2,c))),p=!0,t)}function Z(t,e,n,i,r){var s,o,a,l,c=t.precision,u=Math.ceil(c/7);for(p=!1,l=n.times(n),a=new t(i);;){if(o=x(a.times(l),new t(e++*e++),c,1),a=r?i.plus(o):i.minus(o),i=x(o.times(l),new t(e++*e++),c,1),void 0!==(o=a.plus(i)).d[u]){for(s=u;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=i,i=o,o=s}return p=!0,o.d.length=u+1,o}function J(t,e){for(var n=t;--e;)n*=t;return n}function X(t,e){var n,i=e.s<0,r=V(t,t.precision,1),s=r.times(.5);if((e=e.abs()).lte(s))return a=i?4:1,e;if((n=e.divToInt(r)).isZero())a=i?3:2;else{if((e=e.minus(n.times(r))).lte(s))return a=z(n)?i?2:3:i?4:1,e;a=z(n)?i?1:4:i?3:2}return e.minus(r).abs()}function Q(t,e,n,i){var r,s,a,l,h,d,f,p,y,b=t.constructor,m=void 0!==n;if(m?(F(n,1,c),void 0===i?i=b.rounding:F(i,0,8)):(n=b.precision,i=b.rounding),t.isFinite()){for(m?(r=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):r=e,(a=(f=R(t)).indexOf("."))>=0&&(f=f.replace(".",""),(y=new b(1)).e=f.length-a,y.d=L(R(y),10,r),y.e=y.d.length),s=h=(p=L(f,10,r)).length;0==p[--h];)p.pop();if(p[0]){if(a<0?s--:((t=new b(t)).d=p,t.e=s,p=(t=x(t,y,n,i,0,r)).d,s=t.e,d=o),a=p[n],l=r/2,d=d||void 0!==p[n+1],d=i<4?(void 0!==a||d)&&(0===i||i===(t.s<0?3:2)):a>l||a===l&&(4===i||d||6===i&&1&p[n-1]||i===(t.s<0?8:7)),p.length=n,d)for(;++p[--n]>r-1;)p[n]=0,n||(++s,p.unshift(1));for(h=p.length;!p[h-1];--h);for(a=0,f="";a<h;a++)f+=u.charAt(p[a]);if(m){if(h>1)if(16==e||8==e){for(a=16==e?4:3,--h;h%a;h++)f+="0";for(h=(p=L(f,r,e)).length;!p[h-1];--h);for(a=1,f="1.";a<h;a++)f+=u.charAt(p[a])}else f=f.charAt(0)+"."+f.slice(1);f=f+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)f="0"+f;f="0."+f}else if(++s>h)for(s-=h;s--;)f+="0";else s<h&&(f=f.slice(0,s)+"."+f.slice(s))}else f=m?"0p+0":"0";f=(16==e?"0x":2==e?"0b":8==e?"0o":"")+f}else f=H(t);return t.s<0?"-"+f:f}function tt(t,e){if(t.length>e)return t.length=e,!0}function et(t){return new this(t).abs()}function nt(t){return new this(t).acos()}function it(t){return new this(t).acosh()}function rt(t,e){return new this(t).plus(e)}function st(t){return new this(t).asin()}function ot(t){return new this(t).asinh()}function at(t){return new this(t).atan()}function lt(t){return new this(t).atanh()}function ct(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,s=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?V(this,i,r):new this(0)).s=t.s:!t.d||e.isZero()?(n=V(this,s,1).times(.5)).s=t.s:e.s<0?(this.precision=s,this.rounding=1,n=this.atan(x(t,e,s,1)),e=V(this,s,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(x(t,e,s,1)):(n=V(this,s,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function ut(t){return new this(t).cbrt()}function ht(t){return M(t=new this(t),t.e+1,2)}function dt(t,e,n){return new this(t).clamp(e,n)}function ft(t){if(!t||"object"!=typeof t)throw Error(y+"Object expected");var e,n,i,r=!0===t.defaults,s=["precision",1,c,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],r&&(this[n]=f[n]),void 0!==(i=t[n])){if(!(w(i)===i&&i>=s[e+1]&&i<=s[e+2]))throw Error(b+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=f[n]),void 0!==(i=t[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(b+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(g);this[n]=!0}else this[n]=!1}return this}function pt(t){return new this(t).cos()}function yt(t){return new this(t).cosh()}function bt(t,e){return new this(t).div(e)}function mt(t){return new this(t).exp()}function gt(t){return M(t=new this(t),t.e+1,3)}function vt(){var t,e,n=new this(0);for(p=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return p=!0,new this(1/0);n=e}return p=!0,n.sqrt()}function wt(t){return t instanceof s||t&&t.toStringTag===v||!1}function _t(t){return new this(t).ln()}function It(t,e){return new this(t).log(e)}function Tt(t){return new this(t).log(2)}function St(t){return new this(t).log(10)}function Nt(){return W(this,arguments,"lt")}function Ot(){return W(this,arguments,"gt")}function At(t,e){return new this(t).mod(e)}function Et(t,e){return new this(t).mul(e)}function Dt(t,e){return new this(t).pow(e)}function Bt(t){var e,n,i,r,s=0,o=new this(1),a=[];if(void 0===t?t=this.precision:F(t,1,c),i=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));s<i;)(r=e[s])>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=r%1e7;else{if(!crypto.randomBytes)throw Error(g);for(e=crypto.randomBytes(i*=4);s<i;)(r=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((127&e[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(r%1e7),s+=4);s=i/4}else for(;s<i;)a[s++]=1e7*Math.random()|0;for(t%=7,(i=a[--s])&&t&&(r=_(10,7-t),a[s]=(i/r|0)*r);0===a[s];s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<7&&(n-=7-i)}return o.e=n,o.d=a,o}function Ft(t){return M(t=new this(t),t.e+1,this.rounding)}function Ut(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Lt(t){return new this(t).sin()}function xt(t){return new this(t).sinh()}function Mt(t){return new this(t).sqrt()}function Rt(t,e){return new this(t).sub(e)}function Ct(){var t=0,e=arguments,n=new this(e[t]);for(p=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return p=!0,M(n,this.precision,this.rounding)}function kt(t){return new this(t).tan()}function Vt(t){return new this(t).tanh()}function jt(t){return M(t=new this(t),t.e+1,1)}(s=function t(e){var n,i,r;function s(t){var e,n,i,r=this;if(!(r instanceof s))return new s(t);if(r.constructor=s,wt(t))return r.s=t.s,void(p?!t.d||t.e>s.maxE?(r.e=NaN,r.d=null):t.e<s.minE?(r.e=0,r.d=[0]):(r.e=t.e,r.d=t.d.slice()):(r.e=t.e,r.d=t.d?t.d.slice():t.d));if("number"==(i=typeof t)){if(0===t)return r.s=1/t<0?-1:1,r.e=0,void(r.d=[0]);if(t<0?(t=-t,r.s=-1):r.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(p?e>s.maxE?(r.e=NaN,r.d=null):e<s.minE?(r.e=0,r.d=[0]):(r.e=e,r.d=[t]):(r.e=e,r.d=[t]))}return 0*t!=0?(t||(r.s=NaN),r.e=NaN,void(r.d=null)):G(r,t.toString())}if("string"!==i)throw Error(b+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),r.s=-1):(43===n&&(t=t.slice(1)),r.s=1),N.test(t)?G(r,t):q(r,t)}if(s.prototype=D,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=ft,s.clone=t,s.isDecimal=wt,s.abs=et,s.acos=nt,s.acosh=it,s.add=rt,s.asin=st,s.asinh=ot,s.atan=at,s.atanh=lt,s.atan2=ct,s.cbrt=ut,s.ceil=ht,s.clamp=dt,s.cos=pt,s.cosh=yt,s.div=bt,s.exp=mt,s.floor=gt,s.hypot=vt,s.ln=_t,s.log=It,s.log10=St,s.log2=Tt,s.max=Nt,s.min=Ot,s.mod=At,s.mul=Et,s.pow=Dt,s.random=Bt,s.round=Ft,s.sign=Ut,s.sin=Lt,s.sinh=xt,s.sqrt=Mt,s.sub=Rt,s.sum=Ct,s.tan=kt,s.tanh=Vt,s.trunc=jt,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)e.hasOwnProperty(i=r[n++])||(e[i]=this[i]);return s.config(e),s}(f)).prototype.constructor=s,s.default=s.Decimal=s,h=new s(h),d=new s(d),void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()},20:t=>{var e="%[a-f0-9]{2}",n=new RegExp(e,"gi"),i=new RegExp("("+e+")+","gi");function r(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],r(n),r(i))}function s(t){try{return decodeURIComponent(t)}catch(s){for(var e=t.match(n),i=1;i<e.length;i++)e=(t=r(e,i).join("")).match(n);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=s(n[0]);r!==n[0]&&(e[n[0]]=r)}n=i.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];t=t.replace(new RegExp(l,"g"),e[l])}return t}(t)}}},806:t=>{t.exports=function(t,e){for(var n={},i=Object.keys(t),r=Array.isArray(e),s=0;s<i.length;s++){var o=i[s],a=t[o];(r?-1!==e.indexOf(o):e(o,a,t))&&(n[o]=a)}return n}},563:(t,e,n)=>{const i=n(610),r=n(20),s=n(500),o=n(806),a=Symbol("encodeFragmentIdentifier");function l(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?i(t):encodeURIComponent(t):t}function u(t,e){return e.decode?r(t):t}function h(t){return Array.isArray(t)?t.sort():"object"==typeof t?h(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function d(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function f(t){const e=(t=d(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function p(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function y(t,e){l((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,i)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===i[t]&&(i[t]={}),i[t][e[1]]=n):i[t]=n};case"bracket":return(t,n,i)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==i[t]?i[t]=[].concat(i[t],n):i[t]=[n]:i[t]=n};case"colon-list-separator":return(t,n,i)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==i[t]?i[t]=[].concat(i[t],n):i[t]=[n]:i[t]=n};case"comma":case"separator":return(e,n,i)=>{const r="string"==typeof n&&n.includes(t.arrayFormatSeparator),s="string"==typeof n&&!r&&u(n,t).includes(t.arrayFormatSeparator);n=s?u(n,t):n;const o=r||s?n.split(t.arrayFormatSeparator).map((e=>u(e,t))):null===n?n:u(n,t);i[e]=o};case"bracket-separator":return(e,n,i)=>{const r=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!r)return void(i[e]=n?u(n,t):n);const s=null===n?[]:n.split(t.arrayFormatSeparator).map((e=>u(e,t)));void 0!==i[e]?i[e]=[].concat(i[e],s):i[e]=s};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),i=Object.create(null);if("string"!=typeof t)return i;if(!(t=t.trim().replace(/^[?#&]/,"")))return i;for(const r of t.split("&")){if(""===r)continue;let[t,o]=s(e.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:u(o,e),n(u(t,e),o,i)}for(const t of Object.keys(i)){const n=i[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=p(n[t],e);else i[t]=p(n,e)}return!1===e.sort?i:(!0===e.sort?Object.keys(i).sort():Object.keys(i).sort(e.sort)).reduce(((t,e)=>{const n=i[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=h(n):t[e]=n,t}),Object.create(null))}e.extract=f,e.parse=y,e.stringify=(t,e)=>{if(!t)return"";l((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&null==t[n]||e.skipEmptyString&&""===t[n],i=function(t){switch(t.arrayFormat){case"index":return e=>(n,i)=>{const r=n.length;return void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?n:null===i?[...n,[c(e,t),"[",r,"]"].join("")]:[...n,[c(e,t),"[",c(r,t),"]=",c(i,t)].join("")]};case"bracket":return e=>(n,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?n:null===i?[...n,[c(e,t),"[]"].join("")]:[...n,[c(e,t),"[]=",c(i,t)].join("")];case"colon-list-separator":return e=>(n,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?n:null===i?[...n,[c(e,t),":list="].join("")]:[...n,[c(e,t),":list=",c(i,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(i,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?i:(r=null===r?"":r,0===i.length?[[c(n,t),e,c(r,t)].join("")]:[[i,c(r,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?n:null===i?[...n,c(e,t)]:[...n,[c(e,t),"=",c(i,t)].join("")]}}(e),r={};for(const e of Object.keys(t))n(e)||(r[e]=t[e]);const s=Object.keys(r);return!1!==e.sort&&s.sort(e.sort),s.map((n=>{const r=t[n];return void 0===r?"":null===r?c(n,e):Array.isArray(r)?0===r.length&&"bracket-separator"===e.arrayFormat?c(n,e)+"[]":r.reduce(i(n),[]).join("&"):c(n,e)+"="+c(r,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,i]=s(t,"#");return Object.assign({url:n.split("?")[0]||"",query:y(f(t),e)},e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:u(i,e)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const i=d(t.url).split("?")[0]||"",r=e.extract(t.url),s=e.parse(r,{sort:!1}),o=Object.assign(s,t.query);let l=e.stringify(o,n);l&&(l=`?${l}`);let u=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(u=`#${n[a]?c(t.fragmentIdentifier,n):t.fragmentIdentifier}`),`${i}${l}${u}`},e.pick=(t,n,i)=>{i=Object.assign({parseFragmentIdentifier:!0,[a]:!1},i);const{url:r,query:s,fragmentIdentifier:l}=e.parseUrl(t,i);return e.stringifyUrl({url:r,query:o(s,n),fragmentIdentifier:l},i)},e.exclude=(t,n,i)=>{const r=Array.isArray(n)?t=>!n.includes(t):(t,e)=>!n(t,e);return e.pick(t,r,i)}},51:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.wcswidth=e.wcwidth=void 0;const r=i(n(373));e.wcswidth=r.default;const s=i(n(482));e.wcwidth=s.default},602:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e,n)=>{let i,r=0,s=n;if(t<e[0].first||t>e[s].last)return 0;for(;s>=r;)if(i=Math.floor((r+s)/2),t>e[i].last)r=i+1;else{if(!(t<e[i].first))return 1;s=i-1}return 0}},38:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{first:768,last:879},{first:1155,last:1158},{first:1160,last:1161},{first:1425,last:1469},{first:1471,last:1471},{first:1473,last:1474},{first:1476,last:1477},{first:1479,last:1479},{first:1536,last:1539},{first:1552,last:1557},{first:1611,last:1630},{first:1648,last:1648},{first:1750,last:1764},{first:1767,last:1768},{first:1770,last:1773},{first:1807,last:1807},{first:1809,last:1809},{first:1840,last:1866},{first:1958,last:1968},{first:2027,last:2035},{first:2305,last:2306},{first:2364,last:2364},{first:2369,last:2376},{first:2381,last:2381},{first:2385,last:2388},{first:2402,last:2403},{first:2433,last:2433},{first:2492,last:2492},{first:2497,last:2500},{first:2509,last:2509},{first:2530,last:2531},{first:2561,last:2562},{first:2620,last:2620},{first:2625,last:2626},{first:2631,last:2632},{first:2635,last:2637},{first:2672,last:2673},{first:2689,last:2690},{first:2748,last:2748},{first:2753,last:2757},{first:2759,last:2760},{first:2765,last:2765},{first:2786,last:2787},{first:2817,last:2817},{first:2876,last:2876},{first:2879,last:2879},{first:2881,last:2883},{first:2893,last:2893},{first:2902,last:2902},{first:2946,last:2946},{first:3008,last:3008},{first:3021,last:3021},{first:3134,last:3136},{first:3142,last:3144},{first:3146,last:3149},{first:3157,last:3158},{first:3260,last:3260},{first:3263,last:3263},{first:3270,last:3270},{first:3276,last:3277},{first:3298,last:3299},{first:3393,last:3395},{first:3405,last:3405},{first:3530,last:3530},{first:3538,last:3540},{first:3542,last:3542},{first:3633,last:3633},{first:3636,last:3642},{first:3655,last:3662},{first:3761,last:3761},{first:3764,last:3769},{first:3771,last:3772},{first:3784,last:3789},{first:3864,last:3865},{first:3893,last:3893},{first:3895,last:3895},{first:3897,last:3897},{first:3953,last:3966},{first:3968,last:3972},{first:3974,last:3975},{first:3984,last:3991},{first:3993,last:4028},{first:4038,last:4038},{first:4141,last:4144},{first:4146,last:4146},{first:4150,last:4151},{first:4153,last:4153},{first:4184,last:4185},{first:4448,last:4607},{first:4959,last:4959},{first:5906,last:5908},{first:5938,last:5940},{first:5970,last:5971},{first:6002,last:6003},{first:6068,last:6069},{first:6071,last:6077},{first:6086,last:6086},{first:6089,last:6099},{first:6109,last:6109},{first:6155,last:6157},{first:6313,last:6313},{first:6432,last:6434},{first:6439,last:6440},{first:6450,last:6450},{first:6457,last:6459},{first:6679,last:6680},{first:6912,last:6915},{first:6964,last:6964},{first:6966,last:6970},{first:6972,last:6972},{first:6978,last:6978},{first:7019,last:7027},{first:7616,last:7626},{first:7678,last:7679},{first:8203,last:8207},{first:8234,last:8238},{first:8288,last:8291},{first:8298,last:8303},{first:8400,last:8431},{first:12330,last:12335},{first:12441,last:12442},{first:43014,last:43014},{first:43019,last:43019},{first:43045,last:43046},{first:64286,last:64286},{first:65024,last:65039},{first:65056,last:65059},{first:65279,last:65279},{first:65529,last:65531},{first:68097,last:68099},{first:68101,last:68102},{first:68108,last:68111},{first:68152,last:68154},{first:68159,last:68159},{first:119143,last:119145},{first:119155,last:119170},{first:119173,last:119179},{first:119210,last:119213},{first:119362,last:119364},{first:917505,last:917505},{first:917536,last:917631},{first:917760,last:917999}]},373:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(482));e.default=t=>{let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n),s=r.default(i);if(s<0)return-1;e+=s}return e}},482:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(38)),s=i(n(602));e.default=t=>0===t?0:t<32||t>=127&&t<160?-1:s.default(t,r.default,r.default.length-1)?0:1+Number(t>=4352&&(t<=4447||9001===t||9002===t||t>=11904&&t<=42191&&12351!==t||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65135||t>=65280&&t<=65376||t>=65504&&t<=65510||t>=131072&&t<=196605||t>=196608&&t<=262141))},500:t=>{t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},610:t=>{t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};(()=>{n.d(i,{MS:()=>r,KU:()=>Ta,vD:()=>Da,Hh:()=>Xo,cN:()=>Oa,hi:()=>Sa,mT:()=>ra,Gj:()=>sa,$5:()=>Aa,hY:()=>Yo,ZV:()=>ta,y3:()=>Na,MX:()=>Wo,Bm:()=>Zo,vv:()=>Go,oj:()=>Ho,Am:()=>Qo,TR:()=>qo,Q_:()=>Ko,uU:()=>ea,WG:()=>Ka,C7:()=>ia,qw:()=>s,pF:()=>na,i4:()=>va,J0:()=>ga,q4:()=>o,Ge:()=>Jo,Ai:()=>Pa,UZ:()=>$a,sK:()=>Va,xe:()=>ja,up:()=>Ya});const t=()=>{};var e=n(563);class r extends Error{message;status;details;response;constructor(t,e="",n="",i){super(t),this.message=t,this.status=e,this.details=n,this.response=i,this.name="ApiError"}toString(){return`${this.status}: ${this.message}\n${this.details}`}}class s extends Error{message;result;response;constructor(t,e){const n="Transaction error. See transaction result";super(n),this.name="TransactionError",this.message=n,this.response=e,this.result=t}toString(){return`${this.message}:\n ${JSON.stringify(this.result,void 0,2)}`}}const o="0.7.0",a="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;function l(t,e){const n=`rai-sdk-javascript/${o}`,i={Accept:"application/json","Content-type":"application/json"};if(a){const t=new URL(e);i.Host=t.hostname,i["User-agent"]=n}return{...i,...t}}async function c(n,i={}){const o={method:i.method||"GET",body:JSON.stringify(i.body),headers:l(i.headers,n)};"undefined"==typeof window&&(o.highWaterMark=1048576);const a=i.query&&Object.keys(i.query).length>0?`${n}?${(0,e.stringify)(i.query,{arrayFormat:"none"})}`:n,c=globalThis.fetch||t;let u;try{u=await c(a,o)}catch(t){const e=t.message.toLowerCase();if(e.includes("failed to fetch")||e.includes("networkerror when attempting to fetch resource"))throw new Error("Request failed due to a connectivity issue. Please check your network connection.");throw t}const h=u.headers.get("content-type");let d;const f=u.clone();try{d=h&&h.includes("application/json")?await u.json():h&&h.includes("application/x-protobuf")?await u.blob():h?.includes("multipart/form-data")&&u.body?await async function(t){const e=await t.formData(),n=[];for(const t of e)n.push({name:t[0],file:t[1]});return n}(u):await u.text()}catch(t){const e=new Error("Failed to read server response.");throw e.cause=t,e}if(i.onResponse)try{i.onResponse(f.clone())}catch{}if(u.ok)return d;throw function(t,e){return"TransactionResult"===t?.type?new s(t,e):new r(t?.message||e.statusText||e.status,t?.status||e.status,t?.details,e)}(d,f.clone())}class u{config;region;baseUrl;_onResponse;constructor(t,e="us-east"){var n,i,r;this.config=t,this.region=e,this.baseUrl=(n=t.scheme,i=t.host,r=t.port,`${n=n.replace(/[^A-Za-z]/,"")}://${i}${r?":"+r:""}`)}onResponse(t){this._onResponse=t}async request(t,e={}){const n=`${this.baseUrl}/${t}`,i=await this.config.credentials.getToken(n),r={...e,onResponse:this._onResponse};return i&&(r.headers={authorization:`Bearer ${i}`,...r.headers}),await c(n,r)}async get(t,e={}){return this.request(t,{query:e,method:"GET"})}async post(t,e){return this.request(t,{method:"POST",...e})}async put(t,e){return this.request(t,{method:"PUT",...e})}async patch(t,e){return this.request(t,{method:"PATCH",...e})}async delete(t,e){return this.request(t,{...e,method:"DELETE"})}}const h="database";function d(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))}function f(t){return this instanceof f?(this.v=t,this):new f(t)}function p(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{(n=r[t](e)).value instanceof f?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(t){u(s[0][3],t)}var n}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function y(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:f(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}var m,g,v,w,_,I,T,S,N,O,A,E,D;function B(t){if(null===t)return"null";if(void 0===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map((t=>B(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}Object.create,Object.create,function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(m||(m={})),(D=g||(g={}))[D.Sparse=0]="Sparse",D[D.Dense=1]="Dense",function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(v||(v={})),(E=w||(w={}))[E.DAY=0]="DAY",E[E.MILLISECOND=1]="MILLISECOND",(A=_||(_={}))[A.SECOND=0]="SECOND",A[A.MILLISECOND=1]="MILLISECOND",A[A.MICROSECOND=2]="MICROSECOND",A[A.NANOSECOND=3]="NANOSECOND",(O=I||(I={}))[O.YEAR_MONTH=0]="YEAR_MONTH",O[O.DAY_TIME=1]="DAY_TIME",O[O.MONTH_DAY_NANO=2]="MONTH_DAY_NANO",function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(T||(T={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(S||(S={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(N||(N={}));const F=new TextDecoder("utf-8"),U=t=>F.decode(t),L=new TextEncoder,x=t=>L.encode(t),[M,R]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[C,k]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[V,j]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),P=t=>"function"==typeof t,$=t=>null!=t&&Object(t)===t,z=t=>$(t)&&P(t.then),W=t=>$(t)&&P(t[Symbol.iterator]),Y=t=>$(t)&&P(t[Symbol.asyncIterator]),K=t=>$(t)&&$(t.schema),H=t=>$(t)&&"done"in t&&"value"in t,G=t=>$(t)&&P(t.stat)&&(t=>"number"==typeof t)(t.fd),q=t=>$(t)&&J(t.body),Z=t=>"_getDOMStream"in t&&"_getNodeStream"in t,J=t=>$(t)&&P(t.cancel)&&P(t.getReader)&&!Z(t),X=t=>$(t)&&P(t.read)&&P(t.pipe)&&(t=>"boolean"==typeof t)(t.readable)&&!Z(t),Q="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function tt(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(o,n),t}function et(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let o,a,l=0,c=0,u=t.length;++l<u;)o=e[c],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset?a&&(e[++c]=a):(({byteOffset:n,byteLength:r}=o),({byteOffset:i,byteLength:s}=a),n+r<i||i+s<n?a&&(e[++c]=a):e[c]=new Uint8Array(o.buffer,n,i-n+s));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,s,o,a=0,l=-1;const c=Math.min(e||Number.POSITIVE_INFINITY,i);for(const t=n.length;++l<t;){if(r=n[l],s=r.subarray(0,Math.min(r.length,c-a)),c<=a+s.length){s.length<r.length?n[l]=r.subarray(s.length):s.length===r.length&&l++,o?tt(o,s,a):o=s;break}tt(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),i-(o?o.byteLength:0)]}function nt(t,e){let n=H(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=x(n)),n instanceof ArrayBuffer||n instanceof Q?new t(n):$(i=n)&&P(i.clear)&&P(i.bytes)&&P(i.position)&&P(i.setPosition)&&P(i.capacity)&&P(i.getBufferIdentifier)&&P(i.createLong)?nt(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0);var i}const it=t=>nt(Int32Array,t),rt=t=>nt(Uint8Array,t),st=t=>(t.next(),t);function ot(t,e){return p(this,arguments,(function*(){if(z(e))return yield f(yield f(yield*y(b(ot(t,yield f(e))))));const n=function(t){return p(this,arguments,(function*(){yield yield f(yield f(t))}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Q?n(e):W(e)?function(t){return p(this,arguments,(function*(){yield f(yield*y(b(st(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):Y(e)?e:n(e);return yield f(yield*y(b(st(function(e){return p(this,arguments,(function*(){let n=null;do{n=yield f(e.next(yield yield f(nt(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield f(new t)}))}const at=t=>ot(Uint8Array,t),lt=Symbol.for("isArrowBigNum");function ct(t,...e){return 0===e.length?Object.setPrototypeOf(nt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function ut(...t){return ct.apply(this,t)}function ht(...t){return ct.apply(this,t)}function dt(...t){return ct.apply(this,t)}function ft(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new V(e,n,i),o=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=o?BigInt(1):BigInt(0),l=BigInt(0);if(o){for(const t of s)a+=~t*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const t of s)a+=t*(BigInt(1)<<BigInt(32)*l++);return a}let pt,yt;function bt(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const o=i.length-1;do{for(n[0]=i[s=0];s<o;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e||"0"}ct.prototype[lt]=!0,ct.prototype.toJSON=function(){return`"${pt(this)}"`},ct.prototype.valueOf=function(){return ft(this)},ct.prototype.toString=function(){return pt(this)},ct.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return ft(this);case"string":return pt(this);case"default":return yt(this)}return pt(this)},Object.setPrototypeOf(ut.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(ht.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(dt.prototype,Object.create(Uint32Array.prototype)),Object.assign(ut.prototype,ct.prototype,{constructor:ut,signed:!0,TypedArray:Int32Array,BigIntArray:C}),Object.assign(ht.prototype,ct.prototype,{constructor:ht,signed:!1,TypedArray:Uint32Array,BigIntArray:V}),Object.assign(dt.prototype,ct.prototype,{constructor:dt,signed:!0,TypedArray:Uint32Array,BigIntArray:V}),R?(yt=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:bt(t),pt=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:bt(t)):(pt=bt,yt=pt);class mt{static new(t,e){switch(e){case!0:return new ut(t);case!1:return new ht(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case C:return new ut(t)}return 16===t.byteLength?new dt(t):new ht(t)}static signed(t){return new ut(t)}static unsigned(t){return new ht(t)}static decimal(t){return new dt(t)}constructor(t,e){return mt.new(t,e)}}var gt,vt,wt,_t,It,Tt,St,Nt,Ot,At,Et,Dt,Bt,Ft,Ut,Lt,xt,Mt,Rt,Ct;class kt{static isNull(t){return(null==t?void 0:t.typeId)===S.Null}static isInt(t){return(null==t?void 0:t.typeId)===S.Int}static isFloat(t){return(null==t?void 0:t.typeId)===S.Float}static isBinary(t){return(null==t?void 0:t.typeId)===S.Binary}static isUtf8(t){return(null==t?void 0:t.typeId)===S.Utf8}static isBool(t){return(null==t?void 0:t.typeId)===S.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===S.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===S.Date}static isTime(t){return(null==t?void 0:t.typeId)===S.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===S.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===S.Interval}static isList(t){return(null==t?void 0:t.typeId)===S.List}static isStruct(t){return(null==t?void 0:t.typeId)===S.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===S.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===S.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===S.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===S.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===S.Dictionary}static isDenseUnion(t){return kt.isUnion(t)&&t.mode===g.Dense}static isSparseUnion(t){return kt.isUnion(t)&&t.mode===g.Sparse}get typeId(){return S.NONE}}gt=Symbol.toStringTag,kt[gt]=((Ct=kt.prototype).children=null,Ct.ArrayType=Array,Ct[Symbol.toStringTag]="DataType");class Vt extends kt{toString(){return"Null"}get typeId(){return S.Null}}vt=Symbol.toStringTag,Vt[vt]=(t=>t[Symbol.toStringTag]="Null")(Vt.prototype);class jt extends kt{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return S.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}wt=Symbol.toStringTag,jt[wt]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(jt.prototype);class Pt extends jt{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends jt{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends jt{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Pt.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends jt{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(class extends jt{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends jt{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends jt{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends jt{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}.prototype,"ArrayType",{value:BigUint64Array});class $t extends kt{constructor(t){super(),this.precision=t}get typeId(){return S.Float}get ArrayType(){switch(this.precision){case v.HALF:return Uint16Array;case v.SINGLE:return Float32Array;case v.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_t=Symbol.toStringTag,$t[_t]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))($t.prototype),Object.defineProperty(class extends $t{constructor(){super(v.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends $t{constructor(){super(v.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends $t{constructor(){super(v.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class zt extends kt{constructor(){super()}get typeId(){return S.Binary}toString(){return"Binary"}}It=Symbol.toStringTag,zt[It]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(zt.prototype);class Wt extends kt{constructor(){super()}get typeId(){return S.Utf8}toString(){return"Utf8"}}Tt=Symbol.toStringTag,Wt[Tt]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Wt.prototype);class Yt extends kt{constructor(){super()}get typeId(){return S.Bool}toString(){return"Bool"}}St=Symbol.toStringTag,Yt[St]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Yt.prototype);class Kt extends kt{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return S.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Nt=Symbol.toStringTag,Kt[Nt]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Kt.prototype);class Ht extends kt{constructor(t){super(),this.unit=t}get typeId(){return S.Date}toString(){return`Date${32*(this.unit+1)}<${w[this.unit]}>`}}Ot=Symbol.toStringTag,Ht[Ot]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Ht.prototype);class Gt extends kt{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return S.Time}toString(){return`Time${this.bitWidth}<${_[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}At=Symbol.toStringTag,Gt[At]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Gt.prototype);class qt extends kt{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return S.Timestamp}toString(){return`Timestamp<${_[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Et=Symbol.toStringTag,qt[Et]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(qt.prototype);class Zt extends kt{constructor(t){super(),this.unit=t}get typeId(){return S.Interval}toString(){return`Interval<${I[this.unit]}>`}}Dt=Symbol.toStringTag,Zt[Dt]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Zt.prototype);class Jt extends kt{constructor(t){super(),this.children=[t]}get typeId(){return S.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Bt=Symbol.toStringTag,Jt[Bt]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Jt.prototype);class Xt extends kt{constructor(t){super(),this.children=t}get typeId(){return S.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Ft=Symbol.toStringTag,Xt[Ft]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Xt.prototype);class Qt extends kt{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return S.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}Ut=Symbol.toStringTag,Qt[Ut]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Qt.prototype);class te extends kt{constructor(t){super(),this.byteWidth=t}get typeId(){return S.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Lt=Symbol.toStringTag,te[Lt]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(te.prototype);class ee extends kt{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return S.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}xt=Symbol.toStringTag,ee[xt]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(ee.prototype);class ne extends kt{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return S.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Mt=Symbol.toStringTag,ne[Mt]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(ne.prototype);const ie=(re=-1,()=>++re);var re;class se extends kt{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?ie():"number"==typeof n?n:n.low}get typeId(){return S.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function oe(t){const e=t;switch(t.typeId){case S.Decimal:return t.bitWidth/32;case S.Timestamp:return 2;case S.Date:case S.Interval:return 1+e.unit;case S.FixedSizeList:return e.listSize;case S.FixedSizeBinary:return e.byteWidth;default:return 1}}Rt=Symbol.toStringTag,se[Rt]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(se.prototype);class ae{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){return"number"==typeof e?le(t,e,n):"string"==typeof e&&e in S?le(t,S[e],n):e&&e instanceof kt?le(t,ce(e),n):(null==e?void 0:e.type)&&e.type instanceof kt?le(t,ce(e.type),n):le(t,S.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return le(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function le(t,e,n=!0){let i=null;switch(e){case S.Null:i=t.visitNull;break;case S.Bool:i=t.visitBool;break;case S.Int:i=t.visitInt;break;case S.Int8:i=t.visitInt8||t.visitInt;break;case S.Int16:i=t.visitInt16||t.visitInt;break;case S.Int32:i=t.visitInt32||t.visitInt;break;case S.Int64:i=t.visitInt64||t.visitInt;break;case S.Uint8:i=t.visitUint8||t.visitInt;break;case S.Uint16:i=t.visitUint16||t.visitInt;break;case S.Uint32:i=t.visitUint32||t.visitInt;break;case S.Uint64:i=t.visitUint64||t.visitInt;break;case S.Float:i=t.visitFloat;break;case S.Float16:i=t.visitFloat16||t.visitFloat;break;case S.Float32:i=t.visitFloat32||t.visitFloat;break;case S.Float64:i=t.visitFloat64||t.visitFloat;break;case S.Utf8:i=t.visitUtf8;break;case S.Binary:i=t.visitBinary;break;case S.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case S.Date:i=t.visitDate;break;case S.DateDay:i=t.visitDateDay||t.visitDate;break;case S.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case S.Timestamp:i=t.visitTimestamp;break;case S.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case S.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case S.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case S.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case S.Time:i=t.visitTime;break;case S.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case S.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case S.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case S.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case S.Decimal:i=t.visitDecimal;break;case S.List:i=t.visitList;break;case S.Struct:i=t.visitStruct;break;case S.Union:i=t.visitUnion;break;case S.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case S.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case S.Dictionary:i=t.visitDictionary;break;case S.Interval:i=t.visitInterval;break;case S.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case S.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case S.FixedSizeList:i=t.visitFixedSizeList;break;case S.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${S[e]}'`)}function ce(t){switch(t.typeId){case S.Null:return S.Null;case S.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?S.Int8:S.Uint8;case 16:return n?S.Int16:S.Uint16;case 32:return n?S.Int32:S.Uint32;case 64:return n?S.Int64:S.Uint64}return S.Int}case S.Float:switch(t.precision){case v.HALF:return S.Float16;case v.SINGLE:return S.Float32;case v.DOUBLE:return S.Float64}return S.Float;case S.Binary:return S.Binary;case S.Utf8:return S.Utf8;case S.Bool:return S.Bool;case S.Decimal:return S.Decimal;case S.Time:switch(t.unit){case _.SECOND:return S.TimeSecond;case _.MILLISECOND:return S.TimeMillisecond;case _.MICROSECOND:return S.TimeMicrosecond;case _.NANOSECOND:return S.TimeNanosecond}return S.Time;case S.Timestamp:switch(t.unit){case _.SECOND:return S.TimestampSecond;case _.MILLISECOND:return S.TimestampMillisecond;case _.MICROSECOND:return S.TimestampMicrosecond;case _.NANOSECOND:return S.TimestampNanosecond}return S.Timestamp;case S.Date:switch(t.unit){case w.DAY:return S.DateDay;case w.MILLISECOND:return S.DateMillisecond}return S.Date;case S.Interval:switch(t.unit){case I.DAY_TIME:return S.IntervalDayTime;case I.YEAR_MONTH:return S.IntervalYearMonth}return S.Interval;case S.Map:return S.Map;case S.List:return S.List;case S.Struct:return S.Struct;case S.Union:switch(t.mode){case g.Dense:return S.DenseUnion;case g.Sparse:return S.SparseUnion}return S.Union;case S.FixedSizeBinary:return S.FixedSizeBinary;case S.FixedSizeList:return S.FixedSizeList;case S.Dictionary:return S.Dictionary}throw new Error(`Unrecognized type '${S[t.typeId]}'`)}ae.prototype.visitInt8=null,ae.prototype.visitInt16=null,ae.prototype.visitInt32=null,ae.prototype.visitInt64=null,ae.prototype.visitUint8=null,ae.prototype.visitUint16=null,ae.prototype.visitUint32=null,ae.prototype.visitUint64=null,ae.prototype.visitFloat16=null,ae.prototype.visitFloat32=null,ae.prototype.visitFloat64=null,ae.prototype.visitDateDay=null,ae.prototype.visitDateMillisecond=null,ae.prototype.visitTimestampSecond=null,ae.prototype.visitTimestampMillisecond=null,ae.prototype.visitTimestampMicrosecond=null,ae.prototype.visitTimestampNanosecond=null,ae.prototype.visitTimeSecond=null,ae.prototype.visitTimeMillisecond=null,ae.prototype.visitTimeMicrosecond=null,ae.prototype.visitTimeNanosecond=null,ae.prototype.visitDenseUnion=null,ae.prototype.visitSparseUnion=null,ae.prototype.visitIntervalDayTime=null,ae.prototype.visitIntervalYearMonth=null;const ue=new Float64Array(1),he=new Uint32Array(ue.buffer);function de(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}class fe extends ae{}function pe(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const ye=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},be=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},me=({values:t},e,n)=>{t[e]=n},ge=({values:t},e,n)=>{t[e]=n},ve=({values:t},e,n)=>{t[e]=function(t){if(t!=t)return 32256;ue[0]=t;const e=(2147483648&he[1])>>16&65535;let n=2146435072&he[1],i=0;return n>=1089470464?he[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&he[1])>>10):n<=1056964608?(i=1048576+(1048575&he[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&he[1])>>10),e|n|65535&i}(n)},we=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(t,e,n.valueOf())},_e=({values:t},e,n)=>{ye(t,2*e,n.valueOf())},Ie=({values:t},e,n)=>ye(t,2*e,n/1e3),Te=({values:t},e,n)=>ye(t,2*e,n),Se=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(t,2*e,n),Ne=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(t,2*e,n),Oe=({values:t},e,n)=>{t[e]=n},Ae=({values:t},e,n)=>{t[e]=n},Ee=({values:t},e,n)=>{t[e]=n},De=({values:t},e,n)=>{t[e]=n},Be=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];xe.visit(r,t.valueOffsets[e],n)},Fe=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];xe.visit(r,e,n)},Ue=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},Le=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12};fe.prototype.visitBool=pe((({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)})),fe.prototype.visitInt=pe(me),fe.prototype.visitInt8=pe(me),fe.prototype.visitInt16=pe(me),fe.prototype.visitInt32=pe(me),fe.prototype.visitInt64=pe(me),fe.prototype.visitUint8=pe(me),fe.prototype.visitUint16=pe(me),fe.prototype.visitUint32=pe(me),fe.prototype.visitUint64=pe(me),fe.prototype.visitFloat=pe(((t,e,n)=>{switch(t.type.precision){case v.HALF:return ve(t,e,n);case v.SINGLE:case v.DOUBLE:return ge(t,e,n)}})),fe.prototype.visitFloat16=pe(ve),fe.prototype.visitFloat32=pe(ge),fe.prototype.visitFloat64=pe(ge),fe.prototype.visitUtf8=pe((({values:t,valueOffsets:e},n,i)=>{be(t,e,n,x(i))})),fe.prototype.visitBinary=pe((({values:t,valueOffsets:e},n,i)=>be(t,e,n,i))),fe.prototype.visitFixedSizeBinary=pe((({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)})),fe.prototype.visitDate=pe(((t,e,n)=>{t.type.unit===w.DAY?we(t,e,n):_e(t,e,n)})),fe.prototype.visitDateDay=pe(we),fe.prototype.visitDateMillisecond=pe(_e),fe.prototype.visitTimestamp=pe(((t,e,n)=>{switch(t.type.unit){case _.SECOND:return Ie(t,e,n);case _.MILLISECOND:return Te(t,e,n);case _.MICROSECOND:return Se(t,e,n);case _.NANOSECOND:return Ne(t,e,n)}})),fe.prototype.visitTimestampSecond=pe(Ie),fe.prototype.visitTimestampMillisecond=pe(Te),fe.prototype.visitTimestampMicrosecond=pe(Se),fe.prototype.visitTimestampNanosecond=pe(Ne),fe.prototype.visitTime=pe(((t,e,n)=>{switch(t.type.unit){case _.SECOND:return Oe(t,e,n);case _.MILLISECOND:return Ae(t,e,n);case _.MICROSECOND:return Ee(t,e,n);case _.NANOSECOND:return De(t,e,n)}})),fe.prototype.visitTimeSecond=pe(Oe),fe.prototype.visitTimeMillisecond=pe(Ae),fe.prototype.visitTimeMicrosecond=pe(Ee),fe.prototype.visitTimeNanosecond=pe(De),fe.prototype.visitDecimal=pe((({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)})),fe.prototype.visitList=pe(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=xe.getVisitFn(i);if(Array.isArray(n))for(let t=-1,o=r[e],a=r[e+1];o<a;)s(i,o++,n[++t]);else for(let t=-1,o=r[e],a=r[e+1];o<a;)s(i,o++,n.get(++t))})),fe.prototype.visitStruct=pe(((t,e,n)=>{const i=t.type.children.map((t=>xe.getVisitFn(t.type))),r=n instanceof Map?(s=e,o=n,(t,e,n,i)=>e&&t(e,s,o.get(n.name))):n instanceof Jn?((t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]))(e,n):((t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]))(e,n);var s,o;t.type.children.forEach(((e,n)=>r(i[n],t.children[n],e,n)))})),fe.prototype.visitUnion=pe(((t,e,n)=>{t.type.mode===g.Dense?Be(t,e,n):Fe(t,e,n)})),fe.prototype.visitDenseUnion=pe(Be),fe.prototype.visitSparseUnion=pe(Fe),fe.prototype.visitDictionary=pe(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),fe.prototype.visitInterval=pe(((t,e,n)=>{t.type.unit===I.DAY_TIME?Ue(t,e,n):Le(t,e,n)})),fe.prototype.visitIntervalDayTime=pe(Ue),fe.prototype.visitIntervalYearMonth=pe(Le),fe.prototype.visitFixedSizeList=pe(((t,e,n)=>{const{stride:i}=t,r=t.children[0],s=xe.getVisitFn(r);if(Array.isArray(n))for(let t=-1,o=e*i;++t<i;)s(r,o+t,n[t]);else for(let t=-1,o=e*i;++t<i;)s(r,o+t,n.get(t))})),fe.prototype.visitMap=pe(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=xe.getVisitFn(i);let{[e]:o,[e+1]:a}=r;const l=n instanceof Map?n.entries():Object.entries(n);for(const t of l)if(s(i,o,t),++o>=a)break}));const xe=new fe,Me=Symbol.for("parent"),Re=Symbol.for("rowIndex");class Ce{constructor(t,e){return this[Me]=t,this[Re]=e,new Proxy(this,new Ve)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Re],e=this[Me],n=e.type.children,i={};for(let r=-1,s=n.length;++r<s;)i[n[r].name]=ln.visit(e.children[r],t);return i}toString(){return`{${[...this].map((([t,e])=>`${B(t)}: ${B(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ke(this[Me],this[Re])}}class ke{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,ln.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Ce.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Me]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Re]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Ve{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Me].type.children.map((t=>t.name))}has(t,e){return-1!==t[Me].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[Me].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Me].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=ln.visit(t[Me].children[n],t[Re]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[Me].type.children.findIndex((t=>t.name===e));return-1!==i?(xe.visit(t[Me].children[i],t[Re],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}class je extends ae{}function Pe(t){return(e,n)=>e.getValid(n)?t(e,n):null}const $e=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),ze=t=>new Date(t),We=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},Ye=({values:t},e)=>((t,e)=>ze(((t,e)=>864e5*t[e])(t,e)))(t,e),Ke=({values:t},e)=>((t,e)=>ze($e(t,e)))(t,2*e),He=({stride:t,values:e},n)=>e[t*n],Ge=({values:t},e)=>t[e],qe=({values:t},e)=>1e3*$e(t,2*e),Ze=({values:t},e)=>$e(t,2*e),Je=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),Xe=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),Qe=({values:t},e)=>t[e],tn=({values:t},e)=>t[e],en=({values:t},e)=>t[e],nn=({values:t},e)=>t[e],rn=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return ln.visit(i,t.valueOffsets[e])},sn=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return ln.visit(i,e)},on=({values:t},e)=>t.subarray(2*e,2*(e+1)),an=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i};je.prototype.visitNull=Pe(((t,e)=>null)),je.prototype.visitBool=Pe((({offset:t,values:e},n)=>{const i=t+n;return 0!=(e[i>>3]&1<<i%8)})),je.prototype.visitInt=Pe((({values:t},e)=>t[e])),je.prototype.visitInt8=Pe(He),je.prototype.visitInt16=Pe(He),je.prototype.visitInt32=Pe(He),je.prototype.visitInt64=Pe(Ge),je.prototype.visitUint8=Pe(He),je.prototype.visitUint16=Pe(He),je.prototype.visitUint32=Pe(He),je.prototype.visitUint64=Pe(Ge),je.prototype.visitFloat=Pe((({type:t,values:e},n)=>t.precision!==v.HALF?e[n]:de(e[n]))),je.prototype.visitFloat16=Pe((({stride:t,values:e},n)=>de(e[t*n]))),je.prototype.visitFloat32=Pe(He),je.prototype.visitFloat64=Pe(He),je.prototype.visitUtf8=Pe((({values:t,valueOffsets:e},n)=>{const i=We(t,e,n);return null!==i?U(i):null})),je.prototype.visitBinary=Pe((({values:t,valueOffsets:e},n)=>We(t,e,n))),je.prototype.visitFixedSizeBinary=Pe((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),je.prototype.visitDate=Pe(((t,e)=>t.type.unit===w.DAY?Ye(t,e):Ke(t,e))),je.prototype.visitDateDay=Pe(Ye),je.prototype.visitDateMillisecond=Pe(Ke),je.prototype.visitTimestamp=Pe(((t,e)=>{switch(t.type.unit){case _.SECOND:return qe(t,e);case _.MILLISECOND:return Ze(t,e);case _.MICROSECOND:return Je(t,e);case _.NANOSECOND:return Xe(t,e)}})),je.prototype.visitTimestampSecond=Pe(qe),je.prototype.visitTimestampMillisecond=Pe(Ze),je.prototype.visitTimestampMicrosecond=Pe(Je),je.prototype.visitTimestampNanosecond=Pe(Xe),je.prototype.visitTime=Pe(((t,e)=>{switch(t.type.unit){case _.SECOND:return Qe(t,e);case _.MILLISECOND:return tn(t,e);case _.MICROSECOND:return en(t,e);case _.NANOSECOND:return nn(t,e)}})),je.prototype.visitTimeSecond=Pe(Qe),je.prototype.visitTimeMillisecond=Pe(tn),je.prototype.visitTimeMicrosecond=Pe(en),je.prototype.visitTimeNanosecond=Pe(nn),je.prototype.visitDecimal=Pe((({values:t,stride:e},n)=>mt.decimal(t.subarray(e*n,e*(n+1))))),je.prototype.visitList=Pe(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:o}=n,a=r[0].slice(s,o-s);return new Jn([a])})),je.prototype.visitStruct=Pe(((t,e)=>new Ce(t,e))),je.prototype.visitUnion=Pe(((t,e)=>t.type.mode===g.Dense?rn(t,e):sn(t,e))),je.prototype.visitDenseUnion=Pe(rn),je.prototype.visitSparseUnion=Pe(sn),je.prototype.visitDictionary=Pe(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),je.prototype.visitInterval=Pe(((t,e)=>t.type.unit===I.DAY_TIME?on(t,e):an(t,e))),je.prototype.visitIntervalDayTime=Pe(on),je.prototype.visitIntervalYearMonth=Pe(an),je.prototype.visitFixedSizeList=Pe(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new Jn([r])})),je.prototype.visitMap=Pe(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,o=i[0];return new hn(o.slice(r,s-r))}));const ln=new je,cn=Symbol.for("keys"),un=Symbol.for("vals");class hn{constructor(t){return this[cn]=new Jn([t.children[0]]).memoize(),this[un]=t.children[1],new Proxy(this,new fn)}[Symbol.iterator](){return new dn(this[cn],this[un])}get size(){return this[cn].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[cn],e=this[un],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=ln.visit(e,i);return n}toString(){return`{${[...this].map((([t,e])=>`${B(t)}: ${B(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class dn{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),ln.visit(this.vals,t)]})}}class fn{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[cn].toArray().map(String)}has(t,e){return t[cn].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[cn].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[cn].indexOf(e);if(-1!==n){const i=ln.visit(Reflect.get(t,un),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[cn].indexOf(e);return-1!==i?(xe.visit(Reflect.get(t,un),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let pn;function yn(t,e,n,i){const{length:r=0}=t;let s="number"!=typeof e?0:e,o="number"!=typeof n?r:n;return s<0&&(s=(s%r+r)%r),o<0&&(o=(o%r+r)%r),o<s&&(pn=s,s=o,o=pn),o>r&&(o=r),i?i(t,s,o):[s,o]}Object.defineProperties(hn.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[cn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[un]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const bn=t=>t!=t;function mn(t){if("object"!=typeof t||null===t)return bn(t)?bn:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=mn(i);return gn(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=mn(t[n]);return gn(e)}(t):t instanceof Jn?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=mn(t.get(n));return gn(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let e=-1,r=n.length;++e<r;)i[e]=mn(t[n[e]]);return gn(i,n)}(t,!0)}function gn(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return vn(t,n,n.keys());case hn:case Ce:case Object:case void 0:return vn(t,n,e||Object.keys(n))}return n instanceof Jn&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function vn(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=s.next(),c=i.next(),u=r.next();for(;o<a&&!c.done&&!u.done&&!l.done&&c.value===u.value&&t[o](l.value);++o,c=i.next(),u=r.next(),l=s.next());return!!(o===a&&c.done&&u.done&&l.done)||(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}class wn{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function _n(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function In(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function Tn(t,e,n,i){const r=[];for(let s=-1,o=t.length;++s<o;){const o=t[s],a=e[s],{length:l}=o;if(a>=i)break;if(n>=a+l)continue;if(a>=n&&a+l<=i){r.push(o);continue}const c=Math.max(0,n-a),u=Math.min(i-a,l);r.push(o.slice(c,u-c))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function Sn(t,e,n,i){let r=0,s=0,o=e.length-1;do{if(r>=o-1)return n<e[o]?i(t,r,n-e[r]):null;s=r+Math.trunc(.5*(o-r)),n<e[s]?o=s:r=s}while(r<o)}function Nn(t,e){return t.getValid(e)}function On(t){function e(e,n,i){return t(e[n],i)}return function(t){return Sn(this.data,this._offsets,t,e)}}function An(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const s=Sn(r,this._offsets,t,n);return e=void 0,s}}function En(t){let e;function n(n,i,r){let s=r,o=0,a=0;for(let r=i-1,l=n.length;++r<l;){const i=n[r];if(~(o=t(i,e,s)))return a+o;s=0,a+=i.length}return-1}return function(t,i){e=t;const r=this.data,s="number"!=typeof i?n(r,0,0):Sn(r,this._offsets,i,n);return e=void 0,s}}function Dn(t,e,n,i){return 0!=(n&1<<i)}function Bn(t,e,n,i){return(n&1<<i)>>i}function Fn(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class Un{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ln(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new Un(t,e,n-e,t,Bn))i+=r;return i}const i=n>>3<<3,r=e+(e%8==0?0:8-e%8);return Ln(t,e,r)+Ln(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=void 0===n?t.byteLength:r+n;for(;o-r>=4;)i+=xn(s.getUint32(r)),r+=4;for(;o-r>=2;)i+=xn(s.getUint16(r)),r+=2;for(;o-r>=1;)i+=xn(s.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function xn(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class Mn extends ae{}function Rn(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new Un(n,t.offset+(e||0),t.length,n,Dn)){if(!r)return i;++i}return-1}(t,n);const i=ln.getVisitFn(t),r=mn(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}function Cn(t,e,n){const i=ln.getVisitFn(t),r=mn(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}Mn.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Mn.prototype.visitBool=Rn,Mn.prototype.visitInt=Rn,Mn.prototype.visitInt8=Rn,Mn.prototype.visitInt16=Rn,Mn.prototype.visitInt32=Rn,Mn.prototype.visitInt64=Rn,Mn.prototype.visitUint8=Rn,Mn.prototype.visitUint16=Rn,Mn.prototype.visitUint32=Rn,Mn.prototype.visitUint64=Rn,Mn.prototype.visitFloat=Rn,Mn.prototype.visitFloat16=Rn,Mn.prototype.visitFloat32=Rn,Mn.prototype.visitFloat64=Rn,Mn.prototype.visitUtf8=Rn,Mn.prototype.visitBinary=Rn,Mn.prototype.visitFixedSizeBinary=Rn,Mn.prototype.visitDate=Rn,Mn.prototype.visitDateDay=Rn,Mn.prototype.visitDateMillisecond=Rn,Mn.prototype.visitTimestamp=Rn,Mn.prototype.visitTimestampSecond=Rn,Mn.prototype.visitTimestampMillisecond=Rn,Mn.prototype.visitTimestampMicrosecond=Rn,Mn.prototype.visitTimestampNanosecond=Rn,Mn.prototype.visitTime=Rn,Mn.prototype.visitTimeSecond=Rn,Mn.prototype.visitTimeMillisecond=Rn,Mn.prototype.visitTimeMicrosecond=Rn,Mn.prototype.visitTimeNanosecond=Rn,Mn.prototype.visitDecimal=Rn,Mn.prototype.visitList=Rn,Mn.prototype.visitStruct=Rn,Mn.prototype.visitUnion=Rn,Mn.prototype.visitDenseUnion=Cn,Mn.prototype.visitSparseUnion=Cn,Mn.prototype.visitDictionary=Rn,Mn.prototype.visitInterval=Rn,Mn.prototype.visitIntervalDayTime=Rn,Mn.prototype.visitIntervalYearMonth=Rn,Mn.prototype.visitFixedSizeList=Rn,Mn.prototype.visitMap=Rn;const kn=new Mn;class Vn extends ae{}function jn(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===S.Timestamp||e instanceof jt&&64!==e.bitWidth||e instanceof Gt&&64!==e.bitWidth||e instanceof $t&&e.precision!==v.HALF))return new wn(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new wn(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new Pn(r)}))}class Pn{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Vn.prototype.visitNull=jn,Vn.prototype.visitBool=jn,Vn.prototype.visitInt=jn,Vn.prototype.visitInt8=jn,Vn.prototype.visitInt16=jn,Vn.prototype.visitInt32=jn,Vn.prototype.visitInt64=jn,Vn.prototype.visitUint8=jn,Vn.prototype.visitUint16=jn,Vn.prototype.visitUint32=jn,Vn.prototype.visitUint64=jn,Vn.prototype.visitFloat=jn,Vn.prototype.visitFloat16=jn,Vn.prototype.visitFloat32=jn,Vn.prototype.visitFloat64=jn,Vn.prototype.visitUtf8=jn,Vn.prototype.visitBinary=jn,Vn.prototype.visitFixedSizeBinary=jn,Vn.prototype.visitDate=jn,Vn.prototype.visitDateDay=jn,Vn.prototype.visitDateMillisecond=jn,Vn.prototype.visitTimestamp=jn,Vn.prototype.visitTimestampSecond=jn,Vn.prototype.visitTimestampMillisecond=jn,Vn.prototype.visitTimestampMicrosecond=jn,Vn.prototype.visitTimestampNanosecond=jn,Vn.prototype.visitTime=jn,Vn.prototype.visitTimeSecond=jn,Vn.prototype.visitTimeMillisecond=jn,Vn.prototype.visitTimeMicrosecond=jn,Vn.prototype.visitTimeNanosecond=jn,Vn.prototype.visitDecimal=jn,Vn.prototype.visitList=jn,Vn.prototype.visitStruct=jn,Vn.prototype.visitUnion=jn,Vn.prototype.visitDenseUnion=jn,Vn.prototype.visitSparseUnion=jn,Vn.prototype.visitDictionary=jn,Vn.prototype.visitInterval=jn,Vn.prototype.visitIntervalDayTime=jn,Vn.prototype.visitIntervalYearMonth=jn,Vn.prototype.visitFixedSizeList=jn,Vn.prototype.visitMap=jn;const $n=new Vn,zn=(t,e)=>t+e;class Wn extends ae{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===_.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+Hn.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+Hn.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const Yn=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+Hn.visit(e[s],i[r])},Kn=({children:t},e)=>4+Hn.visitMany(t,t.map((()=>e))).reduce(zn,0);Wn.prototype.visitUtf8=({valueOffsets:t},e)=>t[e+1]-t[e]+8,Wn.prototype.visitBinary=({valueOffsets:t},e)=>t[e+1]-t[e]+8,Wn.prototype.visitList=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:o}=t,a=Hn.getVisitFn(r.type),l=r.slice(s,o-s);let c=8;for(let t=-1,e=o-s;++t<e;)c+=a(l,t);return c},Wn.prototype.visitFixedSizeList=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=Hn.getVisitFn(i.type);let o=0;for(let t=-1,e=r.length;++t<e;)o+=s(r,t);return o},Wn.prototype.visitUnion=(t,e)=>t.type.mode===g.Dense?Yn(t,e):Kn(t,e),Wn.prototype.visitDenseUnion=Yn,Wn.prototype.visitSparseUnion=Kn;const Hn=new Wn;var Gn;const qn={},Zn={};class Jn{constructor(t){var e,n,i;const r=t[0]instanceof Jn?t.flatMap((t=>t.data)):t;if(r.some((t=>!(t instanceof Qn))))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:i}=qn[s.typeId],o=r[0];this.isValid=t=>Nn(o,t),this.get=e=>t(o,e),this.set=(t,n)=>e(o,t,n),this.indexOf=t=>n(o,t),this.getByteLength=t=>i(o,t),this._offsets=[0,o.length];break}default:Object.setPrototypeOf(this,Zn[s.typeId]),this._offsets=In(r)}this.data=r,this.type=s,this.stride=oe(s),this.numChildren=null!==(i=null===(n=s.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=_n(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${S[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return $n.visit(this)}concat(...t){return new Jn(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new Jn(yn(this,t,e,(({data:t,_offsets:e},n,i)=>Tn(t,e,n,i))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:r}=this;switch(t.typeId){case S.Int:case S.Float:case S.Decimal:case S.Time:case S.Timestamp:switch(e.length){case 0:return new r;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,{values:e})=>(t.array.set(e,t.offset),t.offset+=e.length,t)),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new Jn(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!kt.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(kt.isDictionary(this.type)){const t=new Xn(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new Jn(e)}return new Xn(this)}unmemoize(){if(kt.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new Jn(e)}return this}}Gn=Symbol.toStringTag,Jn[Gn]=(t=>{t.type=kt.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(S).map((t=>S[t])).filter((t=>"number"==typeof t&&t!==S.NONE));for(const n of e){const e=ln.getVisitFnByTypeId(n),i=xe.getVisitFnByTypeId(n),r=kn.getVisitFnByTypeId(n),s=Hn.getVisitFnByTypeId(n);qn[n]={get:e,set:i,indexOf:r,byteLength:s},Zn[n]=Object.create(t,{isValid:{value:On(Nn)},get:{value:On(ln.getVisitFnByTypeId(n))},set:{value:An(xe.getVisitFnByTypeId(n))},indexOf:{value:En(kn.getVisitFnByTypeId(n))},getByteLength:{value:On(Hn.getVisitFnByTypeId(n))}})}return"Vector"})(Jn.prototype);class Xn extends Jn{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new Xn(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Jn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Qn{constructor(t,e,n,i,r,s=[],o){let a;this.type=t,this.children=s,this.dictionary=o,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof Qn?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=oe(t),r&&((a=r[0])&&(this.valueOffsets=a),(a=r[1])&&(this.values=a),(a=r[2])&&(this.nullBitmap=a),(a=r[3])&&(this.typeIds=a))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Ln(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!=(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:i}=this,r=i+t>>3,s=(i+t)%8,o=n[r]>>s&1;return e?0===o&&(n[r]|=1<<s,this._nullCount=this.nullCount+1):1===o&&(n[r]&=~(1<<s),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,r=this,s=this.children){return new Qn(t,e,n,i,r,s,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,s=+(0===this._nullCount)-1,o=16===i?n:1,a=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,s,a,0===r.length||this.valueOffsets?r:this._sliceChildren(r,o*t,o*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===S.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(function(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):Fn(new Un(n,t,e,null,Dn)).subarray(0,i)),r}return n}(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[N.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:s}=this;return(r=s[N.TYPE])&&(s[N.TYPE]=r.subarray(t,t+e)),(r=s[N.OFFSET])&&(s[N.OFFSET]=r.subarray(t,t+e+1))||(r=s[N.DATA])&&(s[N.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),s}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}Qn.prototype.children=Object.freeze([]);class ti extends ae{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new Qn(e,n,i,0)}visitBool(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length>>3,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=rt(t.data),r=rt(t.nullBitmap),s=it(t.valueOffsets),{length:o=s.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[s,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=rt(t.data),r=rt(t.nullBitmap),s=it(t.valueOffsets),{length:o=s.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[s,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=rt(t.nullBitmap),s=it(t.valueOffsets),{length:o=s.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[s,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=rt(t.nullBitmap),{length:s=i.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=rt(t.nullBitmap),s=nt(e.ArrayType,t.typeIds),{length:o=s.length,nullCount:a=(t.nullBitmap?-1:0)}=t;if(kt.isSparseUnion(e))return new Qn(e,n,o,a,[void 0,void 0,r,s],i);const l=it(t.valueOffsets);return new Qn(e,n,o,a,[l,void 0,r,s],i)}visitDictionary(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.indices.ArrayType,t.data),{dictionary:s=new Jn([(new ti).visit({type:e.dictionary})])}=t,{length:o=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,r,i],[],s)}visitInterval(t){const{type:e,offset:n=0}=t,i=rt(t.nullBitmap),r=nt(e.ArrayType,t.data),{length:s=r.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new ti).visit({type:e.valueType})}=t,r=rt(t.nullBitmap),{length:s=i.length/oe(e),nullCount:o=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,s,o,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new ti).visit({type:e.childType})}=t,r=rt(t.nullBitmap),s=it(t.valueOffsets),{length:o=s.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[s,void 0,r],[i])}}function ei(t){return(new ti).visit(t)}class ni{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=si(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new ni(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new ni(e,this.metadata)}assign(...t){const e=t[0]instanceof ni?t[0]:Array.isArray(t[0])?new ni(t[0]):new ni(t),n=[...this.fields],i=ri(ri(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:ri(ri(new Map,n[e].metadata),t.metadata)}))&&!1})),s=si(r,new Map);return new ni([...n,...r],i,new Map([...this.dictionaries,...s]))}}ni.prototype.fields=null,ni.prototype.metadata=null,ni.prototype.dictionaries=null;class ii{constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new ii(`${e}`,n,i,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,ii.new(e,n,i,r)}}function ri(t,e){return new Map([...t||new Map,...e||new Map])}function si(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(kt.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&si(i.children,e)}return e}ii.prototype.type=null,ii.prototype.name=null,ii.prototype.nullable=null,ii.prototype.metadata=null;class oi extends ae{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function ai(t,e){return e instanceof t.constructor}function li(t,e){return t===e||ai(t,e)}function ci(t,e){return t===e||ai(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function ui(t,e){return t===e||ai(t,e)&&t.precision===e.precision}function hi(t,e){return t===e||ai(t,e)&&t.unit===e.unit}function di(t,e){return t===e||ai(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function fi(t,e){return t===e||ai(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function pi(t,e){return t===e||ai(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&bi.compareManyFields(t.children,e.children)}function yi(t,e){return t===e||ai(t,e)&&t.unit===e.unit}oi.prototype.visitNull=li,oi.prototype.visitBool=li,oi.prototype.visitInt=ci,oi.prototype.visitInt8=ci,oi.prototype.visitInt16=ci,oi.prototype.visitInt32=ci,oi.prototype.visitInt64=ci,oi.prototype.visitUint8=ci,oi.prototype.visitUint16=ci,oi.prototype.visitUint32=ci,oi.prototype.visitUint64=ci,oi.prototype.visitFloat=ui,oi.prototype.visitFloat16=ui,oi.prototype.visitFloat32=ui,oi.prototype.visitFloat64=ui,oi.prototype.visitUtf8=li,oi.prototype.visitBinary=li,oi.prototype.visitFixedSizeBinary=function(t,e){return t===e||ai(t,e)&&t.byteWidth===e.byteWidth},oi.prototype.visitDate=hi,oi.prototype.visitDateDay=hi,oi.prototype.visitDateMillisecond=hi,oi.prototype.visitTimestamp=di,oi.prototype.visitTimestampSecond=di,oi.prototype.visitTimestampMillisecond=di,oi.prototype.visitTimestampMicrosecond=di,oi.prototype.visitTimestampNanosecond=di,oi.prototype.visitTime=fi,oi.prototype.visitTimeSecond=fi,oi.prototype.visitTimeMillisecond=fi,oi.prototype.visitTimeMicrosecond=fi,oi.prototype.visitTimeNanosecond=fi,oi.prototype.visitDecimal=li,oi.prototype.visitList=function(t,e){return t===e||ai(t,e)&&t.children.length===e.children.length&&bi.compareManyFields(t.children,e.children)},oi.prototype.visitStruct=function(t,e){return t===e||ai(t,e)&&t.children.length===e.children.length&&bi.compareManyFields(t.children,e.children)},oi.prototype.visitUnion=pi,oi.prototype.visitDenseUnion=pi,oi.prototype.visitSparseUnion=pi,oi.prototype.visitDictionary=function(t,e){return t===e||ai(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&bi.visit(t.indices,e.indices)&&bi.visit(t.dictionary,e.dictionary)},oi.prototype.visitInterval=yi,oi.prototype.visitIntervalDayTime=yi,oi.prototype.visitIntervalYearMonth=yi,oi.prototype.visitFixedSizeList=function(t,e){return t===e||ai(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&bi.compareManyFields(t.children,e.children)},oi.prototype.visitMap=function(t,e){return t===e||ai(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&bi.compareManyFields(t.children,e.children)};const bi=new oi;function mi(t,e){return bi.compareSchemas(t,e)}var gi,vi;class wi{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof ni))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ei({nullCount:0,type:new Xt(this.schema.fields),children:this.schema.fields.map((t=>ei({type:t.type,nullCount:0})))})]=t,!(this.data instanceof Qn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=_i(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:i,length:r}=Object.keys(e).reduce(((t,n,i)=>(t.children[i]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[i]=ii.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new ni(n),o=ei({type:new Xt(n),length:r,children:i,nullCount:0});[this.schema,this.data]=_i(s,o.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Ii(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return ln.visit(this.data,t)}set(t,e){return xe.visit(this.data,t,e)}indexOf(t,e){return kn.visit(this.data,t,e)}getByteLength(t){return Hn.visit(this.data,t)}[Symbol.iterator](){return $n.visit(new Jn([this.data]))}toArray(){return[...this]}concat(...t){return new Oi(this.schema,[this,...t])}slice(t,e){const[n]=new Jn([this.data]).slice(t,e).data;return new wi(this.schema,n)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Jn([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){e||(e=new Jn([ei({type:new Vt,length:this.numRows})]));const r=n.fields.slice(),s=i.children.slice(),o=r[t].clone({type:e.type});[r[t],s[t]]=[o,e.data[0]],n=new ni(r,new Map(this.schema.metadata)),i=ei({type:new Xt(r),children:s})}return new wi(n,i)}select(t){const e=this.schema.select(t),n=new Xt(e.fields),i=[];for(const e of t){const t=this.schema.fields.findIndex((t=>t.name===e));~t&&(i[t]=this.data.children[t])}return new wi(e,ei({type:n,length:this.numRows,children:i}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map((t=>this.data.children[t])).filter(Boolean),i=ei({type:new Xt(e.fields),length:this.numRows,children:n});return new wi(e,i)}}function _i(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var i;const r=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const t=e[a];t&&t.length===n||(r[a]=l.clone({nullable:!0}),s[a]=null!==(i=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:ei({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(r),ei({type:new Xt(r),length:n,children:s})]}function Ii(t,e,n=new Map){for(let i=-1,r=t.length;++i<r;){const r=t[i].type,s=e[i];if(kt.isDictionary(r))if(n.has(r.id)){if(n.get(r.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else s.dictionary&&n.set(r.id,s.dictionary);r.children&&r.children.length>0&&Ii(r.children,s.children,n)}return n}gi=Symbol.toStringTag,wi[gi]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(wi.prototype);class Ti extends wi{constructor(t){const e=t.fields.map((t=>ei({type:t.type})));super(t,ei({type:new Xt(t.fields),nullCount:0,children:e}))}}function Si(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s=0,o=0,a=-1;const l=e.length;let c,u=[];for(;r.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=e[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=Ni(n,o,u,e,r),o>0&&(i[s++]=ei({type:new Xt(n),length:o,nullCount:0,children:u.slice()})))}return[t=t.assign(n),i.map((e=>new wi(t,e)))]}(t,e.map((t=>t.data.concat())))}function Ni(t,e,n,i,r){var s;const o=(e+63&-64)>>3;for(let a=-1,l=i.length;++a<l;){const l=n[a],c=null==l?void 0:l.length;if(c>=e)c===e?n[a]=l:(n[a]=l.slice(0,e),r.numBatches=Math.max(r.numBatches,i[a].unshift(l.slice(e,c-e))));else{const i=t[a];t[a]=i.clone({nullable:!0}),n[a]=null!==(s=null==l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==s?s:ei({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}class Oi{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new ni([]),this._offsets=[0],this;let i,r;t[0]instanceof ni&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(r=t.pop());const s=t=>{if(t){if(t instanceof wi)return[t];if(t instanceof Oi)return t.batches;if(t instanceof Qn){if(t.type instanceof Xt)return[new wi(new ni(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>s(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>s(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new Jn([t[e]]))),i=new ni(e.map(((t,e)=>new ii(String(t),n[e].type)))),[,r]=Si(i,n);return 0===r.length?[new wi(t)]:r}}}return[]},o=t.flatMap((t=>s(t)));if(i=null!==(n=null!=i?i:null===(e=o[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new ni([]),!(i instanceof ni))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const t of o){if(!(t instanceof wi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!mi(i,t.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=o,this._offsets=null!=r?r:In(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=_n(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return $n.visit(new Jn(this.data))}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new Oi(e,n.map((t=>new wi(e,t))))}slice(t,e){const n=this.schema;[t,e]=yn({length:this.numRows},t,e);const i=Tn(this.data,this._offsets,t,e);return new Oi(n,i.map((t=>new wi(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=ei({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Jn(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new Jn([ei({type:new Vt,length:this.numRows})]));const r=n.fields.slice(),s=r[t].clone({type:e.type}),o=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[r[t],o[t]]=[s,e],[n,i]=Si(n,o)}return new Oi(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new Oi(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,s]=t,o=e.findIndex((t=>t.name===n.name));return~o?s[o]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),s=[...e.map(((t,e)=>[e,i[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new Oi(...Si(r,s))}}vi=Symbol.toStringTag,Oi[vi]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=On(Nn),t.get=On(ln.getVisitFn(S.Struct)),t.set=An(xe.getVisitFn(S.Struct)),t.indexOf=En(kn.getVisitFn(S.Struct)),t.getByteLength=On(Hn.getVisitFn(S.Struct)),"Table"))(Oi.prototype);class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const Ei=new Int32Array(2),Di=new Float32Array(Ei.buffer),Bi=new Float64Array(Ei.buffer),Fi=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class Ui{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?Ui.ZERO:new Ui(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var Li,xi,Mi,Ri,Ci;Ui.ZERO=new Ui(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Li||(Li={}));class ki{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new ki(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Ui(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Ui(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Ei[0]=this.readInt32(t),Di[0]}readFloat64(t){return Ei[Fi?0:1]=this.readInt32(t),Ei[Fi?1:0]=this.readInt32(t+4),Bi[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){Di[0]=e,this.writeInt32(t,Ei[0])}writeFloat64(t,e){Bi[0]=e,this.writeInt32(t,Ei[Fi?0:1]),this.writeInt32(t+4,Ei[Fi?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",r=0;if(t+=4,e===Li.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){let e;const n=this.readUint8(t+r++);if(n<192)e=n;else{const i=this.readUint8(t+r++);if(n<224)e=(31&n)<<6|63&i;else{const s=this.readUint8(t+r++);e=n<240?(15&n)<<12|(63&i)<<6|63&s:(7&n)<<18|(63&i)<<12|(63&s)<<6|63&this.readUint8(t+r++)}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return Ui.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}}class Vi{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=ki.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<n+t+e;){const t=this.bb.capacity();this.bb=Vi.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,i=ki.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const s=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(t)){for(let e=2;e<i;e+=2)if(this.bb.readInt16(s+e)!=this.bb.readInt16(t+e))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const i=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+i),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(0==this.bb.readInt16(i+e))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let i;const r=t.charCodeAt(n++);i=r<55296||r>=56320?r:(r<<10)+t.charCodeAt(n++)+-56613888,i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let t=0,n=this.space,i=this.bb.bytes();t<e.length;t++)i[n++]=e[t];return this.endVector()}createLong(t,e){return Ui.create(t,e)}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class ji{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new ji).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new ji).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return ji.startKeyValue(t),ji.addKey(t,e),ji.addValue(t,n),ji.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(xi||(xi={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(Mi||(Mi={})),function(t){t[t.DenseArray=0]="DenseArray"}(Ri||(Ri={}));class Pi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new Pi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new Pi).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return Pi.startInt(t),Pi.addBitWidth(t,e),Pi.addIsSigned(t,n),Pi.endInt(t)}}class $i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new $i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new $i).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Pi).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Ri.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,Ri.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(Ci||(Ci={}));class zi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new zi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new zi).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ci.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new $i).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new zi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,Ci.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class Wi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new Wi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new Wi).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Mi.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new zi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,Mi.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,i,r){return Wi.startSchema(t),Wi.addEndianness(t,e),Wi.addFields(t,n),Wi.addCustomMetadata(t,i),Wi.addFeatures(t,r),Wi.endSchema(t)}}class Yi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new Yi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new Yi).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xi.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Wi).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Ai).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Ai).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,xi.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var Ki=Ui,Hi=Vi,Gi=ki;class qi{constructor(t,e=m.V4,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new Gi(rt(t));const e=Yi.getRootAsFooter(t),n=ni.decode(e.schema());return new Zi(n,e)}static encode(t){const e=new Hi,n=ni.encode(e,t.schema);Yi.startRecordBatchesVector(e,t.numRecordBatches);for(const n of[...t.recordBatches()].slice().reverse())Ji.encode(e,n);const i=e.endVector();Yi.startDictionariesVector(e,t.numDictionaries);for(const n of[...t.dictionaryBatches()].slice().reverse())Ji.encode(e,n);const r=e.endVector();return Yi.startFooter(e),Yi.addSchema(e,n),Yi.addVersion(e,m.V4),Yi.addRecordBatches(e,i),Yi.addDictionaries(e,r),Yi.finishFooterBuffer(e,Yi.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Zi extends qi{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Ji.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Ji.decode(e)}return null}}class Ji{constructor(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new Ji(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new Ki(e.offset,0),r=new Ki(e.bodyLength,0);return Ai.createBlock(t,i,n,r)}}const Xi={fromIterable:t=>Qi(function*(t){let e,n,i,r,s=!1,o=[],a=0;({cmd:i,size:r}=yield null);const l=(c=t,function*(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Q?n(e):W(e)?e:n(e);return yield*st(function*(e){let n=null;do{n=e.next(yield nt(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}(Uint8Array,c))[Symbol.iterator]();var c;try{do{if(({done:e,value:n}=Number.isNaN(r-a)?l.next():l.next(r-a)),!e&&n.byteLength>0&&(o.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield"peek"===i?et(o,r)[0]:([n,o,a]=et(o,r),n))}while(r<a)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&l.throw(t)}finally{!1===s&&"function"==typeof l.return&&l.return(null)}return null}(t)),fromAsyncIterable:t=>Qi(function(t){return p(this,arguments,(function*(){let e,n,i,r,s=!1,o=[],a=0;({cmd:i,size:r}=yield yield f(null));const l=at(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-a)?yield f(l.next()):yield f(l.next(r-a))),!e&&n.byteLength>0&&(o.push(n),a+=n.byteLength),e||r<=a)do{({cmd:i,size:r}=yield yield f("peek"===i?et(o,r)[0]:([n,o,a]=et(o,r),n)))}while(r<a)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&(yield f(l.throw(t)))}finally{!1===s&&"function"==typeof l.return&&(yield f(l.return(new Uint8Array(0))))}return yield f(null)}))}(t)),fromDOMStream:t=>Qi(function(t){return p(this,arguments,(function*(){let e,n,i,r=!1,s=!1,o=[],a=0;({cmd:n,size:i}=yield yield f(null));const l=new tr(t);try{do{if(({done:r,value:e}=Number.isNaN(i-a)?yield f(l.read()):yield f(l.read(i-a))),!r&&e.byteLength>0&&(o.push(rt(e)),a+=e.byteLength),r||i<=a)do{({cmd:n,size:i}=yield yield f("peek"===n?et(o,i)[0]:([e,o,a]=et(o,i),e)))}while(i<a)}while(!r)}catch(t){(s=!0)&&(yield f(l.cancel(t)))}finally{!1===s?yield f(l.cancel()):t.locked&&l.releaseLock()}return yield f(null)}))}(t)),fromNodeStream:t=>Qi(function(t){return p(this,arguments,(function*(){const e=[];let n,i,r,s="error",o=!1,a=null,l=0,c=[];if(({cmd:n,size:i}=yield yield f(null)),t.isTTY)return yield yield f(new Uint8Array(0)),yield f(null);try{e[0]=er(t,"end"),e[1]=er(t,"error");do{if(e[2]=er(t,"readable"),[s,a]=yield f(Promise.race(e.map((t=>t[2])))),"error"===s)break;if((o="end"===s)||(Number.isFinite(i-l)?(r=rt(t.read(i-l)),r.byteLength<i-l&&(r=rt(t.read()))):r=rt(t.read()),r.byteLength>0&&(c.push(r),l+=r.byteLength)),o||i<=l)do{({cmd:n,size:i}=yield yield f("peek"===n?et(c,i)[0]:([r,c,l]=et(c,i),r)))}while(i<l)}while(!o)}finally{yield f(function(e,n){return r=c=null,new Promise(((i,r)=>{for(const[n,i]of e)t.off(n,i);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(t){n=t||n}finally{null!=n?r(n):i()}}))}(e,"error"===s?a:null))}return yield f(null)}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Qi=t=>(t.next(),t);class tr{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return d(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return d(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=rt(e)),e}))}}const er=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]},nr=Object.freeze({done:!0,value:void 0});class ir{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class rr{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class sr extends rr{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return d(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(nr);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Xi.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Xi.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return d(this,void 0,void 0,(function*(){return yield this.abort(t),nr}))}return(t){return d(this,void 0,void 0,(function*(){return yield this.close(),nr}))}read(t){return d(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return d(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(nr)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class or extends sr{write(t){if((t=rt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?U(this.toUint8Array(!0)):this.toUint8Array(!1).then(U)}toUint8Array(t=!1){return t?et(this._values)[0]:(()=>d(this,void 0,void 0,(function*(){var t,e;const n=[];let i=0;try{for(var r,s=b(this);!(r=yield s.next()).done;){const t=r.value;n.push(t),i+=t.byteLength}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=s.return)&&(yield e.call(s))}finally{if(t)throw t.error}}return et(n,i)[0]})))()}}class ar{constructor(t){t&&(this.source=new cr(Xi.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class lr{constructor(t){t instanceof lr?this.source=t.source:t instanceof or?this.source=new ur(Xi.fromAsyncIterable(t)):X(t)?this.source=new ur(Xi.fromNodeStream(t)):J(t)?this.source=new ur(Xi.fromDOMStream(t)):q(t)?this.source=new ur(Xi.fromDOMStream(t.body)):W(t)?this.source=new ur(Xi.fromIterable(t)):(z(t)||Y(t))&&(this.source=new ur(Xi.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class cr{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||nr)}return(t){return Object.create(this.source.return&&this.source.return(t)||nr)}}class ur{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return d(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return d(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return d(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t,e="read"){return d(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return d(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||nr;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return d(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||nr;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class hr extends ar{constructor(t,e){super(),this.position=0,this.buffer=rt(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:i}=this;return e&&i<n?("number"!=typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class dr extends lr{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(()=>d(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return d(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}))}seek(t){return d(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return d(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:i}=this;if(e&&i<n){"number"!=typeof t&&(t=Number.POSITIVE_INFINITY);let r=i,s=0,o=0;const a=Math.min(n,r+Math.min(n-r,t)),l=new Uint8Array(Math.max(0,(this.position=a)-r));for(;(r+=o)<a&&(s+=o)<l.byteLength;)({bytesRead:o}=yield e.read(l,s,l.byteLength-s,r));return l}return null}))}readAt(t,e){return d(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:n,size:i}=this;if(n&&t+e<i){const r=Math.min(i,t+e),s=new Uint8Array(r-t);return(yield n.read(s,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return d(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return d(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return d(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function fr(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const pr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class yr{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*n[3];this.buffer[0]=65535&i;let r=i>>>16;return i=e[2]*n[3],r+=i,i=e[3]*n[2]>>>0,r+=i,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${fr(this.buffer[1])} ${fr(this.buffer[0])}`}}class br extends yr{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return br.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return br.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.length,i=new br(e);for(let e=0;e<n;){const r=8<n-e?8:n-e,s=new br(new Uint32Array([Number.parseInt(t.slice(e,e+r),10),0])),o=new br(new Uint32Array([pr[r],0]));i.times(o),i.plus(s),e+=r}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)br.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new br(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new br(new Uint32Array(t.buffer)).plus(e)}}class mr extends yr{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return mr.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return mr.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.startsWith("-"),i=t.length,r=new mr(e);for(let e=n?1:0;e<i;){const n=8<i-e?8:i-e,s=new mr(new Uint32Array([Number.parseInt(t.slice(e,e+n),10),0])),o=new mr(new Uint32Array([pr[n],0]));r.times(o),r.plus(s),e+=n}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)mr.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new mr(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new mr(new Uint32Array(t.buffer)).plus(e)}}class gr{constructor(t){this.buffer=t}high(){return new mr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new mr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new br(new Uint32Array([this.buffer[3],0])),n=new br(new Uint32Array([this.buffer[2],0])),i=new br(new Uint32Array([this.buffer[1],0])),r=new br(new Uint32Array([this.buffer[0],0])),s=new br(new Uint32Array([t.buffer[3],0])),o=new br(new Uint32Array([t.buffer[2],0])),a=new br(new Uint32Array([t.buffer[1],0])),l=new br(new Uint32Array([t.buffer[0],0]));let c=br.multiply(r,l);this.buffer[0]=c.low();const u=new br(new Uint32Array([c.high(),0]));return c=br.multiply(i,l),u.plus(c),c=br.multiply(r,a),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high(),new br(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(br.multiply(n,l)).plus(br.multiply(i,a)).plus(br.multiply(r,o)),this.buffer[3]+=br.multiply(e,l).plus(br.multiply(n,a)).plus(br.multiply(i,o)).plus(br.multiply(r,s)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${fr(this.buffer[3])} ${fr(this.buffer[2])} ${fr(this.buffer[1])} ${fr(this.buffer[0])}`}static multiply(t,e){return new gr(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new gr(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return gr.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return gr.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const n=t.startsWith("-"),i=t.length,r=new gr(e);for(let e=n?1:0;e<i;){const n=8<i-e?8:i-e,s=new gr(new Uint32Array([Number.parseInt(t.slice(e,e+n),10),0,0,0])),o=new gr(new Uint32Array([pr[n],0,0,0]));r.times(o),r.plus(s),e+=n}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,i=t.length;++n<i;)gr.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class vr extends ae{constructor(t,e,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof ii?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return ei({type:t,length:e})}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===g.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return ei({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class wr extends vr{constructor(t,e,n,i){super(new Uint8Array(0),e,n,i),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):Fn(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return nt(Uint8Array,nt(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return nt(Uint8Array,nt(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:n}=this;return kt.isTimestamp(t)||(kt.isInt(t)||kt.isTime(t))&&64===t.bitWidth||kt.isDate(t)&&t.unit===w.MILLISECOND?nt(Uint8Array,mr.convertArray(n[e])):kt.isDecimal(t)?nt(Uint8Array,gr.convertArray(n[e])):kt.isBinary(t)||kt.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t>>1]=Number.parseInt(e.slice(t,t+2),16);return n}(n[e]):kt.isBool(t)?Fn(n[e]):kt.isUtf8(t)?x(n[e].join("")):nt(Uint8Array,nt(t.ArrayType,n[e].map((t=>+t))))}}var _r,Ir,Tr,Sr,Nr,Or,Ar,Er;!function(t){t[t.BUFFER=0]="BUFFER"}(_r||(_r={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(Ir||(Ir={}));class Dr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new Dr).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Ir.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):_r.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Ir.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,_r.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return Dr.startBodyCompression(t),Dr.addCodec(t,e),Dr.addMethod(t,n),Dr.endBodyCompression(t)}}class Br{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class Fr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new Ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new Ur).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Fr).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Br).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Dr).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class Lr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new Lr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new Lr).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Ur).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(Tr||(Tr={}));class xr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new xr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new xr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Tr.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Tr.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return xr.startFloatingPoint(t),xr.addPrecision(t,e),xr.endFloatingPoint(t)}}class Mr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new Mr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new Mr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return Mr.startDecimal(t),Mr.addPrecision(t,e),Mr.addScale(t,n),Mr.addBitWidth(t,i),Mr.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(Sr||(Sr={}));class Rr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new Rr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new Rr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Sr.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Sr.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return Rr.startDate(t),Rr.addUnit(t,e),Rr.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(Nr||(Nr={}));class Cr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Cr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new Cr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nr.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Nr.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return Cr.startTime(t),Cr.addUnit(t,e),Cr.addBitWidth(t,n),Cr.endTime(t)}}class kr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new kr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new kr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nr.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Nr.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return kr.startTimestamp(t),kr.addUnit(t,e),kr.addTimezone(t,n),kr.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(Or||(Or={}));class Vr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new Vr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new Vr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Or.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Or.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return Vr.startInterval(t),Vr.addUnit(t,e),Vr.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(Ar||(Ar={}));class jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new jr).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ar.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Ar.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return jr.startUnion(t),jr.addMode(t,e),jr.addTypeIds(t,n),jr.endUnion(t)}}class Pr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new Pr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new Pr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return Pr.startFixedSizeBinary(t),Pr.addByteWidth(t,e),Pr.endFixedSizeBinary(t)}}class $r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new $r).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new $r).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return $r.startFixedSizeList(t),$r.addListSize(t,e),$r.endFixedSizeList(t)}}class zr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new zr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new zr).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return zr.startMap(t),zr.addKeysSorted(t,e),zr.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(Er||(Er={}));class Wr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new Wr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new Wr).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xi.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Er.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,xi.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Er.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,i,r,s){return Wr.startMessage(t),Wr.addVersion(t,e),Wr.addHeaderType(t,n),Wr.addHeader(t,i),Wr.addBodyLength(t,r),Wr.addCustomMetadata(t,s),Wr.endMessage(t)}}class Yr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Yr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new Yr).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Yr.startNull(t),Yr.endNull(t)}}class Kr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new Kr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new Kr).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Kr.startBinary(t),Kr.endBinary(t)}}class Hr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Hr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new Hr).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hr.startBool(t),Hr.endBool(t)}}class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Gr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new Gr).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Gr.startUtf8(t),Gr.endUtf8(t)}}class qr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new qr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new qr).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return qr.startList(t),qr.endList(t)}}class Zr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new Zr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new Zr).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Zr.startStruct_(t),Zr.endStruct_(t)}}var Jr=Ui;const Xr=new class extends ae{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return Yr.startNull(e),Yr.endNull(e)}visitInt(t,e){return Pi.startInt(e),Pi.addBitWidth(e,t.bitWidth),Pi.addIsSigned(e,t.isSigned),Pi.endInt(e)}visitFloat(t,e){return xr.startFloatingPoint(e),xr.addPrecision(e,t.precision),xr.endFloatingPoint(e)}visitBinary(t,e){return Kr.startBinary(e),Kr.endBinary(e)}visitBool(t,e){return Hr.startBool(e),Hr.endBool(e)}visitUtf8(t,e){return Gr.startUtf8(e),Gr.endUtf8(e)}visitDecimal(t,e){return Mr.startDecimal(e),Mr.addScale(e,t.scale),Mr.addPrecision(e,t.precision),Mr.addBitWidth(e,t.bitWidth),Mr.endDecimal(e)}visitDate(t,e){return Rr.startDate(e),Rr.addUnit(e,t.unit),Rr.endDate(e)}visitTime(t,e){return Cr.startTime(e),Cr.addUnit(e,t.unit),Cr.addBitWidth(e,t.bitWidth),Cr.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return kr.startTimestamp(e),kr.addUnit(e,t.unit),void 0!==n&&kr.addTimezone(e,n),kr.endTimestamp(e)}visitInterval(t,e){return Vr.startInterval(e),Vr.addUnit(e,t.unit),Vr.endInterval(e)}visitList(t,e){return qr.startList(e),qr.endList(e)}visitStruct(t,e){return Zr.startStruct_(e),Zr.endStruct_(e)}visitUnion(t,e){jr.startTypeIdsVector(e,t.typeIds.length);const n=jr.createTypeIdsVector(e,t.typeIds);return jr.startUnion(e),jr.addMode(e,t.mode),jr.addTypeIds(e,n),jr.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return $i.startDictionaryEncoding(e),$i.addId(e,new Jr(t.id,0)),$i.addIsOrdered(e,t.isOrdered),void 0!==n&&$i.addIndexType(e,n),$i.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Pr.startFixedSizeBinary(e),Pr.addByteWidth(e,t.byteWidth),Pr.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return $r.startFixedSizeList(e),$r.addListSize(e,t.listSize),$r.endFixedSizeList(e)}visitMap(t,e){return zr.startMap(e),zr.addKeysSorted(e,t.keysSorted),zr.endMap(e)}};function Qr(t){return new us(t.count,es(t.columns),ns(t.columns))}function ts(t,e){return(t.children||[]).filter(Boolean).map((t=>ii.fromJSON(t,e)))}function es(t){return(t||[]).reduce(((t,e)=>{return[...t,new fs(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...es(e.children)];var n}),[])}function ns(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new ds(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new ds(e.length,i.TYPE.length)),i.OFFSET&&e.push(new ds(e.length,i.OFFSET.length)),i.DATA&&e.push(new ds(e.length,i.DATA.length)),e=ns(i.children,e)}return e}function is(t){return new Map(Object.entries(t||{}))}function rs(t){return new jt(t.isSigned,t.bitWidth)}function ss(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new Vt;case"binary":return new zt;case"utf8":return new Wt;case"bool":return new Yt;case"list":return new Jt((e||[])[0]);case"struct":case"struct_":return new Xt(e||[])}switch(n){case"int":{const e=t.type;return new jt(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new $t(v[e.precision])}case"decimal":{const e=t.type;return new Kt(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new Ht(w[e.unit])}case"time":{const e=t.type;return new Gt(_[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new qt(_[e.unit],e.timezone)}case"interval":{const e=t.type;return new Zt(I[e.unit])}case"union":{const n=t.type;return new Qt(g[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new te(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new ee(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new ne((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var os=Ui,as=Vi,ls=ki;class cs{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const n=new cs(0,m.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case T.Schema:return ni.fromJSON(t);case T.RecordBatch:return us.fromJSON(t);case T.DictionaryBatch:return hs.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${T[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new ls(rt(t));const e=Wr.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),s=new cs(n,i,r);return s._createHeader=function(t,e){return()=>{switch(e){case T.Schema:return ni.decode(t.header(new Wi));case T.RecordBatch:return us.decode(t.header(new Ur),t.version());case T.DictionaryBatch:return hs.decode(t.header(new Lr),t.version())}throw new Error(`Unrecognized Message type: { name: ${T[e]}, type: ${e} }`)}}(e,r),s}static encode(t){const e=new as;let n=-1;return t.isSchema()?n=ni.encode(e,t.header()):t.isRecordBatch()?n=us.encode(e,t.header()):t.isDictionaryBatch()&&(n=hs.encode(e,t.header())),Wr.startMessage(e),Wr.addVersion(e,m.V4),Wr.addHeader(e,n),Wr.addHeaderType(e,t.headerType),Wr.addBodyLength(e,new os(t.bodyLength,0)),Wr.finishMessageBuffer(e,Wr.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof ni)return new cs(0,m.V4,T.Schema,t);if(t instanceof us)return new cs(e,m.V4,T.RecordBatch,t);if(t instanceof hs)return new cs(e,m.V4,T.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===T.Schema}isRecordBatch(){return this.headerType===T.RecordBatch}isDictionaryBatch(){return this.headerType===T.DictionaryBatch}}class us{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class hs{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class ds{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class fs{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function ps(t,e){const n=[];for(let i,r=-1,s=-1,o=t.childrenLength();++r<o;)(i=t.children(r))&&(n[++s]=ii.decode(i,e));return n}function ys(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function bs(t){return new jt(t.isSigned(),t.bitWidth())}function ms(t,e){const n=t.typeType();switch(n){case Ci.NONE:case Ci.Null:return new Vt;case Ci.Binary:return new zt;case Ci.Utf8:return new Wt;case Ci.Bool:return new Yt;case Ci.List:return new Jt((e||[])[0]);case Ci.Struct_:return new Xt(e||[])}switch(n){case Ci.Int:{const e=t.type(new Pi);return new jt(e.isSigned(),e.bitWidth())}case Ci.FloatingPoint:{const e=t.type(new xr);return new $t(e.precision())}case Ci.Decimal:{const e=t.type(new Mr);return new Kt(e.scale(),e.precision(),e.bitWidth())}case Ci.Date:{const e=t.type(new Rr);return new Ht(e.unit())}case Ci.Time:{const e=t.type(new Cr);return new Gt(e.unit(),e.bitWidth())}case Ci.Timestamp:{const e=t.type(new kr);return new qt(e.unit(),e.timezone())}case Ci.Interval:{const e=t.type(new Vr);return new Zt(e.unit())}case Ci.Union:{const n=t.type(new jr);return new Qt(n.mode(),n.typeIdsArray()||[],e||[])}case Ci.FixedSizeBinary:{const e=t.type(new Pr);return new te(e.byteWidth())}case Ci.FixedSizeList:{const n=t.type(new $r);return new ee(n.listSize(),(e||[])[0])}case Ci.Map:{const n=t.type(new zr);return new ne((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Ci[n]}" (${n})`)}ii.encode=function(t,e){let n=-1,i=-1,r=-1;const s=e.type;let o=e.typeId;kt.isDictionary(s)?(o=s.dictionary.typeId,r=Xr.visit(s,t),i=Xr.visit(s.dictionary,t)):i=Xr.visit(s,t);const a=(s.children||[]).map((e=>ii.encode(t,e))),l=zi.createChildrenVector(t,a),c=e.metadata&&e.metadata.size>0?zi.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return ji.startKeyValue(t),ji.addKey(t,i),ji.addValue(t,r),ji.endKeyValue(t)}))):-1;return e.name&&(n=t.createString(e.name)),zi.startField(t),zi.addType(t,i),zi.addTypeType(t,o),zi.addChildren(t,l),zi.addNullable(t,!!e.nullable),-1!==n&&zi.addName(t,n),-1!==r&&zi.addDictionary(t,r),-1!==c&&zi.addCustomMetadata(t,c),zi.endField(t)},ii.decode=function(t,e){let n,i,r,s,o,a;return e&&(a=t.dictionary())?e.has(n=a.id().low)?(s=(s=a.indexType())?bs(s):new Pt,o=new se(e.get(n),s,n,a.isOrdered()),i=new ii(t.name(),o,t.nullable(),ys(t))):(s=(s=a.indexType())?bs(s):new Pt,e.set(n,r=ms(t,ps(t,e))),o=new se(r,s,n,a.isOrdered()),i=new ii(t.name(),o,t.nullable(),ys(t))):(r=ms(t,ps(t,e)),i=new ii(t.name(),r,t.nullable(),ys(t))),i||null},ii.fromJSON=function(t,e){let n,i,r,s,o,a;return e&&(s=t.dictionary)?e.has(n=s.id)?(i=(i=s.indexType)?rs(i):new Pt,a=new se(e.get(n),i,n,s.isOrdered),r=new ii(t.name,a,t.nullable,is(t.customMetadata))):(i=(i=s.indexType)?rs(i):new Pt,e.set(n,o=ss(t,ts(t,e))),a=new se(o,i,n,s.isOrdered),r=new ii(t.name,a,t.nullable,is(t.customMetadata))):(o=ss(t,ts(t,e)),r=new ii(t.name,o,t.nullable,is(t.customMetadata))),r||null},ni.encode=function(t,e){const n=e.fields.map((e=>ii.encode(t,e)));Wi.startFieldsVector(t,n.length);const i=Wi.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?Wi.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return ji.startKeyValue(t),ji.addKey(t,i),ji.addValue(t,r),ji.endKeyValue(t)}))):-1;return Wi.startSchema(t),Wi.addFields(t,i),Wi.addEndianness(t,gs?Mi.Little:Mi.Big),-1!==r&&Wi.addCustomMetadata(t,r),Wi.endSchema(t)},ni.decode=function(t,e=new Map){const n=function(t,e){const n=[];for(let i,r=-1,s=-1,o=t.fieldsLength();++r<o;)(i=t.fields(r))&&(n[++s]=ii.decode(i,e));return n}(t,e);return new ni(n,ys(t),e)},ni.fromJSON=function(t,e=new Map){return new ni(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>ii.fromJSON(t,e)))}(t,e),is(t.customMetadata),e)},us.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];Ur.startNodesVector(t,n.length);for(const e of n.slice().reverse())fs.encode(t,e);const r=t.endVector();Ur.startBuffersVector(t,i.length);for(const e of i.slice().reverse())ds.encode(t,e);const s=t.endVector();return Ur.startRecordBatch(t),Ur.addLength(t,new os(e.length,0)),Ur.addNodes(t,r),Ur.addBuffers(t,s),Ur.endRecordBatch(t)},us.decode=function(t,e=m.V4){if(null!==t.compression())throw new Error("Record batch compression not implemented");return new us(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=fs.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,s=-1,o=t.buffersLength();++r<o;)(i=t.buffers(r))&&(e<m.V4&&(i.bb_pos+=8*(r+1)),n[++s]=ds.decode(i));return n}(t,e))},us.fromJSON=Qr,hs.encode=function(t,e){const n=us.encode(t,e.data);return Lr.startDictionaryBatch(t),Lr.addId(t,new os(e.id,0)),Lr.addIsDelta(t,e.isDelta),Lr.addData(t,n),Lr.endDictionaryBatch(t)},hs.decode=function(t,e=m.V4){return new hs(us.decode(t.data(),e),t.id(),t.isDelta())},hs.fromJSON=function(t){return new hs(Qr(t.data),t.id,t.isDelta)},fs.encode=function(t,e){return Fr.createFieldNode(t,new os(e.length,0),new os(e.nullCount,0))},fs.decode=function(t){return new fs(t.length(),t.nullCount())},ds.encode=function(t,e){return Br.createBuffer(t,new os(e.offset,0),new os(e.length,0))},ds.decode=function(t){return new ds(t.offset(),t.length())};const gs=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),vs=t=>`Expected ${T[t]} Message in stream, but was null or length 0.`,ws=t=>`Header pointer of flatbuffer-encoded ${T[t]} Message is null or length 0.`,_s=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Is=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Ts{constructor(t){this.source=t instanceof ar?t:new ar(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?nr:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(vs(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=rt(this.source.read(t));if(e.byteLength<t)throw new Error(Is(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=T.Schema,n=this.readMessage(e),i=null==n?void 0:n.header();if(t&&!i)throw new Error(ws(e));return i}readMetadataLength(){const t=this.source.read(Os),e=t&&new ki(t),n=(null==e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return nr;if(e.byteLength<t)throw new Error(_s(t,e.byteLength));return{done:!1,value:cs.decode(e)}}}class Ss{constructor(t,e){this.source=t instanceof lr?t:G(t)?new dr(t,e):new lr(t)}[Symbol.asyncIterator](){return this}next(){return d(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?nr:t}))}throw(t){return d(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return d(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return d(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(vs(t));return e.value}))}readMessageBody(t){return d(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=rt(yield this.source.read(t));if(e.byteLength<t)throw new Error(Is(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(t=!1){return d(this,void 0,void 0,(function*(){const e=T.Schema,n=yield this.readMessage(e),i=null==n?void 0:n.header();if(t&&!i)throw new Error(ws(e));return i}))}readMetadataLength(){return d(this,void 0,void 0,(function*(){const t=yield this.source.read(Os),e=t&&new ki(t),n=(null==e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}))}readMetadata(t){return d(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return nr;if(e.byteLength<t)throw new Error(_s(t,e.byteLength));return{done:!1,value:cs.decode(e)}}))}}class Ns extends Ts{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof ir?t:new ir(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:cs.fromJSON(t.schema,T.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:cs.fromJSON(e,T.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:cs.fromJSON(e,T.RecordBatch)}}return this._body=[],nr}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(vs(t));return e.value}readSchema(){const t=T.Schema,e=this.readMessage(t),n=null==e?void 0:e.header();if(!e||!n)throw new Error(ws(t));return n}}const Os=4,As="ARROW1",Es=new Uint8Array(As.length);for(let t=0;t<As.length;t+=1)Es[t]=As.codePointAt(t);function Ds(t,e=0){for(let n=-1,i=Es.length;++n<i;)if(Es[n]!==t[e+n])return!1;return!0}const Bs=Es.length,Fs=Bs+Os,Us=2*Bs+Os;class Ls extends rr{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return z(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Xi.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Xi.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ls?t:K(t)?function(t){return new xs(new zs(t))}(t):G(t)?function(t){return d(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),n=new dr(t,e);return e>=Us&&Ds(yield n.readAt(0,Bs+7&-8))?new Cs(new $s(n)):new Ms(new js(n))}))}(t):z(t)?(()=>d(this,void 0,void 0,(function*(){return yield Ls.from(yield t)})))():q(t)||J(t)||X(t)||Y(t)?function(t){return d(this,void 0,void 0,(function*(){const e=yield t.peek(Bs+7&-8);return e&&e.byteLength>=4?Ds(e)?new Rs(new Ps(yield t.read())):new Ms(new js(t)):new Ms(new js(function(){return p(this,arguments,(function*(){}))}()))}))}(new lr(t)):function(t){const e=t.peek(Bs+7&-8);return e&&e.byteLength>=4?Ds(e)?new Rs(new Ps(t.read())):new xs(new Vs(t)):new xs(new Vs(function*(){}()))}(new ar(t))}static readAll(t){return t instanceof Ls?t.isSync()?Ys(t):Ks(t):K(t)||ArrayBuffer.isView(t)||W(t)||H(t)?Ys(t):Ks(t)}}class xs extends Ls{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return p(this,arguments,(function*(){yield f(yield*y(b(this[Symbol.iterator]())))}))}}class Ms extends Ls{constructor(t){super(t),this._impl=t}readAll(){var t,e;return d(this,void 0,void 0,(function*(){const n=new Array;try{for(var i,r=b(this);!(i=yield r.next()).done;){const t=i.value;n.push(t)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&(yield e.call(r))}finally{if(t)throw t.error}}return n}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Rs extends xs{constructor(t){super(t),this._impl=t}}class Cs extends Ms{constructor(t){super(t),this._impl=t}}class ks{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),i=ei({type:new Xt(this.schema.fields),length:t.length,children:n});return new wi(this.schema,i)}_loadDictionaryBatch(t,e){const{id:n,isDelta:i}=t,{dictionaries:r,schema:s}=this,o=r.get(n);if(i||!o){const r=s.dictionaries.get(n),a=this._loadVectors(t.data,e,[r]);return(o&&i?o.concat(new Jn(a)):new Jn(a)).memoize()}return o.memoize()}_loadVectors(t,e,n){return new vr(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class Vs extends ks{constructor(t,e){super(e),this._reader=K(t)?new Ns(this._handle=t):new Ts(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Ws(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):nr}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):nr}next(){if(this.closed)return nr;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Ti(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class js extends ks{constructor(t,e){super(e),this._reader=new Ss(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return d(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return d(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=Ws(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return d(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):nr}))}return(t){return d(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):nr}))}next(){return d(this,void 0,void 0,(function*(){if(this.closed)return nr;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Ti(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return d(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class Ps extends Vs{constructor(t,e){super(t instanceof hr?t:new hr(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(T.RecordBatch);if(null==t?void 0:t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){var e;const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(T.DictionaryBatch);if(null==t?void 0:t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-Fs,n=t.readInt32(e),i=t.readAt(e-n,n);return qi.decode(i)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class $s extends js{constructor(t,...e){const n="number"!=typeof e[0]?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof dr?t:new dr(t,n),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return d(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return d(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(T.RecordBatch);if(null==t?void 0:t.isRecordBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}))}_readDictionaryBatch(t){var e;return d(this,void 0,void 0,(function*(){const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(T.DictionaryBatch);if(null==t?void 0:t.isDictionaryBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}))}_readFooter(){return d(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-Fs,n=yield t.readInt32(e),i=yield t.readAt(e-n,n);return qi.decode(i)}))}_readNextMessageAndValidate(t){return d(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class zs extends Vs{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new wr(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function Ws(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Ys(t){const e=Ls.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function Ks(t){return p(this,arguments,(function*(){const e=yield f(Ls.from(t));try{if(!(yield f(e.open({autoDestroy:!1}))).closed)do{yield yield f(e)}while(!(yield f(e.reset().open())).closed)}finally{yield f(e.cancel())}}))}function Hs(t){const e=Ls.from(t);return z(e)?(()=>d(this,void 0,void 0,(function*(){return new Oi(yield(yield e).readAll())})))():new Oi(e.readAll())}var Gs,qs;function Zs(t,e,n){let i,r,s=n;for(let n of t.fields){let t=n.localName;if(n.oneof){const o=s[n.oneof];if(null==o)continue;if(i=o[t],r=e[n.oneof],r.oneofKind=o.oneofKind,null==i){delete r[t];continue}}else if(i=s[t],r=e,null==i)continue;switch(n.kind){case"scalar":case"enum":n.repeat?r[t]=i.concat():r[t]=i;break;case"message":let e=n.T();if(n.repeat)for(let n=0;n<i.length;n++)r[t][n]=e.create(i[n]);else void 0===r[t]?r[t]=e.create(i):e.mergePartial(r[t],i);break;case"map":switch(n.V.kind){case"scalar":case"enum":Object.assign(r[t],i);break;case"message":let e=n.V.T();for(let n of Object.keys(i))r[t][n]=e.create(i[n])}}}}!function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(n,i,r,s,o)=>{(e(i)?i[t.symbol]:i[t.symbol]=[]).push({no:r,wireType:s,data:o})},t.onWrite=(e,n,i)=>{for(let{no:e,wireType:r,data:s}of t.list(n))i.tag(e,r).raw(s)},t.list=(n,i)=>{if(e(n)){let e=n[t.symbol];return i?e.filter((t=>t.no==i)):e}return[]},t.last=(e,n)=>t.list(e,n).slice(-1)[0];const e=e=>e&&Array.isArray(e[t.symbol])}(Gs||(Gs={})),function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"}(qs||(qs={}));const Js=Symbol.for("protobuf-ts/message-type");function Xs(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);"_"==r?e=!0:/\d/.test(r)?(n.push(r),e=!0):e?(n.push(r.toUpperCase()),e=!1):0==i?n.push(r.toLowerCase()):n.push(r)}return n.join("")}var Qs,to,eo;function no(t){var e,n,i,r;return t.localName=null!==(e=t.localName)&&void 0!==e?e:Xs(t.name),t.jsonName=null!==(n=t.jsonName)&&void 0!==n?n:Xs(t.name),t.repeat=null!==(i=t.repeat)&&void 0!==i?i:eo.NO,t.opt=null!==(r=t.opt)&&void 0!==r?r:!t.repeat&&!t.oneof&&"message"==t.kind,t}function io(t){if("object"!=typeof t||null===t||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return void 0!==t[t.oneofKind]&&2==Object.keys(t).length;case"undefined":return 1==Object.keys(t).length;default:return!1}}!function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"}(Qs||(Qs={})),function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"}(to||(to={})),function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"}(eo||(eo={}));class ro{constructor(t){var e;this.fields=null!==(e=t.fields)&&void 0!==e?e:[]}prepare(){if(this.data)return;const t=[],e=[],n=[];for(let i of this.fields)if(i.oneof)n.includes(i.oneof)||(n.push(i.oneof),t.push(i.oneof),e.push(i.oneof));else switch(e.push(i.localName),i.kind){case"scalar":case"enum":i.opt&&!i.repeat||t.push(i.localName);break;case"message":i.repeat&&t.push(i.localName);break;case"map":t.push(i.localName)}this.data={req:t,known:e,oneofs:Object.values(n)}}is(t,e,n=!1){if(e<0)return!0;if(null==t||"object"!=typeof t)return!1;this.prepare();let i=Object.keys(t),r=this.data;if(i.length<r.req.length||r.req.some((t=>!i.includes(t))))return!1;if(!n&&i.some((t=>!r.known.includes(t))))return!1;if(e<1)return!0;for(const i of r.oneofs){const r=t[i];if(!io(r))return!1;if(void 0===r.oneofKind)continue;const s=this.fields.find((t=>t.localName===r.oneofKind));if(!s)return!1;if(!this.field(r[r.oneofKind],s,n,e))return!1}for(const i of this.fields)if(void 0===i.oneof&&!this.field(t[i.localName],i,n,e))return!1;return!0}field(t,e,n,i){let r=e.repeat;switch(e.kind){case"scalar":return void 0===t?e.opt:r?this.scalars(t,e.T,i,e.L):this.scalar(t,e.T,e.L);case"enum":return void 0===t?e.opt:r?this.scalars(t,Qs.INT32,i):this.scalar(t,Qs.INT32);case"message":return void 0===t||(r?this.messages(t,e.T(),n,i):this.message(t,e.T(),n,i));case"map":if("object"!=typeof t||null===t)return!1;if(i<2)return!0;if(!this.mapKeys(t,e.K,i))return!1;switch(e.V.kind){case"scalar":return this.scalars(Object.values(t),e.V.T,i,e.V.L);case"enum":return this.scalars(Object.values(t),Qs.INT32,i);case"message":return this.messages(Object.values(t),e.V.T(),n,i)}}return!0}message(t,e,n,i){return n?e.isAssignable(t,i):e.is(t,i)}messages(t,e,n,i){if(!Array.isArray(t))return!1;if(i<2)return!0;if(n){for(let n=0;n<t.length&&n<i;n++)if(!e.isAssignable(t[n],i-1))return!1}else for(let n=0;n<t.length&&n<i;n++)if(!e.is(t[n],i-1))return!1;return!0}scalar(t,e,n){let i=typeof t;switch(e){case Qs.UINT64:case Qs.FIXED64:case Qs.INT64:case Qs.SFIXED64:case Qs.SINT64:switch(n){case to.BIGINT:return"bigint"==i;case to.NUMBER:return"number"==i&&!isNaN(t);default:return"string"==i}case Qs.BOOL:return"boolean"==i;case Qs.STRING:return"string"==i;case Qs.BYTES:return t instanceof Uint8Array;case Qs.DOUBLE:case Qs.FLOAT:return"number"==i&&!isNaN(t);default:return"number"==i&&Number.isInteger(t)}}scalars(t,e,n,i){if(!Array.isArray(t))return!1;if(n<2)return!0;if(Array.isArray(t))for(let r=0;r<t.length&&r<n;r++)if(!this.scalar(t[r],e,i))return!1;return!0}mapKeys(t,e,n){let i=Object.keys(t);switch(e){case Qs.INT32:case Qs.FIXED32:case Qs.SFIXED32:case Qs.SINT32:case Qs.UINT32:return this.scalars(i.slice(0,n).map((t=>parseInt(t))),e,n);case Qs.BOOL:return this.scalars(i.slice(0,n).map((t=>"true"==t||"false"!=t&&t)),e,n);default:return this.scalars(i,e,n,to.STRING)}}}function so(t){let e=typeof t;if("object"==e){if(Array.isArray(t))return"array";if(null===t)return"null"}return e}let oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ao=[];for(let t=0;t<oo.length;t++)ao[oo[t].charCodeAt(0)]=t;function lo(){let t=0,e=0;for(let n=0;n<28;n+=7){let i=this.buf[this.pos++];if(t|=(127&i)<<n,0==(128&i))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(15&n)<<28,e=(112&n)>>4,0==(128&n))return this.assertBounds(),[t,e];for(let n=3;n<=31;n+=7){let i=this.buf[this.pos++];if(e|=(127&i)<<n,0==(128&i))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function co(t,e,n){for(let i=0;i<28;i+=7){const r=t>>>i,s=!(r>>>7==0&&0==e),o=255&(s?128|r:r);if(n.push(o),!s)return}const i=t>>>28&15|(7&e)<<4,r=!(e>>3==0);if(n.push(255&(r?128|i:i)),r){for(let t=3;t<31;t+=7){const i=e>>>t,r=!(i>>>7==0),s=255&(r?128|i:i);if(n.push(s),!r)return}n.push(e>>>31&1)}}ao["-".charCodeAt(0)]=oo.indexOf("+"),ao["_".charCodeAt(0)]=oo.indexOf("/");const uo=4294967296;function ho(t){let e="-"==t[0];e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function s(e,s){const o=Number(t.slice(e,s));r*=n,i=i*n+o,i>=uo&&(r+=i/uo|0,i%=uo)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[e,i,r]}function fo(t,e){if(e<=2097151)return""+(uo*e+t);let n=(t>>>24|e<<8)>>>0&16777215,i=e>>16&65535,r=(16777215&t)+6777216*n+6710656*i,s=n+8147497*i,o=2*i,a=1e7;function l(t,e){let n=t?String(t):"";return e?"0000000".slice(n.length)+n:n}return r>=a&&(s+=Math.floor(r/a),r%=a),s>=a&&(o+=Math.floor(s/a),s%=a),l(o,0)+l(s,o)+l(r,1)}function po(t,e){if(t>=0){for(;t>127;)e.push(127&t|128),t>>>=7;e.push(t)}else{for(let n=0;n<9;n++)e.push(127&t|128),t>>=7;e.push(1)}}function yo(){let t=this.buf[this.pos++],e=127&t;if(0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<7,0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<14,0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<21,0==(128&t))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(15&t)<<28;for(let e=5;0!=(128&t)&&e<10;e++)t=this.buf[this.pos++];if(0!=(128&t))throw new Error("invalid varint");return this.assertBounds(),e>>>0}const bo=function(){const t=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof t.getBigInt64&&"function"==typeof t.getBigUint64&&"function"==typeof t.setBigInt64&&"function"==typeof t.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}();function mo(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const go=/^-?[0-9]+$/,vo=4294967296;class wo{constructor(t,e){this.lo=0|t,this.hi=0|e}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let t=this.hi*vo+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}}class _o extends wo{static from(t){if(bo)switch(typeof t){case"string":if("0"==t)return this.ZERO;if(""==t)throw new Error("string is no integer");t=bo.C(t);case"number":if(0===t)return this.ZERO;t=bo.C(t);case"bigint":if(!t)return this.ZERO;if(t<bo.UMIN)throw new Error("signed value for ulong");if(t>bo.UMAX)throw new Error("ulong too large");return bo.V.setBigUint64(0,t,!0),new _o(bo.V.getInt32(0,!0),bo.V.getInt32(4,!0))}else switch(typeof t){case"string":if("0"==t)return this.ZERO;if(t=t.trim(),!go.test(t))throw new Error("string is no integer");let[e,n,i]=ho(t);if(e)throw new Error("signed value");return new _o(n,i);case"number":if(0==t)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new _o(t,t/vo)}throw new Error("unknown value "+typeof t)}toString(){return bo?this.toBigInt().toString():fo(this.lo,this.hi)}toBigInt(){return mo(bo),bo.V.setInt32(0,this.lo,!0),bo.V.setInt32(4,this.hi,!0),bo.V.getBigUint64(0,!0)}}_o.ZERO=new _o(0,0);class Io extends wo{static from(t){if(bo)switch(typeof t){case"string":if("0"==t)return this.ZERO;if(""==t)throw new Error("string is no integer");t=bo.C(t);case"number":if(0===t)return this.ZERO;t=bo.C(t);case"bigint":if(!t)return this.ZERO;if(t<bo.MIN)throw new Error("ulong too small");if(t>bo.MAX)throw new Error("ulong too large");return bo.V.setBigInt64(0,t,!0),new Io(bo.V.getInt32(0,!0),bo.V.getInt32(4,!0))}else switch(typeof t){case"string":if("0"==t)return this.ZERO;if(t=t.trim(),!go.test(t))throw new Error("string is no integer");let[e,n,i]=ho(t),r=new Io(n,i);return e?r.negate():r;case"number":if(0==t)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new Io(t,t/vo):new Io(-t,-t/vo).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let t=~this.hi,e=this.lo;return e?e=1+~e:t+=1,new Io(e,t)}toString(){if(bo)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+fo(t.lo,t.hi)}return fo(this.lo,this.hi)}toBigInt(){return mo(bo),bo.V.setInt32(0,this.lo,!0),bo.V.setInt32(4,this.hi,!0),bo.V.getBigInt64(0,!0)}}function To(t,e){if(!t)throw new Error(e)}function So(t){if("number"!=typeof t)throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>2147483647||t<-2147483648)throw new Error("invalid int 32: "+t)}function No(t){if("number"!=typeof t)throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>4294967295||t<0)throw new Error("invalid uint 32: "+t)}function Oo(t){if("number"!=typeof t)throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>34028234663852886e22||t<-34028234663852886e22))throw new Error("invalid float 32: "+t)}function Ao(t,e){switch(e){case to.BIGINT:return t.toBigInt();case to.NUMBER:return t.toNumber();default:return t.toString()}}Io.ZERO=new Io(0,0);class Eo{constructor(t){this.info=t}prepare(){var t;if(void 0===this.fMap){this.fMap={};const e=null!==(t=this.info.fields)&&void 0!==t?t:[];for(const t of e)this.fMap[t.name]=t,this.fMap[t.jsonName]=t,this.fMap[t.localName]=t}}assert(t,e,n){if(!t){let t=so(n);throw"number"!=t&&"boolean"!=t||(t=n.toString()),new Error(`Cannot parse JSON ${t} for ${this.info.typeName}#${e}`)}}read(t,e,n){this.prepare();const i=[];for(const[s,o]of Object.entries(t)){const t=this.fMap[s];if(!t){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const a=t.localName;let l;if(t.oneof){if(i.includes(t.oneof))throw new Error(`Multiple members of the oneof group "${t.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(t.oneof),l=e[t.oneof]={oneofKind:a}}else l=e;if("map"==t.kind){if(null===o)continue;this.assert(null!==(r=o)&&"object"==typeof r&&!Array.isArray(r),t.name,o);const e=l[a];for(const[i,r]of Object.entries(o)){let s;switch(this.assert(null!==r,t.name+" map value",null),t.V.kind){case"message":s=t.V.T().internalJsonRead(r,n);break;case"enum":if(s=this.enum(t.V.T(),r,t.name,n.ignoreUnknownFields),!1===s)continue;break;case"scalar":s=this.scalar(r,t.V.T,t.V.L,t.name)}this.assert(void 0!==s,t.name+" map value",r);let o=i;t.K==Qs.BOOL&&(o="true"==o||"false"!=o&&o),o=this.scalar(o,t.K,to.STRING,t.name).toString(),e[o]=s}}else if(t.repeat){if(null===o)continue;this.assert(Array.isArray(o),t.name,o);const e=l[a];for(const i of o){let r;switch(this.assert(null!==i,t.name,null),t.kind){case"message":r=t.T().internalJsonRead(i,n);break;case"enum":if(r=this.enum(t.T(),i,t.name,n.ignoreUnknownFields),!1===r)continue;break;case"scalar":r=this.scalar(i,t.T,t.L,t.name)}this.assert(void 0!==r,t.name,o),e.push(r)}}else switch(t.kind){case"message":if(null===o&&"google.protobuf.Value"!=t.T().typeName){this.assert(void 0===t.oneof,t.name+" (oneof member)",null);continue}l[a]=t.T().internalJsonRead(o,n,l[a]);break;case"enum":let e=this.enum(t.T(),o,t.name,n.ignoreUnknownFields);if(!1===e)continue;l[a]=e;break;case"scalar":l[a]=this.scalar(o,t.T,t.L,t.name)}}var r}enum(t,e,n,i){if("google.protobuf.NullValue"==t[0]&&To(null===e,`Unable to parse field ${this.info.typeName}#${n}, enum ${t[0]} only accepts null.`),null===e)return 0;switch(typeof e){case"number":return To(Number.isInteger(e),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${e}.`),e;case"string":let r=e;t[2]&&e.substring(0,t[2].length)===t[2]&&(r=e.substring(t[2].length));let s=t[1][r];return(void 0!==s||!i)&&(To("number"==typeof s,`Unable to parse field ${this.info.typeName}#${n}, enum ${t[0]} has no value for "${e}".`),s)}To(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof e}".`)}scalar(t,e,n,i){let r;try{switch(e){case Qs.DOUBLE:case Qs.FLOAT:if(null===t)return 0;if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t){r="empty string";break}if("string"==typeof t&&t.trim().length!==t.length){r="extra whitespace";break}if("string"!=typeof t&&"number"!=typeof t)break;let i=Number(t);if(Number.isNaN(i)){r="not a number";break}if(!Number.isFinite(i)){r="too large or small";break}return e==Qs.FLOAT&&Oo(i),i;case Qs.INT32:case Qs.FIXED32:case Qs.SFIXED32:case Qs.SINT32:case Qs.UINT32:if(null===t)return 0;let s;if("number"==typeof t?s=t:""===t?r="empty string":"string"==typeof t&&(t.trim().length!==t.length?r="extra whitespace":s=Number(t)),void 0===s)break;return e==Qs.UINT32?No(s):So(s),s;case Qs.INT64:case Qs.SFIXED64:case Qs.SINT64:if(null===t)return Ao(Io.ZERO,n);if("number"!=typeof t&&"string"!=typeof t)break;return Ao(Io.from(t),n);case Qs.FIXED64:case Qs.UINT64:if(null===t)return Ao(_o.ZERO,n);if("number"!=typeof t&&"string"!=typeof t)break;return Ao(_o.from(t),n);case Qs.BOOL:if(null===t)return!1;if("boolean"!=typeof t)break;return t;case Qs.STRING:if(null===t)return"";if("string"!=typeof t){r="extra whitespace";break}try{encodeURIComponent(t)}catch(r){r="invalid UTF8";break}return t;case Qs.BYTES:if(null===t||""===t)return new Uint8Array(0);if("string"!=typeof t)break;return function(t){let e=3*t.length/4;"="==t[t.length-2]?e-=2:"="==t[t.length-1]&&(e-=1);let n,i=new Uint8Array(e),r=0,s=0,o=0;for(let e=0;e<t.length;e++){if(n=ao[t.charCodeAt(e)],void 0===n)switch(t[e]){case"=":s=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:o=n,s=1;break;case 1:i[r++]=o<<2|(48&n)>>4,o=n,s=2;break;case 2:i[r++]=(15&o)<<4|(60&n)>>2,o=n,s=3;break;case 3:i[r++]=(3&o)<<6|n,s=0}}if(1==s)throw Error("invalid base64 string.");return i.subarray(0,r)}(t)}}catch(t){r=t.message}this.assert(!1,i+(r?" - "+r:""),t)}}class Do{constructor(t){var e;this.fields=null!==(e=t.fields)&&void 0!==e?e:[]}write(t,e){const n={},i=t;for(const t of this.fields){if(!t.oneof){let r=this.field(t,i[t.localName],e);void 0!==r&&(n[e.useProtoFieldName?t.name:t.jsonName]=r);continue}const r=i[t.oneof];if(r.oneofKind!==t.localName)continue;const s="scalar"==t.kind||"enum"==t.kind?Object.assign(Object.assign({},e),{emitDefaultValues:!0}):e;let o=this.field(t,r[t.localName],s);To(void 0!==o),n[e.useProtoFieldName?t.name:t.jsonName]=o}return n}field(t,e,n){let i;if("map"==t.kind){To("object"==typeof e&&null!==e);const r={};switch(t.V.kind){case"scalar":for(const[n,i]of Object.entries(e)){const e=this.scalar(t.V.T,i,t.name,!1,!0);To(void 0!==e),r[n.toString()]=e}break;case"message":const i=t.V.T();for(const[s,o]of Object.entries(e)){const e=this.message(i,o,t.name,n);To(void 0!==e),r[s.toString()]=e}break;case"enum":const s=t.V.T();for(const[i,o]of Object.entries(e)){To(void 0===o||"number"==typeof o);const e=this.enum(s,o,t.name,!1,!0,n.enumAsInteger);To(void 0!==e),r[i.toString()]=e}}(n.emitDefaultValues||Object.keys(r).length>0)&&(i=r)}else if(t.repeat){To(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let n=0;n<e.length;n++){const i=this.scalar(t.T,e[n],t.name,t.opt,!0);To(void 0!==i),r.push(i)}break;case"enum":const i=t.T();for(let s=0;s<e.length;s++){To(void 0===e[s]||"number"==typeof e[s]);const o=this.enum(i,e[s],t.name,t.opt,!0,n.enumAsInteger);To(void 0!==o),r.push(o)}break;case"message":const s=t.T();for(let i=0;i<e.length;i++){const o=this.message(s,e[i],t.name,n);To(void 0!==o),r.push(o)}}(n.emitDefaultValues||r.length>0||n.emitDefaultValues)&&(i=r)}else switch(t.kind){case"scalar":i=this.scalar(t.T,e,t.name,t.opt,n.emitDefaultValues);break;case"enum":i=this.enum(t.T(),e,t.name,t.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":i=this.message(t.T(),e,t.name,n)}return i}enum(t,e,n,i,r,s){if("google.protobuf.NullValue"==t[0])return null;if(void 0!==e){if(0!==e||r||i)return To("number"==typeof e),To(Number.isInteger(e)),s||!t[1].hasOwnProperty(e)?e:t[2]?t[2]+t[1][e]:t[1][e]}else To(i)}message(t,e,n,i){return void 0===e?i.emitDefaultValues?null:void 0:t.internalJsonWrite(e,i)}scalar(t,e,n,i,r){if(void 0===e)return void To(i);const s=r||i;switch(t){case Qs.INT32:case Qs.SFIXED32:case Qs.SINT32:return 0===e?s?0:void 0:(So(e),e);case Qs.FIXED32:case Qs.UINT32:return 0===e?s?0:void 0:(No(e),e);case Qs.FLOAT:Oo(e);case Qs.DOUBLE:return 0===e?s?0:void 0:(To("number"==typeof e),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e);case Qs.STRING:return""===e?s?"":void 0:(To("string"==typeof e),e);case Qs.BOOL:return!1===e?!s&&void 0:(To("boolean"==typeof e),e);case Qs.UINT64:case Qs.FIXED64:To("number"==typeof e||"string"==typeof e||"bigint"==typeof e);let t=_o.from(e);if(t.isZero()&&!s)return;return t.toString();case Qs.INT64:case Qs.SFIXED64:case Qs.SINT64:To("number"==typeof e||"string"==typeof e||"bigint"==typeof e);let n=Io.from(e);if(n.isZero()&&!s)return;return n.toString();case Qs.BYTES:return To(e instanceof Uint8Array),e.byteLength?function(t){let e,n="",i=0,r=0;for(let s=0;s<t.length;s++)switch(e=t[s],i){case 0:n+=oo[e>>2],r=(3&e)<<4,i=1;break;case 1:n+=oo[r|e>>4],r=(15&e)<<2,i=2;break;case 2:n+=oo[r|e>>6],n+=oo[63&e],i=0}return i&&(n+=oo[r],n+="=",1==i&&(n+="=")),n}(e):s?"":void 0}}}function Bo(t,e=to.STRING){switch(t){case Qs.BOOL:return!1;case Qs.UINT64:case Qs.FIXED64:return Ao(_o.ZERO,e);case Qs.INT64:case Qs.SFIXED64:case Qs.SINT64:return Ao(Io.ZERO,e);case Qs.DOUBLE:case Qs.FLOAT:return 0;case Qs.BYTES:return new Uint8Array(0);case Qs.STRING:return"";default:return 0}}class Fo{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){const e=null!==(t=this.info.fields)&&void 0!==t?t:[];this.fieldNoToField=new Map(e.map((t=>[t.no,t])))}}read(t,e,n,i){this.prepare();const r=void 0===i?t.len:t.pos+i;for(;t.pos<r;){const[i,r]=t.tag(),s=this.fieldNoToField.get(i);if(!s){let s=n.readUnknownField;if("throw"==s)throw new Error(`Unknown field ${i} (wire type ${r}) for ${this.info.typeName}`);let o=t.skip(r);!1!==s&&(!0===s?Gs.onRead:s)(this.info.typeName,e,i,r,o);continue}let o=e,a=s.repeat,l=s.localName;switch(s.oneof&&(o=o[s.oneof],o.oneofKind!==l&&(o=e[s.oneof]={oneofKind:l})),s.kind){case"scalar":case"enum":let e="enum"==s.kind?Qs.INT32:s.T,i="scalar"==s.kind?s.L:void 0;if(a){let n=o[l];if(r==qs.LengthDelimited&&e!=Qs.STRING&&e!=Qs.BYTES){let r=t.uint32()+t.pos;for(;t.pos<r;)n.push(this.scalar(t,e,i))}else n.push(this.scalar(t,e,i))}else o[l]=this.scalar(t,e,i);break;case"message":if(a){let e=o[l],i=s.T().internalBinaryRead(t,t.uint32(),n);e.push(i)}else o[l]=s.T().internalBinaryRead(t,t.uint32(),n,o[l]);break;case"map":let[c,u]=this.mapEntry(s,t,n);o[l][c]=u}}}mapEntry(t,e,n){let i,r,s=e.uint32(),o=e.pos+s;for(;e.pos<o;){let[s,o]=e.tag();switch(s){case 1:i=t.K==Qs.BOOL?e.bool().toString():this.scalar(e,t.K,to.STRING);break;case 2:switch(t.V.kind){case"scalar":r=this.scalar(e,t.V.T,t.V.L);break;case"enum":r=e.int32();break;case"message":r=t.V.T().internalBinaryRead(e,e.uint32(),n)}break;default:throw new Error(`Unknown field ${s} (wire type ${o}) in map entry for ${this.info.typeName}#${t.name}`)}}if(void 0===i){let e=Bo(t.K);i=t.K==Qs.BOOL?e.toString():e}if(void 0===r)switch(t.V.kind){case"scalar":r=Bo(t.V.T,t.V.L);break;case"enum":r=0;break;case"message":r=t.V.T().create()}return[i,r]}scalar(t,e,n){switch(e){case Qs.INT32:return t.int32();case Qs.STRING:return t.string();case Qs.BOOL:return t.bool();case Qs.DOUBLE:return t.double();case Qs.FLOAT:return t.float();case Qs.INT64:return Ao(t.int64(),n);case Qs.UINT64:return Ao(t.uint64(),n);case Qs.FIXED64:return Ao(t.fixed64(),n);case Qs.FIXED32:return t.fixed32();case Qs.BYTES:return t.bytes();case Qs.UINT32:return t.uint32();case Qs.SFIXED32:return t.sfixed32();case Qs.SFIXED64:return Ao(t.sfixed64(),n);case Qs.SINT32:return t.sint32();case Qs.SINT64:return Ao(t.sint64(),n)}}}class Uo{constructor(t){this.info=t}prepare(){if(!this.fields){const t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort(((t,e)=>t.no-e.no))}}write(t,e,n){this.prepare();for(const i of this.fields){let r,s,o=i.repeat,a=i.localName;if(i.oneof){const e=t[i.oneof];if(e.oneofKind!==a)continue;r=e[a],s=!0}else r=t[a],s=!1;switch(i.kind){case"scalar":case"enum":let t="enum"==i.kind?Qs.INT32:i.T;if(o)if(To(Array.isArray(r)),o==eo.PACKED)this.packed(e,t,i.no,r);else for(const n of r)this.scalar(e,t,i.no,n,!0);else void 0===r?To(i.opt):this.scalar(e,t,i.no,r,s||i.opt);break;case"message":if(o){To(Array.isArray(r));for(const t of r)this.message(e,n,i.T(),i.no,t)}else this.message(e,n,i.T(),i.no,r);break;case"map":To("object"==typeof r&&null!==r);for(const[t,s]of Object.entries(r))this.mapEntry(e,n,i,t,s)}}let i=n.writeUnknownFields;!1!==i&&(!0===i?Gs.onWrite:i)(this.info.typeName,t,e)}mapEntry(t,e,n,i,r){t.tag(n.no,qs.LengthDelimited),t.fork();let s=i;switch(n.K){case Qs.INT32:case Qs.FIXED32:case Qs.UINT32:case Qs.SFIXED32:case Qs.SINT32:s=Number.parseInt(i);break;case Qs.BOOL:To("true"==i||"false"==i),s="true"==i}switch(this.scalar(t,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(t,n.V.T,2,r,!0);break;case"enum":this.scalar(t,Qs.INT32,2,r,!0);break;case"message":this.message(t,e,n.V.T(),2,r)}t.join()}message(t,e,n,i,r){void 0!==r&&(n.internalBinaryWrite(r,t.tag(i,qs.LengthDelimited).fork(),e),t.join())}scalar(t,e,n,i,r){let[s,o,a]=this.scalarInfo(e,i);a&&!r||(t.tag(n,s),t[o](i))}packed(t,e,n,i){if(!i.length)return;To(e!==Qs.BYTES&&e!==Qs.STRING),t.tag(n,qs.LengthDelimited),t.fork();let[,r]=this.scalarInfo(e);for(let e=0;e<i.length;e++)t[r](i[e]);t.join()}scalarInfo(t,e){let n,i=qs.Varint,r=void 0===e,s=0===e;switch(t){case Qs.INT32:n="int32";break;case Qs.STRING:s=r||!e.length,i=qs.LengthDelimited,n="string";break;case Qs.BOOL:s=!1===e,n="bool";break;case Qs.UINT32:n="uint32";break;case Qs.DOUBLE:i=qs.Bit64,n="double";break;case Qs.FLOAT:i=qs.Bit32,n="float";break;case Qs.INT64:s=r||Io.from(e).isZero(),n="int64";break;case Qs.UINT64:s=r||_o.from(e).isZero(),n="uint64";break;case Qs.FIXED64:s=r||_o.from(e).isZero(),i=qs.Bit64,n="fixed64";break;case Qs.BYTES:s=r||!e.byteLength,i=qs.LengthDelimited,n="bytes";break;case Qs.FIXED32:i=qs.Bit32,n="fixed32";break;case Qs.SFIXED32:i=qs.Bit32,n="sfixed32";break;case Qs.SFIXED64:s=r||Io.from(e).isZero(),i=qs.Bit64,n="sfixed64";break;case Qs.SINT32:n="sint32";break;case Qs.SINT64:s=r||Io.from(e).isZero(),n="sint64"}return[i,n,r||s]}}const Lo={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},xo={ignoreUnknownFields:!1},Mo=Object.values;function Ro(t,e,n){if(e===n)return!0;if(t!==Qs.BYTES)return!1;let i=e,r=n;if(i.length!==r.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=r[t])return!1;return!0}function Co(t,e,n){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!Ro(t,e[i],n[i]))return!1;return!0}function ko(t,e,n){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t.equals(e[i],n[i]))return!1;return!0}const Vo={writeUnknownFields:!0,writerFactory:()=>new jo};class jo{constructor(t){this.stack=[],this.textEncoder=null!=t?t:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let e=0;e<this.chunks.length;e++)t+=this.chunks[e].length;let e=new Uint8Array(t),n=0;for(let t=0;t<this.chunks.length;t++)e.set(this.chunks[t],n),n+=this.chunks[t].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(No(t);t>127;)this.buf.push(127&t|128),t>>>=7;return this.buf.push(t),this}int32(t){return So(t),po(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){Oo(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){No(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){So(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return So(t),po(t=(t<<1^t>>31)>>>0,this.buf),this}sfixed64(t){let e=new Uint8Array(8),n=new DataView(e.buffer),i=Io.from(t);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),n=new DataView(e.buffer),i=_o.from(t);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(e)}int64(t){let e=Io.from(t);return co(e.lo,e.hi,this.buf),this}sint64(t){let e=Io.from(t),n=e.hi>>31;return co(e.lo<<1^n,(e.hi<<1|e.lo>>>31)^n,this.buf),this}uint64(t){let e=_o.from(t);return co(e.lo,e.hi,this.buf),this}}const Po={readUnknownField:!0,readerFactory:t=>new $o(t)};class $o{constructor(t,e){this.varint64=lo,this.uint32=yo,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=null!=e?e:new TextDecoder("utf-8",{fatal:!0})}tag(){let t=this.uint32(),e=t>>>3,n=7&t;if(e<=0||n<0||n>5)throw new Error("illegal tag: field no "+e+" wire type "+n);return[e,n]}skip(t){let e=this.pos;switch(t){case qs.Varint:for(;128&this.buf[this.pos++];);break;case qs.Bit64:this.pos+=4;case qs.Bit32:this.pos+=4;break;case qs.LengthDelimited:let e=this.uint32();this.pos+=e;break;case qs.StartGroup:let n;for(;(n=this.tag()[1])!==qs.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(e,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let t=this.uint32();return t>>>1^-(1&t)}int64(){return new Io(...this.varint64())}uint64(){return new _o(...this.varint64())}sint64(){let[t,e]=this.varint64(),n=-(1&t);return t=(t>>>1|(1&e)<<31)^n,e=e>>>1^n,new Io(t,e)}bool(){let[t,e]=this.varint64();return 0!==t||0!==e}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new _o(this.sfixed32(),this.sfixed32())}sfixed64(){return new Io(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}class zo{constructor(t,e,n){this.defaultCheckDepth=16,this.typeName=t,this.fields=e.map(no),this.options=null!=n?n:{},this.refTypeCheck=new ro(this),this.refJsonReader=new Eo(this),this.refJsonWriter=new Do(this),this.refBinReader=new Fo(this),this.refBinWriter=new Uo(this)}create(t){let e=function(t){const e={};Object.defineProperty(e,Js,{enumerable:!1,value:t});for(let n of t.fields){let t=n.localName;if(!n.opt)if(n.oneof)e[n.oneof]={oneofKind:void 0};else if(n.repeat)e[t]=[];else switch(n.kind){case"scalar":e[t]=Bo(n.T,n.L);break;case"enum":e[t]=0;break;case"map":e[t]={}}}return e}(this);return void 0!==t&&Zs(this,e,t),e}clone(t){let e=this.create();return Zs(this,e,t),e}equals(t,e){return function(t,e,n){if(e===n)return!0;if(!e||!n)return!1;for(let i of t.fields){let t=i.localName,r=i.oneof?e[i.oneof][t]:e[t],s=i.oneof?n[i.oneof][t]:n[t];switch(i.kind){case"enum":case"scalar":let t="enum"==i.kind?Qs.INT32:i.T;if(!(i.repeat?Co(t,r,s):Ro(t,r,s)))return!1;break;case"map":if(!("message"==i.V.kind?ko(i.V.T(),Mo(r),Mo(s)):Co("enum"==i.V.kind?Qs.INT32:i.V.T,Mo(r),Mo(s))))return!1;break;case"message":let e=i.T();if(!(i.repeat?ko(e,r,s):e.equals(r,s)))return!1}}return!0}(this,t,e)}is(t,e=this.defaultCheckDepth){return this.refTypeCheck.is(t,e,!1)}isAssignable(t,e=this.defaultCheckDepth){return this.refTypeCheck.is(t,e,!0)}mergePartial(t,e){Zs(this,t,e)}fromBinary(t,e){let n=function(t){return t?Object.assign(Object.assign({},Po),t):Po}(e);return this.internalBinaryRead(n.readerFactory(t),t.byteLength,n)}fromJson(t,e){return this.internalJsonRead(t,function(t){return t?Object.assign(Object.assign({},xo),t):xo}(e))}fromJsonString(t,e){let n=JSON.parse(t);return this.fromJson(n,e)}toJson(t,e){return this.internalJsonWrite(t,function(t){return t?Object.assign(Object.assign({},Lo),t):Lo}(e))}toJsonString(t,e){var n;let i=this.toJson(t,e);return JSON.stringify(i,null,null!==(n=null==e?void 0:e.prettySpaces)&&void 0!==n?n:0)}toBinary(t,e){let n=function(t){return t?Object.assign(Object.assign({},Vo),t):Vo}(e);return this.internalBinaryWrite(t,n.writerFactory(),n).finish()}internalJsonRead(t,e,n){if(null!==t&&"object"==typeof t&&!Array.isArray(t)){let i=null!=n?n:this.create();return this.refJsonReader.read(t,i,e),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${so(t)}.`)}internalJsonWrite(t,e){return this.refJsonWriter.write(t,e)}internalBinaryWrite(t,e,n){return this.refBinWriter.write(t,e,n),e}internalBinaryRead(t,e,n,i){let r=null!=i?i:this.create();return this.refBinReader.read(t,r,n,e),r}}var Wo,Yo;!function(t){t[t.UNSPECIFIED_TYPE=0]="UNSPECIFIED_TYPE",t[t.INT_128=1]="INT_128",t[t.INT_64=2]="INT_64",t[t.INT_32=3]="INT_32",t[t.INT_16=4]="INT_16",t[t.INT_8=5]="INT_8",t[t.UINT_128=6]="UINT_128",t[t.UINT_64=7]="UINT_64",t[t.UINT_32=8]="UINT_32",t[t.UINT_16=9]="UINT_16",t[t.UINT_8=10]="UINT_8",t[t.FLOAT_64=11]="FLOAT_64",t[t.FLOAT_32=12]="FLOAT_32",t[t.FLOAT_16=13]="FLOAT_16",t[t.CHAR=14]="CHAR",t[t.BOOL=15]="BOOL",t[t.STRING=16]="STRING",t[t.SYMBOL=17]="SYMBOL",t[t.VARIABLE_SIZE_STRING=18]="VARIABLE_SIZE_STRING"}(Wo||(Wo={})),function(t){t[t.UNSPECIFIED_KIND=0]="UNSPECIFIED_KIND",t[t.PRIMITIVE_TYPE=1]="PRIMITIVE_TYPE",t[t.VALUE_TYPE=2]="VALUE_TYPE",t[t.CONSTANT_TYPE=3]="CONSTANT_TYPE"}(Yo||(Yo={}));const Ko=new class extends zo{constructor(){super("relationalai.protocol.RelationId",[{no:1,name:"arguments",kind:"message",repeat:1,T:()=>Qo}])}create(t){const e={arguments:[]};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();if(1===e)r.arguments.push(Qo.internalBinaryRead(t,t.uint32(),n));else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){for(let i=0;i<t.arguments.length;i++)Qo.internalBinaryWrite(t.arguments[i],e.tag(1,qs.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},Ho=new class extends zo{constructor(){super("relationalai.protocol.RelTuple",[{no:1,name:"arguments",kind:"message",repeat:1,T:()=>Zo}])}create(t){const e={arguments:[]};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();if(1===e)r.arguments.push(Zo.internalBinaryRead(t,t.uint32(),n));else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){for(let i=0;i<t.arguments.length;i++)Zo.internalBinaryWrite(t.arguments[i],e.tag(1,qs.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},Go=new class extends zo{constructor(){super("relationalai.protocol.RelInt128",[{no:1,name:"highbits",kind:"scalar",T:4,L:0},{no:2,name:"lowbits",kind:"scalar",T:4,L:0}])}create(t){const e={highbits:0n,lowbits:0n};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();switch(e){case 1:r.highbits=t.uint64().toBigInt();break;case 2:r.lowbits=t.uint64().toBigInt();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){0n!==t.highbits&&e.tag(1,qs.Varint).uint64(t.highbits),0n!==t.lowbits&&e.tag(2,qs.Varint).uint64(t.lowbits);let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},qo=new class extends zo{constructor(){super("relationalai.protocol.RelUInt128",[{no:1,name:"highbits",kind:"scalar",T:4,L:0},{no:2,name:"lowbits",kind:"scalar",T:4,L:0}])}create(t){const e={highbits:0n,lowbits:0n};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();switch(e){case 1:r.highbits=t.uint64().toBigInt();break;case 2:r.lowbits=t.uint64().toBigInt();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){0n!==t.highbits&&e.tag(1,qs.Varint).uint64(t.highbits),0n!==t.lowbits&&e.tag(2,qs.Varint).uint64(t.lowbits);let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},Zo=new class extends zo{constructor(){super("relationalai.protocol.PrimitiveValue",[{no:1,name:"tag",kind:"enum",T:()=>["relationalai.protocol.PrimitiveType",Wo]},{no:2,name:"int128_val",kind:"message",oneof:"value",T:()=>Go},{no:3,name:"int64_val",kind:"scalar",oneof:"value",T:3,L:0},{no:4,name:"int32_val",kind:"scalar",oneof:"value",T:5},{no:5,name:"int16_val",kind:"scalar",oneof:"value",T:5},{no:6,name:"int8_val",kind:"scalar",oneof:"value",T:5},{no:7,name:"uint128_val",kind:"message",oneof:"value",T:()=>qo},{no:8,name:"uint64_val",kind:"scalar",oneof:"value",T:4,L:0},{no:9,name:"uint32_val",kind:"scalar",oneof:"value",T:13},{no:10,name:"uint16_val",kind:"scalar",oneof:"value",T:13},{no:11,name:"uint8_val",kind:"scalar",oneof:"value",T:13},{no:12,name:"float64_val",kind:"scalar",oneof:"value",T:1},{no:13,name:"float32_val",kind:"scalar",oneof:"value",T:2},{no:14,name:"float16_val",kind:"scalar",oneof:"value",T:2},{no:15,name:"char_val",kind:"scalar",oneof:"value",T:13},{no:16,name:"bool_val",kind:"scalar",oneof:"value",T:8},{no:17,name:"string_val",kind:"scalar",oneof:"value",T:12}])}create(t){const e={tag:0,value:{oneofKind:void 0}};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();switch(e){case 1:r.tag=t.int32();break;case 2:r.value={oneofKind:"int128Val",int128Val:Go.internalBinaryRead(t,t.uint32(),n,r.value.int128Val)};break;case 3:r.value={oneofKind:"int64Val",int64Val:t.int64().toBigInt()};break;case 4:r.value={oneofKind:"int32Val",int32Val:t.int32()};break;case 5:r.value={oneofKind:"int16Val",int16Val:t.int32()};break;case 6:r.value={oneofKind:"int8Val",int8Val:t.int32()};break;case 7:r.value={oneofKind:"uint128Val",uint128Val:qo.internalBinaryRead(t,t.uint32(),n,r.value.uint128Val)};break;case 8:r.value={oneofKind:"uint64Val",uint64Val:t.uint64().toBigInt()};break;case 9:r.value={oneofKind:"uint32Val",uint32Val:t.uint32()};break;case 10:r.value={oneofKind:"uint16Val",uint16Val:t.uint32()};break;case 11:r.value={oneofKind:"uint8Val",uint8Val:t.uint32()};break;case 12:r.value={oneofKind:"float64Val",float64Val:t.double()};break;case 13:r.value={oneofKind:"float32Val",float32Val:t.float()};break;case 14:r.value={oneofKind:"float16Val",float16Val:t.float()};break;case 15:r.value={oneofKind:"charVal",charVal:t.uint32()};break;case 16:r.value={oneofKind:"boolVal",boolVal:t.bool()};break;case 17:r.value={oneofKind:"stringVal",stringVal:t.bytes()};break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){0!==t.tag&&e.tag(1,qs.Varint).int32(t.tag),"int128Val"===t.value.oneofKind&&Go.internalBinaryWrite(t.value.int128Val,e.tag(2,qs.LengthDelimited).fork(),n).join(),"int64Val"===t.value.oneofKind&&e.tag(3,qs.Varint).int64(t.value.int64Val),"int32Val"===t.value.oneofKind&&e.tag(4,qs.Varint).int32(t.value.int32Val),"int16Val"===t.value.oneofKind&&e.tag(5,qs.Varint).int32(t.value.int16Val),"int8Val"===t.value.oneofKind&&e.tag(6,qs.Varint).int32(t.value.int8Val),"uint128Val"===t.value.oneofKind&&qo.internalBinaryWrite(t.value.uint128Val,e.tag(7,qs.LengthDelimited).fork(),n).join(),"uint64Val"===t.value.oneofKind&&e.tag(8,qs.Varint).uint64(t.value.uint64Val),"uint32Val"===t.value.oneofKind&&e.tag(9,qs.Varint).uint32(t.value.uint32Val),"uint16Val"===t.value.oneofKind&&e.tag(10,qs.Varint).uint32(t.value.uint16Val),"uint8Val"===t.value.oneofKind&&e.tag(11,qs.Varint).uint32(t.value.uint8Val),"float64Val"===t.value.oneofKind&&e.tag(12,qs.Bit64).double(t.value.float64Val),"float32Val"===t.value.oneofKind&&e.tag(13,qs.Bit32).float(t.value.float32Val),"float16Val"===t.value.oneofKind&&e.tag(14,qs.Bit32).float(t.value.float16Val),"charVal"===t.value.oneofKind&&e.tag(15,qs.Varint).uint32(t.value.charVal),"boolVal"===t.value.oneofKind&&e.tag(16,qs.Varint).bool(t.value.boolVal),"stringVal"===t.value.oneofKind&&e.tag(17,qs.LengthDelimited).bytes(t.value.stringVal);let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},Jo=new class extends zo{constructor(){super("relationalai.protocol.ValueType",[{no:1,name:"argument_types",kind:"message",repeat:1,T:()=>Qo}])}create(t){const e={argumentTypes:[]};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();if(1===e)r.argumentTypes.push(Qo.internalBinaryRead(t,t.uint32(),n));else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){for(let i=0;i<t.argumentTypes.length;i++)Qo.internalBinaryWrite(t.argumentTypes[i],e.tag(1,qs.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},Xo=new class extends zo{constructor(){super("relationalai.protocol.ConstantType",[{no:1,name:"rel_type",kind:"message",T:()=>Qo},{no:2,name:"value",kind:"message",T:()=>Ho}])}create(t){const e={};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();switch(e){case 1:r.relType=Qo.internalBinaryRead(t,t.uint32(),n,r.relType);break;case 2:r.value=Ho.internalBinaryRead(t,t.uint32(),n,r.value);break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){t.relType&&Qo.internalBinaryWrite(t.relType,e.tag(1,qs.LengthDelimited).fork(),n).join(),t.value&&Ho.internalBinaryWrite(t.value,e.tag(2,qs.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},Qo=new class extends zo{constructor(){super("relationalai.protocol.RelType",[{no:1,name:"tag",kind:"enum",T:()=>["relationalai.protocol.Kind",Yo]},{no:2,name:"primitive_type",kind:"enum",T:()=>["relationalai.protocol.PrimitiveType",Wo]},{no:3,name:"value_type",kind:"message",T:()=>Jo},{no:4,name:"constant_type",kind:"message",T:()=>Xo}])}create(t){const e={tag:0,primitiveType:0};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();switch(e){case 1:r.tag=t.int32();break;case 2:r.primitiveType=t.int32();break;case 3:r.valueType=Jo.internalBinaryRead(t,t.uint32(),n,r.valueType);break;case 4:r.constantType=Xo.internalBinaryRead(t,t.uint32(),n,r.constantType);break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){0!==t.tag&&e.tag(1,qs.Varint).int32(t.tag),0!==t.primitiveType&&e.tag(2,qs.Varint).int32(t.primitiveType),t.valueType&&Jo.internalBinaryWrite(t.valueType,e.tag(3,qs.LengthDelimited).fork(),n).join(),t.constantType&&Xo.internalBinaryWrite(t.constantType,e.tag(4,qs.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},ta=new class extends zo{constructor(){super("relationalai.protocol.MetadataInfo",[{no:1,name:"relations",kind:"message",repeat:1,T:()=>ea}])}create(t){const e={relations:[]};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();if(1===e)r.relations.push(ea.internalBinaryRead(t,t.uint32(),n));else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){for(let i=0;i<t.relations.length;i++)ea.internalBinaryWrite(t.relations[i],e.tag(1,qs.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}},ea=new class extends zo{constructor(){super("relationalai.protocol.RelationMetadata",[{no:1,name:"relation_id",kind:"message",T:()=>Ko},{no:2,name:"file_name",kind:"scalar",T:9}])}create(t){const e={fileName:""};return globalThis.Object.defineProperty(e,Js,{enumerable:!1,value:this}),void 0!==t&&Zs(this,e,t),e}internalBinaryRead(t,e,n,i){let r=i??this.create(),s=t.pos+e;for(;t.pos<s;){let[e,i]=t.tag();switch(e){case 1:r.relationId=Ko.internalBinaryRead(t,t.uint32(),n,r.relationId);break;case 2:r.fileName=t.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${e} (wire type ${i}) for ${this.typeName}`);let o=t.skip(i);!1!==s&&(!0===s?Gs.onRead:s)(this.typeName,r,e,i,o)}}return r}internalBinaryWrite(t,e,n){t.relationId&&Ko.internalBinaryWrite(t.relationId,e.tag(1,qs.LengthDelimited).fork(),n).join(),""!==t.fileName&&e.tag(2,qs.LengthDelimited).string(t.fileName);let i=n.writeUnknownFields;return!1!==i&&(1==i?Gs.onWrite:i)(this.typeName,t,e),e}};var na,ia,ra,sa;async function oa(t){const e=[];for(const n of t)if("string"!=typeof n.file&&"application/vnd.apache.arrow.stream"===n.file.type){const t=await Hs(n.file.stream());e.push({relationId:n.name,filename:n.file.name,table:t})}return e}async function aa(t,e){const n=(e?.relations||[]).reduce(((t,e)=>(t[e.fileName]=e.relationId,t)),{});return t.map((t=>{const e=n[t.filename]||{arguments:[]};return{relationId:t.relationId,table:t.table,metadata:e}}))}async function la(t){if(!t?.arrayBuffer)throw new Error("Unsupported metadata type: "+typeof t);try{const e=await t.arrayBuffer(),n=new Uint8Array(e);return ta.fromBinary(n)}catch(t){if("illegal tag: field no 0 wire type 0"===t.message)return{relations:[]};throw t}}async function ca(t){let e;if("string"==typeof t)e=t;else{const n=await t.arrayBuffer();e=(new TextDecoder).decode(n)}return JSON.parse(e)}!function(t){t.OPEN="OPEN",t.CREATE="CREATE",t.CREATE_OVERWRITE="CREATE_OVERWRITE",t.OPEN_OR_CREATE="OPEN_OR_CREATE",t.CLONE="CLONE",t.CLONE_OVERWRITE="CLONE_OVERWRITE"}(na||(na={})),function(t){t.CREATED="CREATED",t.RUNNING="RUNNING",t.CANCELLING="CANCELLING",t.ABORTED="ABORTED",t.COMPLETED="COMPLETED"}(ia||(ia={}));class ua extends u{async runTransaction(t,e,n,i=na.OPEN){const r={dbname:t,compute_name:e,open_mode:i,region:this.region};return await this.post("transaction",{query:r,body:n})}async runActions(t,e,n,i=!0){const r=n.map(((t,e)=>function(t,e){return{type:"LabeledAction",name:t,action:e}}(`action-${e}`,t))),s={type:"Transaction",abort:!1,dbname:t,mode:na.OPEN,nowait_durable:!1,readonly:i,version:0,actions:r,computeName:e};return await this.runTransaction(t,e,s)}}!function(t){t.XS="XS",t.S="S",t.M="M",t.L="L",t.XL="XL"}(ra||(ra={})),function(t){t.REQUESTED="REQUESTED",t.PROVISIONING="PROVISIONING",t.REGISTERING="REGISTERING",t.PROVISIONED="PROVISIONED",t.PROVISION_FAILED="PROVISION_FAILED",t.DELETE_REQUESTED="DELETE_REQUESTED",t.STOPPING="STOPPING",t.DELETING="DELETING",t.DELETED="DELETED",t.DELETION_FAILED="DELETION_FAILED"}(sa||(sa={}));const ha="compute",da="oauth-clients",fa="transactions";class pa extends u{async runTransactionAsync(t){const e=await this.post(fa,{body:t});return Array.isArray(e)?await async function(t){const e=t.find((t=>"transaction"===t.name)),n=t.find((t=>"problems"===t.name)),i=t.find((t=>"metadata.proto"===t.name));if(!e)throw new Error("transaction part not found");const r=i?await la(i.file):void 0,s={transaction:await ca(e.file),results:await aa(await oa(t),r)};return n&&(s.problems=await ca(n.file)),s}(e):{transaction:e}}async listTransactions(t){return(await this.get(fa,t)).transactions}async getTransaction(t){return(await this.get(`transactions/${t}`)).transaction}async getTransactionResults(t){const e=await this.get(`transactions/${t}/results`);return await oa(e)}async getTransactionMetadata(t){return la(await this.request(`transactions/${t}/metadata`,{method:"GET",headers:{Accept:"application/x-protobuf"}}))}async getTransactionProblems(t){return await this.get(`transactions/${t}/problems`)}async cancelTransaction(t){return await this.post(`transactions/${t}/cancel`,{})||{}}}function ya(t,e,n=t){return{type:"Source",name:t,value:e,path:n}}const ba=(t,e)=>({rel_key:{values:[],name:t,keys:["RAI_VariableSizeStrings.VariableSizeString"],type:"RelKey"},type:"Relation",columns:[[e]]});function ma(t){return"string"==typeof t?1===t.length?`'${t.replace(/'/g,"\\'")}'`:`"${t.replace(/"/g,'\\"')}"`:"number"==typeof t?t:"boolean"==typeof t?t?"true":"false":void 0}var ga,va;!function(t){t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE"}(ga||(ga={})),function(t){t.USER="user",t.ADMIN="admin"}(va||(va={}));const wa="users";class _a extends u{}var Ia;Ia=_a,[class extends u{async createDatabase(t,e){return(await this.put(h,{body:{name:t,source_name:e}})).database}async listDatabases(t){return(await this.get(h,t)).databases}async getDatabase(t){return(await this.listDatabases({name:t}))[0]}async deleteDatabase(t){return await this.delete(h,{body:{name:t}})}},class extends ua{async listEdbs(t,e){const n=await this.runActions(t,e,[{type:"ListEdbAction"}]);if("ListEdbActionResult"===n.actions[0]?.result?.type)return n.actions[0].result.rels;throw new Error("ListEdbActionResult is missing")}async deleteEdb(t,e,n){const i={type:"ModifyWorkspaceAction",delete_edb:n},r=await this.runActions(t,e,[i],!1);if("ModifyWorkspaceActionResult"===r.actions[0]?.result?.type)return r.actions[0].result.delete_edb_result;throw new Error("ModifyWorkspaceActionResult is missing")}},class extends u{async createEngine(t,e=ra.XS){return(await this.put(ha,{body:{region:this.region,name:t,size:e}})).compute}async listEngines(t){return(await this.get(ha,t)).computes}async getEngine(t){return(await this.listEngines({name:t}))[0]}async deleteEngine(t){return(await this.delete(ha,{body:{name:t}})).status}},class extends ua{async installModels(t,e,n){const i={type:"InstallAction",sources:n};return await this.runActions(t,e,[i],!1)}async listModels(t,e){return await this.runActions(t,e,[{type:"ListSourceAction"}])}async getModel(t,e,n){const i=await this.listModels(t,e);if("ListSourceActionResult"===i.actions[0]?.result?.type){const t=i.actions[0].result.sources.find((t=>t.name===n));if(t)return t}throw new Error(`Model '${n}' not found`)}async deleteModel(t,e,n){const i={type:"ModifyWorkspaceAction",delete_source:[n]},r=await this.runActions(t,e,[i],!1);if("ModifyWorkspaceActionResult"===r.actions[0]?.result?.type)return r.actions[0].result;throw new Error("ModifyWorkspaceActionResult is missing")}},class extends u{async createOAuthClient(t,e){return(await this.post(da,{body:{name:t,permissions:e}})).client}async listOAuthClients(){return(await this.get(da)).clients}async getOAuthClient(t){return(await this.get(`oauth-clients/${t}`)).client}async updateOAuthClient(t,e,n){const i={};return e&&(i.name=e),n&&(i.permissions=n),(await this.patch(`oauth-clients/${t}`,{body:i})).client}async rotateOAuthClientSecret(t){return(await this.post(`oauth-clients/${t}/rotate-secret`,{})).client}async deleteOAuthClient(t){return await this.delete(`oauth-clients/${t}`,{})}async listPermissions(){return(await this.get("permissions",{})).permissions}},class extends pa{async execAsync(t,e,n,i=[],r=!0,s=[]){const o={dbname:t,query:n,nowait_durable:!1,readonly:r,v1_inputs:i.map((t=>ba(t.name,t.value))),tags:s};return e&&(o.engine_name=e),await this.runTransactionAsync(o)}async exec(t,e,n,i=[],r=!0,s=[],o=1e3,a=Number.POSITIVE_INFINITY){const l=await this.execAsync(t,e,n,i,r,s),c=l.transaction.id;return"results"in l?l:await this.pollTransaction(c,o,a)}async pollTransaction(t,e=1e3,n=Number.POSITIVE_INFINITY){const i=Date.now();let r;await new Promise(((s,o)=>{const a=()=>{setTimeout((async()=>{var e;r=await this.getTransaction(t),(e=r.state)===ia.ABORTED||e===ia.COMPLETED?s():(Date.now()-i>n&&o(new Error(`Polling transaction timeout of ${n}ms has been exceeded.`)),a())}),e)};a()}));const s=await Promise.all([this.getTransactionMetadata(t),this.getTransactionProblems(t),this.getTransactionResults(t)]),o=await aa(s[2],s[0]);return{transaction:r,problems:s[1],results:o}}},class extends ua{async query(t,e,n,i=[],r=!0){const s=function(t,e=[]){return{type:"QueryAction",outputs:[],persist:[],source:ya("query",t,""),inputs:e.map((t=>ba(t.name,t.value)))}}(n,i);return await this.runActions(t,e,[s],r)}async loadJson(t,e,n,i){const r=["def config:data = data",`def insert:${n} = load_json[config]`],s=[{name:"data",value:JSON.stringify(i)}];return this.query(t,e,r.join("\n"),s,!1)}async loadCsv(t,e,n,i,r,s){const o=["def config:data = data"],a=[{name:"data",value:i}];return r&&o.push(...function(t){const e=[];return Object.keys(t).forEach((n=>{const i=n;if("header"===i){const n=Object.keys(t.header).map((e=>`(${e}, ${ma(t.header[e])})`)).join("; ");e.push(`def config:syntax:header = ${n}`)}else e.push(`def config:syntax:${i} = ${ma(t[i])}`)})),e}(r)),s&&o.push(...function(t){const e=[];return Object.keys(t).forEach((n=>{e.push(`def config:schema${n} = ${ma(t[n])}`)})),e}(s)),o.push(`def insert:${n} = load_csv[config]`),this.query(t,e,o.join("\n"),a,!1)}},ua,pa,class extends u{async createUser(t,e){return(await this.post(wa,{body:{email:t,roles:e}})).user}async listUsers(){return(await this.get(wa)).users}async getUser(t){return(await this.get(`users/${t}`)).user}async updateUser(t,e,n){const i={};return e&&(i.status=e),n&&n.length&&(i.roles=n),(await this.patch(`users/${t}`,{body:i})).user}async enableUser(t){return await this.updateUser(t,ga.ACTIVE)}async disableUser(t){return await this.updateUser(t,ga.INACTIVE)}async deleteUser(t){return await this.delete(`users/${t}`,{})}}].forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((e=>{Object.defineProperty(Ia.prototype,e,Object.getOwnPropertyDescriptor(t.prototype,e)||Object.create(null))}))}));const Ta=_a;var Sa,Na;!function(t){t.CREATED="CREATED",t.CREATING="CREATING",t.CREATION_FAILED="CREATION_FAILED",t.DELETED="DELETED"}(Sa||(Sa={})),function(t){t.CREATE_COMPUTE="create:compute",t.DELETE_COMPUTE="delete:compute",t.LIST_COMPUTES="list:compute",t.READ_COMPUTE="read:compute",t.CREATE_DATABASE="create:database",t.LIST_DATABASES="list:database",t.UPDATE_DATABASE="update:database",t.DELETE_DATABASE="delete:database",t.RUN_TRANSACTION="run:transaction",t.LIST_TRANSACTION="list:transaction",t.DELETE_TRANSACTION="delete:transaction",t.READ_TRANSACTION="read:transaction",t.READ_CREDITS_USAGE="read:credits_usage",t.CREATE_OAUTH_CLIENT="create:oauth_client",t.READ_OAUTH_CLIENT="read:oauth_client",t.LIST_OAUTH_CLIENTS="list:oauth_client",t.UPDATE_OAUTH_CLIENT="update:oauth_client",t.DELETE_OAUTH_CLIENT="delete:oauth_client",t.ROTATE_OAUTH_CLIENT_SECRET="rotate:oauth_client_secret",t.CREATE_USER="create:user",t.LIST_USERS="list:user",t.READ_USER="read:user",t.UPDATE_USER="update:user",t.DELETE_USER="delete:user",t.LIST_ROLES="list:role",t.READ_ROLE="read:role",t.LIST_PERMISSIONS="list:permission",t.CREATE_ACCESS_KEY="create:accesskey",t.LIST_ACCESS_KEYS="list:accesskey"}(Na||(Na={}));class Oa{}class Aa extends Oa{getToken;constructor(t){super(),this.getToken=t}}class Ea{token;experiesIn;createdOn;constructor(t,e,n){this.token=t,this.experiesIn=e,this.createdOn=n}get isExpired(){return(Date.now()-this.createdOn)/1e3>=this.experiesIn}}class Da extends Oa{readCache;writeCache;clientId;clientSecret;clientCredentialsUrl;accessToken;constructor(t,e,n,i,r){super(),this.readCache=i,this.writeCache=r,this.clientId=t,this.clientSecret=e,this.clientCredentialsUrl=n}async getToken(t){return await this.readTokenFromCache(),this.accessToken&&!this.accessToken.isExpired?this.accessToken.token:this.requestToken(t)}async readTokenFromCache(){if(!this.accessToken&&this.readCache){const t=await this.readCache();t&&(this.accessToken=new Ea(t.access_token,t.expires_in,t.created_on))}}async requestToken(t){const e=new URL(t),n={client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",audience:`https://${e.hostname}`},i=await c(this.clientCredentialsUrl,{method:"POST",body:n}),r={access_token:i.access_token,expires_in:i.expires_in,created_on:Date.now()};return this.accessToken=new Ea(r.access_token,r.expires_in,r.created_on),this.writeCache&&await this.writeCache(r),this.accessToken.token}}var Ba=n(315),Fa=n(776),Ua=n.n(Fa);Ua().config({precision:31});const La=621356832e5,xa=/^Int(\d+)$/,Ma=/^UInt(\d+)$/,Ra=/^Float(\d+)$/,Ca=/^FixedPointDecimals.FixedDecimal{Int(\d+), (\d+)}$/,ka=/^Rational{Int(\d+)}$/;function Va(t){if(t.startsWith(":"))return{type:"Constant",name:"Symbol",value:{type:"String",value:t}};if(t.includes("(")&&!t.startsWith("("))return{type:"Constant",name:t,value:{type:"String",value:t}};if("String"===t)return{type:"String"};if("Bool"===t)return{type:"Bool"};if("Char"===t)return{type:"Char"};if("Dates.DateTime"===t)return{type:"DateTime"};if("Dates.Date"===t)return{type:"Date"};if("Dates.Year"===t)return{type:"Year"};if("Dates.Month"===t)return{type:"Month"};if("Dates.Week"===t)return{type:"Week"};if("Dates.Day"===t)return{type:"Day"};if("Dates.Hour"===t)return{type:"Hour"};if("Dates.Minute"===t)return{type:"Minute"};if("Dates.Second"===t)return{type:"Second"};if("Dates.Millisecond"===t)return{type:"Millisecond"};if("Dates.Microsecond"===t)return{type:"Microsecond"};if("Dates.Nanosecond"===t)return{type:"Nanosecond"};if("HashValue"===t)return{type:"Hash"};if("Missing"===t)return{type:"Missing"};if("FilePos"===t)return{type:"FilePos"};const e=t.match(xa);if(e&&2===e.length)return{type:`Int${e[1]}`};const n=t.match(Ma);if(n&&2===n.length)return{type:`UInt${n[1]}`};const i=t.match(Ra);if(i&&2===i.length)return{type:`Float${i[1]}`};const r=t.match(Ca);if(r&&3===r.length)return{type:`Decimal${Number.parseInt(r[1])}`,places:Number.parseInt(r[2])};const s=t.match(ka);return s&&2===s.length?{type:`Rational${s[1]}`}:{type:"Unknown",name:t}}function ja(t){if(t.tag===Yo.CONSTANT_TYPE&&t.constantType?.value&&t.constantType?.relType){const e=ja(t.constantType.relType);if("ValueType"!==e.type){const n=t.constantType.value.arguments.map(Wa),i=Pa(e,1===n.length?n[0]:n);return{type:"Constant",name:"String"===e.type?"Symbol":`${e.type}(${$a(e,i)})`,value:{...e,value:i}}}{const n=Ya(e,t.constantType.value.arguments);return{type:"Constant",name:`${e.type}(${$a(e,n)})`,value:{...e,value:Pa(e,n)}}}}if(t.tag===Yo.PRIMITIVE_TYPE)switch(t.primitiveType){case Wo.SYMBOL:case Wo.STRING:return{type:"String"};case Wo.CHAR:return{type:"Char"};case Wo.BOOL:return{type:"Bool"};case Wo.INT_8:return{type:"Int8"};case Wo.INT_16:return{type:"Int16"};case Wo.INT_32:return{type:"Int32"};case Wo.INT_64:return{type:"Int64"};case Wo.INT_128:return{type:"Int128"};case Wo.UINT_8:return{type:"UInt8"};case Wo.UINT_16:return{type:"UInt16"};case Wo.UINT_32:return{type:"UInt32"};case Wo.UINT_64:return{type:"UInt64"};case Wo.UINT_128:return{type:"UInt128"};case Wo.FLOAT_16:return{type:"Float16"};case Wo.FLOAT_32:return{type:"Float32"};case Wo.FLOAT_64:return{type:"Float64"}}return t.tag===Yo.VALUE_TYPE&&t.valueType?function(t){const e=t.typeDefs.slice(0,3).filter((t=>"Constant"===t.type&&"String"===t.value.type));if(3!==e.length||":rel"!==e[0].value.value||":base"!==e[1].value.value)return t;const n=e[2].value.value.slice(1);switch(n){case"DateTime":case"Date":case"Year":case"Month":case"Week":case"Day":case"Hour":case"Minute":case"Second":case"Millisecond":case"Microsecond":case"Nanosecond":case"FilePos":case"Missing":case"Hash":return{type:n};case"FixedDecimal":if(6===t.typeDefs.length&&"Constant"===t.typeDefs[3].type&&"Constant"===t.typeDefs[4].type){const e=Number(t.typeDefs[3].value.value),n=Number(t.typeDefs[4].value.value);if(16===e||32===e||64===e||128===e)return{type:`Decimal${e}`,places:n}}break;case"Rational":if(4===t.typeDefs.length&&"ValueType"===t.typeDefs[3].type){const e=t.typeDefs[3];if(2===e.typeDefs.length)switch(e.typeDefs[0].type){case"Int8":return{type:"Rational8"};case"Int16":return{type:"Rational16"};case"Int32":return{type:"Rational32"};case"Int64":return{type:"Rational64"};case"Int128":return{type:"Rational128"}}}}return t}({type:"ValueType",typeDefs:t.valueType.argumentTypes.map((t=>ja(t)))}):{type:"Unknown"}}function Pa(t,e){switch(t.type){case"String":case"Bool":case"Year":case"Month":case"Week":case"Day":case"Hour":case"Minute":case"Second":case"Millisecond":case"Microsecond":case"Nanosecond":case"FilePos":case"Int8":case"Int16":case"Int32":case"Int64":case"UInt8":case"UInt16":case"UInt32":case"UInt64":case"Float16":case"Float32":case"Float64":return e;case"Char":return String.fromCodePoint(e);case"DateTime":return new Date(Number(e)-La);case"Date":return new Date(864e5*Number(e)-La);case"Missing":return null;case"Hash":case"UInt128":return n=Array.from(e),BigInt.asUintN(64,n[1])<<BigInt(64)|n[0];case"Int128":return za(Array.from(e));case"Decimal16":case"Decimal32":case"Decimal64":return new(Ua())(e.toString()).dividedBy(Math.pow(10,t.places));case"Decimal128":{const n=za(Array.from(e));return new(Ua())(n.toString()).dividedBy(Math.pow(10,t.places))}case"Rational8":case"Rational16":case"Rational32":case"Rational64":return{numerator:(e=Array.from(e))[0],denominator:e[1]};case"Rational128":return e=Array.from(e),{numerator:za(Array.from(e[0])),denominator:za(Array.from(e[1]))};case"Constant":return t.value.value;case"ValueType":{const n=t.typeDefs.filter((t=>"Constant"!==t.type));let i=e?.toArray?e.toArray():e;return 1===n.length&&(i=[i]),n.map(((t,e)=>Pa(t,i[e])))}case"Unknown":return e&&e.toJSON?e.toJSON():e}var n}function $a(t,e){const n={...t,value:e};if("Constant"===t.type)return $a(t.value,e);switch(n.type){case"String":return JSON.stringify(n.value).slice(1,-1);case"Bool":return n.value?"true":"false";case"Char":return n.value;case"DateTime":return n.value.toISOString();case"Date":return n.value.toISOString().split("T")[0];case"Year":case"Month":case"Week":case"Day":case"Hour":case"Minute":case"Second":case"Millisecond":case"Microsecond":case"Nanosecond":case"Int8":case"Int16":case"Int32":case"Int64":case"Int128":case"UInt8":case"UInt16":case"UInt32":case"UInt64":case"UInt128":case"FilePos":case"Hash":return n.value.toString();case"Missing":return"missing";case"Float16":case"Float32":case"Float64":return n.value%1==0?n.value+".0":n.value.toString();case"Decimal16":case"Decimal32":case"Decimal64":case"Decimal128":return n.value.toFixed(n.places);case"Rational8":case"Rational16":case"Rational32":case"Rational64":case"Rational128":return`${n.value.numerator}/${n.value.denominator}`;case"ValueType":return n.typeDefs.filter((t=>"Constant"!==t.type)).map(((t,e)=>{const i=$a(t,n.value[e]);return"ValueType"===t.type?`(${i})`:i})).join(", ");case"Unknown":{const t=n.value;return"object"==typeof t?Object.keys(t).map((e=>`${t[e]}`)).join(", "):t}}}function za(t){return BigInt.asIntN(64,t[1])<<BigInt(64)|t[0]}function Wa(t){switch(t.value.oneofKind){case"stringVal":return`:${(new TextDecoder).decode(t.value.stringVal)}`;case"charVal":return t.value.charVal;case"boolVal":return t.value.boolVal;case"int8Val":return t.value.int8Val;case"int16Val":return t.value.int16Val;case"int32Val":return t.value.int32Val;case"int64Val":return t.value.int64Val;case"int128Val":return[t.value.int128Val.lowbits,t.value.int128Val.highbits];case"uint8Val":return t.value.uint8Val;case"uint16Val":return t.value.uint16Val;case"uint32Val":return t.value.uint32Val;case"uint64Val":return t.value.uint64Val;case"uint128Val":return[t.value.uint128Val.lowbits,t.value.uint128Val.highbits];case"float16Val":return t.value.float16Val;case"float32Val":return t.value.float32Val;case"float64Val":return t.value.float64Val}throw new Error("Unknown primitive value")}function Ya(t,e){const n=e.map(Wa),i=[],r=(t,e)=>{if("ValueType"===t.type){const n=[];e.push(n),t.typeDefs.forEach((t=>r(t,n)))}else"Constant"!==t.type&&e.push(n.splice(0,1)[0])};return r(t,i),i[0]}class Ka{relation;table;colDefs;constructor(t){this.relation=t,this.table=t.table;const e=t.metadata.arguments.filter((t=>t.tag!==Yo.UNSPECIFIED_KIND)).length?t.metadata.arguments:t.relationId.split("/").filter((t=>t));let n=0;this.colDefs=e.map((t=>{const e="string"==typeof t?Va(t):ja(t),i={typeDef:e,metadata:"object"==typeof t?t:{tag:Yo.UNSPECIFIED_KIND,primitiveType:Wo.UNSPECIFIED_TYPE}};return"Constant"!==e.type&&(i.arrowIndex=n,n++),i}))}typeDefs(){return this.colDefs.map((t=>t.typeDef))}get columnLength(){return this.colDefs.length}columns(){const t=[];for(let e=0;e<this.columnLength;e++)t.push(this.columnAt(e));return t}columnAt(t){const e=this.colDefs[t];if(!e)throw new Error("Couldn't find column by index");const n=this.table,i=Ga(this.colDefs)?1:this.table.numRows,r={get length(){return i},get typeDef(){return e.typeDef},*[Symbol.iterator](){if("Constant"===e.typeDef.type)for(let t=0;t<i;t++)yield Pa(e.typeDef,null);else{const t=n.getChildAt(e.arrowIndex);if(!t)throw new Error("Couldn't find column by index");for(const n of t)yield Pa(e.typeDef,n)}},values(){return Array.from(this)},get(t){if(!(t<0||t>=i)){if("Constant"===e.typeDef.type)return Pa(e.typeDef,null);{const i=n.getChildAt(e.arrowIndex);return Pa(e.typeDef,i.get(t))}}}};return r}sliceColumns(t,e){const n=this.colDefs.slice(t,e),i=[];n.forEach((t=>{void 0!==t.arrowIndex&&i.push(this.table.schema.names[t.arrowIndex])}));const r=this.relation.relationId.split("/").filter((t=>t)).slice(t,e).join("/"),s=this.table.select(i);return new Ka({relationId:`/${r}`,table:s,metadata:{arguments:n.map((t=>t.metadata))}})}get length(){return Ga(this.colDefs)?1:this.table.numRows}*[Symbol.iterator](){Ga(this.colDefs)&&(yield this.get(0));for(const t of this.table)yield Ha(t,this.colDefs)}values(){return Array.from(this)}get(t){if(Ga(this.colDefs)&&0===t)return this.colDefs.map((t=>Pa(t.typeDef,null)));const e=this.table.get(t);return e?Ha(e,this.colDefs):void 0}slice(t,e){const n=this.table.slice(t,e);return new Ka({relationId:this.relation.relationId,table:n,metadata:this.relation.metadata})}print(){const t=new Ba.Table({columns:this.colDefs.map(((t,e)=>({name:e.toString(),title:t.typeDef.name||t.typeDef.type})))});this.values().forEach((e=>{const n={};e.forEach(((t,e)=>{const{typeDef:i}=this.colDefs[e];n[e]=$a(i,t)})),t.addRow(n)})),t.printTable()}physical(){const t=this.relation.relationId.split("/").filter((t=>t.length&&"Constant"!==Va(t).type)).join("/");return new Ka({relationId:`/${t}`,table:this.table,metadata:{arguments:this.colDefs.filter((t=>"Constant"!==t.typeDef.type)).map((t=>t.metadata))}})}arrow(){return this.table}}function Ha(t,e){const n=t.toArray();return e.map((t=>"Constant"===t.typeDef.type?Pa(t.typeDef,null):Pa(t.typeDef,n[t.arrowIndex])))}function Ga(t){return t.length&&t.every((t=>"Constant"===t.typeDef.type))}})();var r=i.MS,s=i.KU,o=i.vD,a=i.Hh,l=i.cN,c=i.hi,u=i.mT,h=i.Gj,d=i.$5,f=i.hY,p=i.ZV,y=i.y3,b=i.MX,m=i.Bm,g=i.vv,v=i.oj,w=i.Am,_=i.TR,I=i.Q_,T=i.uU,S=i.WG,N=i.C7,O=i.qw,A=i.pF,E=i.i4,D=i.J0,B=i.q4,F=i.Ge,U=i.Ai,L=i.UZ,x=i.sK,M=i.xe,R=i.up;export{r as ApiError,s as Client,o as ClientCredentials,a as ConstantType,l as Credentials,c as DatabaseState,u as EngineSize,h as EngineState,d as GetTokenCredentials,f as Kind,p as MetadataInfo,y as Permission,b as PrimitiveType,m as PrimitiveValue,g as RelInt128,v as RelTuple,w as RelType,_ as RelUInt128,I as RelationId,T as RelationMetadata,S as ResultTable,N as TransactionAsyncState,O as TransactionError,A as TransactionMode,E as UserRole,D as UserStatus,B as VERSION,F as ValueType,U as convertValue,L as getDisplayValue,x as getTypeDef,M as getTypeDefFromProtobuf,R as unflattenContantValue};
//# sourceMappingURL=rai-sdk-javascript.module.js.map